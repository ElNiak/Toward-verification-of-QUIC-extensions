<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by rfcdiff 1.48: rfcdiff  -->
<!-- <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional" > -->
<!-- System: Linux durif 3.2.0-6-amd64 #1 SMP Debian 3.2.102-1 x86_64 GNU/Linux -->
<!-- Using awk: /usr/bin/gawk: GNU Awk 4.0.1 -->
<!-- Using diff: /usr/bin/diff: diff (GNU diffutils) 3.2 -->
<!-- Using wdiff: /usr/bin/wdiff: wdiff (GNU wdiff) 1.1.2 -->
<html xmlns="http://www.w3.org/1999/xhtml"><head> 
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
  <meta http-equiv="Content-Style-Type" content="text/css"> 
  <title>Diff: draft-ietf-quic-transport-17.txt - draft-ietf-quic-transport-18.txt</title> 
  <style type="text/css"> 
    body    { margin: 0.4ex; margin-right: auto; } 
    tr      { } 
    td      { white-space: pre; font-family: monospace; vertical-align: top; font-size: 0.86em;} 
    th      { font-size: 0.86em; } 
    .small  { font-size: 0.6em; font-style: italic; font-family: Verdana, Helvetica, sans-serif; } 
    .left   { background-color: #EEE; } 
    .right  { background-color: #FFF; } 
    .diff   { background-color: #CCF; } 
    .lblock { background-color: #BFB; } 
    .rblock { background-color: #FF8; } 
    .insert { background-color: #8FF; } 
    .delete { background-color: #ACF; } 
    .void   { background-color: #FFB; } 
    .cont   { background-color: #EEE; } 
    .linebr { background-color: #AAA; } 
    .lineno { color: red; background-color: #FFF; font-size: 0.7em; text-align: right; padding: 0 2px; } 
    .elipsis{ background-color: #AAA; } 
    .left .cont { background-color: #DDD; } 
    .right .cont { background-color: #EEE; } 
    .lblock .cont { background-color: #9D9; } 
    .rblock .cont { background-color: #DD6; } 
    .insert .cont { background-color: #0DD; } 
    .delete .cont { background-color: #8AD; } 
    .stats, .stats td, .stats th { background-color: #EEE; padding: 2px 0; } 
    span.hide { display: none; color: #aaa;}    a:hover span { display: inline; }    tr.change { background-color: gray; } 
    tr.change a { text-decoration: none; color: black } 
  </style> 
     <script>
var chunk_index = 0;
var old_chunk = null;

function format_chunk(index) {
    var prefix = "diff";
    var str = index.toString();
    for (x=0; x<(4-str.length); ++x) {
        prefix+='0';
    }
    return prefix + str;
}

function find_chunk(n){
    return document.querySelector('tr[id$="' + n + '"]');
}

function change_chunk(offset) {
    var index = chunk_index + offset;
    var new_str;
    var new_chunk;

    new_str = format_chunk(index);
    new_chunk = find_chunk(new_str);
    if (!new_chunk) {
        return;
    }
    if (old_chunk) {
        old_chunk.style.outline = "";
    }
    old_chunk = new_chunk;
    old_chunk.style.outline = "1px solid red";
    window.location.hash = "#" + new_str;
    window.scrollBy(0,-100);
    chunk_index = index;
}

document.onkeydown = function(e) {
    switch (e.keyCode) {
    case 78:
        change_chunk(1);
        break;
    case 80:
        change_chunk(-1);
        break;
    }
};
   </script> 
</head> 
<body> 
  <table cellspacing="0" cellpadding="0" border="0"> 
  <tbody><tr id="part-1" bgcolor="orange"><th></th><th><a href="https://tools.ietf.org/rfcdiff?url2=draft-ietf-quic-transport-17.txt" style="color:#008; text-decoration:none;">&lt;</a>&nbsp;<a href="https://tools.ietf.org/html/draft-ietf-quic-transport-17.txt" style="color:#008">draft-ietf-quic-transport-17.txt</a>&nbsp;</th><th> </th><th>&nbsp;<a href="https://tools.ietf.org/html/draft-ietf-quic-transport-18.txt" style="color:#008">draft-ietf-quic-transport-18.txt</a>&nbsp;<a href="https://tools.ietf.org/rfcdiff?url1=draft-ietf-quic-transport-18.txt" style="color:#008; text-decoration:none;">&gt;</a></th><th></th></tr> 
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">QUIC                                                     J. Iyengar, Ed.</td><td> </td><td class="right">QUIC                                                     J. Iyengar, Ed.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">Internet-Draft                                                    Fastly</td><td> </td><td class="right">Internet-Draft                                                    Fastly</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">Intended status: Standards Track                         M. Thomson, Ed.</td><td> </td><td class="right">Intended status: Standards Track                         M. Thomson, Ed.</td><td class="lineno"></td></tr>
      <tr id="diff0001"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">Expires: <span class="delete">June 21,</span> 2019                                           Mozilla</td><td> </td><td class="rblock">Expires: <span class="insert">July 27,</span> 2019                                           Mozilla</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">                                                       <span class="delete">December 18, 2018</span></td><td> </td><td class="rblock">                                                        <span class="insert">January 23, 2019</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">           QUIC: A UDP-Based Multiplexed and Secure Transport</td><td> </td><td class="right">           QUIC: A UDP-Based Multiplexed and Secure Transport</td><td class="lineno"></td></tr>
      <tr id="diff0002"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">                      draft-ietf-quic-transport-1<span class="delete">7</span></td><td> </td><td class="rblock">                      draft-ietf-quic-transport-1<span class="insert">8</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">Abstract</td><td> </td><td class="right">Abstract</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   This document defines the core of the QUIC transport protocol.</td><td> </td><td class="right">   This document defines the core of the QUIC transport protocol.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Accompanying documents describe QUIC's loss detection and congestion</td><td> </td><td class="right">   Accompanying documents describe QUIC's loss detection and congestion</td><td class="lineno"></td></tr>
      <tr id="diff0003"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   control <span class="delete">[QUIC-RECOVERY]</span> and the use of TLS for key <span class="delete">negotiation</span></td><td> </td><td class="rblock">   control and the use of TLS for key <span class="insert">negotiation.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   [QUIC-TLS].</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">Note to Readers</td><td> </td><td class="right">Note to Readers</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Discussion of this draft takes place on the QUIC working group</td><td> </td><td class="right">   Discussion of this draft takes place on the QUIC working group</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   mailing list (quic@ietf.org), which is archived at</td><td> </td><td class="right">   mailing list (quic@ietf.org), which is archived at</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   &lt;https://mailarchive.ietf.org/arch/search/?email_list=quic&gt;.</td><td> </td><td class="right">   &lt;https://mailarchive.ietf.org/arch/search/?email_list=quic&gt;.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Working Group information can be found at &lt;https://github.com/</td><td> </td><td class="right">   Working Group information can be found at &lt;https://github.com/</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   quicwg&gt;; source code and issues list for this draft can be found at</td><td> </td><td class="right">   quicwg&gt;; source code and issues list for this draft can be found at</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   &lt;https://github.com/quicwg/base-drafts/labels/-transport&gt;.</td><td> </td><td class="right">   &lt;https://github.com/quicwg/base-drafts/labels/-transport&gt;.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-2" class="change"><td></td><th><small>skipping to change at</small><a href="#part-2"><em> page 1, line 44<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-2"><em> page 1, line 43<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   Internet-Drafts are working documents of the Internet Engineering</td><td> </td><td class="right">   Internet-Drafts are working documents of the Internet Engineering</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Task Force (IETF).  Note that other groups may also distribute</td><td> </td><td class="right">   Task Force (IETF).  Note that other groups may also distribute</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   working documents as Internet-Drafts.  The list of current Internet-</td><td> </td><td class="right">   working documents as Internet-Drafts.  The list of current Internet-</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Drafts is at https://datatracker.ietf.org/drafts/current/.</td><td> </td><td class="right">   Drafts is at https://datatracker.ietf.org/drafts/current/.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Internet-Drafts are draft documents valid for a maximum of six months</td><td> </td><td class="right">   Internet-Drafts are draft documents valid for a maximum of six months</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   and may be updated, replaced, or obsoleted by other documents at any</td><td> </td><td class="right">   and may be updated, replaced, or obsoleted by other documents at any</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   time.  It is inappropriate to use Internet-Drafts as reference</td><td> </td><td class="right">   time.  It is inappropriate to use Internet-Drafts as reference</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   material or to cite them other than as "work in progress."</td><td> </td><td class="right">   material or to cite them other than as "work in progress."</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0004"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   This Internet-Draft will expire on Ju<span class="delete">ne 21</span>, 2019.</td><td> </td><td class="rblock">   This Internet-Draft will expire on Ju<span class="insert">ly 27</span>, 2019.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">Copyright Notice</td><td> </td><td class="right">Copyright Notice</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0005"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Copyright (c) 201<span class="delete">8</span> IETF Trust and the persons identified as the</td><td> </td><td class="rblock">   Copyright (c) 201<span class="insert">9</span> IETF Trust and the persons identified as the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   document authors.  All rights reserved.</td><td> </td><td class="right">   document authors.  All rights reserved.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   This document is subject to BCP 78 and the IETF Trust's Legal</td><td> </td><td class="right">   This document is subject to BCP 78 and the IETF Trust's Legal</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Provisions Relating to IETF Documents</td><td> </td><td class="right">   Provisions Relating to IETF Documents</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   (https://trustee.ietf.org/license-info) in effect on the date of</td><td> </td><td class="right">   (https://trustee.ietf.org/license-info) in effect on the date of</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   publication of this document.  Please review these documents</td><td> </td><td class="right">   publication of this document.  Please review these documents</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   carefully, as they describe your rights and restrictions with respect</td><td> </td><td class="right">   carefully, as they describe your rights and restrictions with respect</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   to this document.  Code Components extracted from this document must</td><td> </td><td class="right">   to this document.  Code Components extracted from this document must</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   include Simplified BSD License text as described in Section 4.e of</td><td> </td><td class="right">   include Simplified BSD License text as described in Section 4.e of</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the Trust Legal Provisions and are provided without warranty as</td><td> </td><td class="right">   the Trust Legal Provisions and are provided without warranty as</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-3" class="change"><td></td><th><small>skipping to change at</small><a href="#part-3"><em> page 2, line 31<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-3"><em> page 2, line 26<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   5</td><td> </td><td class="right">   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   5</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     1.1.  Document Structure  . . . . . . . . . . . . . . . . . . .   6</td><td> </td><td class="right">     1.1.  Document Structure  . . . . . . . . . . . . . . . . . . .   6</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     1.2.  Terms and Definitions . . . . . . . . . . . . . . . . . .   7</td><td> </td><td class="right">     1.2.  Terms and Definitions . . . . . . . . . . . . . . . . . .   7</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     1.3.  Notational Conventions  . . . . . . . . . . . . . . . . .   8</td><td> </td><td class="right">     1.3.  Notational Conventions  . . . . . . . . . . . . . . . . .   8</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   2.  Streams . . . . . . . . . . . . . . . . . . . . . . . . . . .   8</td><td> </td><td class="right">   2.  Streams . . . . . . . . . . . . . . . . . . . . . . . . . . .   8</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     2.1.  Stream Types and Identifiers  . . . . . . . . . . . . . .   9</td><td> </td><td class="right">     2.1.  Stream Types and Identifiers  . . . . . . . . . . . . . .   9</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     2.2.  Sending and Receiving Data  . . . . . . . . . . . . . . .  10</td><td> </td><td class="right">     2.2.  Sending and Receiving Data  . . . . . . . . . . . . . . .  10</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     2.3.  Stream Prioritization . . . . . . . . . . . . . . . . . .  10</td><td> </td><td class="right">     2.3.  Stream Prioritization . . . . . . . . . . . . . . . . . .  10</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   3.  Stream States . . . . . . . . . . . . . . . . . . . . . . . .  11</td><td> </td><td class="right">   3.  Stream States . . . . . . . . . . . . . . . . . . . . . . . .  11</td><td class="lineno"></td></tr>
      <tr id="diff0006"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     3.1.  <span class="delete">Send</span> Stream States  . . . . . . . . . . . . . . . . . . <span class="delete">.</span>  11</td><td> </td><td class="rblock">     3.1.  <span class="insert">Sending</span> Stream States . . . . . . . . . . . . . . . . . .  11</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     3.2.  <span class="delete">Receive</span> Stream States <span class="delete">.</span> . . . . . . . . . . . . . . . . .  13</td><td> </td><td class="rblock">     3.2.  <span class="insert">Receiving</span> Stream States . . . . . . . . . . . . . . . . .  13</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     3.3.  Permitted Frame Types . . . . . . . . . . . . . . . . . .  16</td><td> </td><td class="right">     3.3.  Permitted Frame Types . . . . . . . . . . . . . . . . . .  16</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     3.4.  Bidirectional Stream States . . . . . . . . . . . . . . .  16</td><td> </td><td class="right">     3.4.  Bidirectional Stream States . . . . . . . . . . . . . . .  16</td><td class="lineno"></td></tr>
      <tr id="diff0007"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     3.5.  Solicited State Transitions . . . . . . . . . . . . . . .  <span class="delete">17</span></td><td> </td><td class="rblock">     3.5.  Solicited State Transitions . . . . . . . . . . . . . . .  <span class="insert">18</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   4.  Flow Control  . . . . . . . . . . . . . . . . . . . . . . . .  <span class="delete">18</span></td><td> </td><td class="rblock">   4.  Flow Control  . . . . . . . . . . . . . . . . . . . . . . . .  <span class="insert">19</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     4.1.  Data Flow Control . . . . . . . . . . . . . . . . . . . .  19</td><td> </td><td class="right">     4.1.  Data Flow Control . . . . . . . . . . . . . . . . . . . .  19</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     4.2.  Flow Credit Increments  . . . . . . . . . . . . . . . . .  20</td><td> </td><td class="right">     4.2.  Flow Credit Increments  . . . . . . . . . . . . . . . . .  20</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     4.3.  Handling Stream Cancellation  . . . . . . . . . . . . . .  21</td><td> </td><td class="right">     4.3.  Handling Stream Cancellation  . . . . . . . . . . . . . .  21</td><td class="lineno"></td></tr>
      <tr id="diff0008"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     4.4.  Stream Final <span class="delete">Offset . . . . . . . . . . . . . . . . . . .  21</span></td><td> </td><td class="rblock">     4.4.  Stream Final <span class="insert">Size . . . . . . . . . . . . . . . . . . . .  22</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     4.5.  Controlling Concurrency . . . . . . . . . . . . . . . . .  22</td><td> </td><td class="right">     4.5.  Controlling Concurrency . . . . . . . . . . . . . . . . .  22</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   5.  Connections . . . . . . . . . . . . . . . . . . . . . . . . .  23</td><td> </td><td class="right">   5.  Connections . . . . . . . . . . . . . . . . . . . . . . . . .  23</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     5.1.  Connection ID . . . . . . . . . . . . . . . . . . . . . .  23</td><td> </td><td class="right">     5.1.  Connection ID . . . . . . . . . . . . . . . . . . . . . .  23</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">       5.1.1.  Issuing Connection IDs  . . . . . . . . . . . . . . .  24</td><td> </td><td class="right">       5.1.1.  Issuing Connection IDs  . . . . . . . . . . . . . . .  24</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">       5.1.2.  Consuming and Retiring Connection IDs . . . . . . . .  25</td><td> </td><td class="right">       5.1.2.  Consuming and Retiring Connection IDs . . . . . . . .  25</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     5.2.  Matching Packets to Connections . . . . . . . . . . . . .  25</td><td> </td><td class="right">     5.2.  Matching Packets to Connections . . . . . . . . . . . . .  25</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">       5.2.1.  Client Packet Handling  . . . . . . . . . . . . . . .  26</td><td> </td><td class="right">       5.2.1.  Client Packet Handling  . . . . . . . . . . . . . . .  26</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">       5.2.2.  Server Packet Handling  . . . . . . . . . . . . . . .  26</td><td> </td><td class="right">       5.2.2.  Server Packet Handling  . . . . . . . . . . . . . . .  26</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     5.3.  Life of a QUIC Connection . . . . . . . . . . . . . . . .  27</td><td> </td><td class="right">     5.3.  Life of a QUIC Connection . . . . . . . . . . . . . . . .  27</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   6.  Version Negotiation . . . . . . . . . . . . . . . . . . . . .  27</td><td> </td><td class="right">   6.  Version Negotiation . . . . . . . . . . . . . . . . . . . . .  27</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     6.1.  Sending Version Negotiation Packets . . . . . . . . . . .  28</td><td> </td><td class="right">     6.1.  Sending Version Negotiation Packets . . . . . . . . . . .  28</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     6.2.  Handling Version Negotiation Packets  . . . . . . . . . .  28</td><td> </td><td class="right">     6.2.  Handling Version Negotiation Packets  . . . . . . . . . .  28</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     6.3.  Using Reserved Versions . . . . . . . . . . . . . . . . .  29</td><td> </td><td class="right">     6.3.  Using Reserved Versions . . . . . . . . . . . . . . . . .  29</td><td class="lineno"></td></tr>
      <tr id="diff0009"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   7.  Cryptographic and Transport Handshake . . . . . . . . . . . .  <span class="delete">29</span></td><td> </td><td class="rblock">   7.  Cryptographic and Transport Handshake . . . . . . . . . . . .  <span class="insert">30</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     7.1.  Example Handshake Flows . . . . . . . . . . . . . . . . .  <span class="delete">30</span></td><td> </td><td class="rblock">     7.1.  Example Handshake Flows . . . . . . . . . . . . . . . . .  <span class="insert">31</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     7.2.  Negotiating Connection IDs  . . . . . . . . . . . . . . .  32</td><td> </td><td class="right">     7.2.  Negotiating Connection IDs  . . . . . . . . . . . . . . .  32</td><td class="lineno"></td></tr>
      <tr id="diff0010"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     7.3.  Transport Parameters  . . . . . . . . . . . . . . . . . .  3<span class="delete">3</span></td><td> </td><td class="rblock">     7.3.  Transport Parameters  . . . . . . . . . . . . . . . . . .  3<span class="insert">4</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">       7.3.1.  Values of Transport Parameters for 0-RTT  . . . . . .  34</td><td> </td><td class="right">       7.3.1.  Values of Transport Parameters for 0-RTT  . . . . . .  34</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">       7.3.2.  New Transport Parameters  . . . . . . . . . . . . . .  35</td><td> </td><td class="right">       7.3.2.  New Transport Parameters  . . . . . . . . . . . . . .  35</td><td class="lineno"></td></tr>
      <tr id="diff0011"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">       7.3.3.  Version Negotiation Validation  . . . . . . . . . . .  3<span class="delete">5</span></td><td> </td><td class="rblock">       7.3.3.  Version Negotiation Validation  . . . . . . . . . . .  3<span class="insert">6</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   8.  Address Validation  . . . . . . . . . . . . . . . . . . . . .  37</td><td> </td><td class="right">   8.  Address Validation  . . . . . . . . . . . . . . . . . . . . .  37</td><td class="lineno"></td></tr>
      <tr id="diff0012"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     8.1.  Address Validation During Connection Establishment  . . .  3<span class="delete">7</span></td><td> </td><td class="rblock">     8.1.  Address Validation During Connection Establishment  . . .  3<span class="insert">8</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">       8.1.1.  Address Validation using Retry Packets  . . . . . . .  38</td><td> </td><td class="right">       8.1.1.  Address Validation using Retry Packets  . . . . . . .  38</td><td class="lineno"></td></tr>
      <tr id="diff0013"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">       8.1.2.  Address Validation for Future Connections . . . . . .  <span class="delete">38</span></td><td> </td><td class="rblock">       8.1.2.  Address Validation for Future Connections . . . . . .  <span class="insert">39</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">       8.1.3.  Address Validation Token Integrity  . . . . . . . . .  <span class="delete">40</span></td><td> </td><td class="rblock">       8.1.3.  Address Validation Token Integrity  . . . . . . . . .  <span class="insert">41</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     8.2.  Path Validation . . . . . . . . . . . . . . . . . . . . .  41</td><td> </td><td class="right">     8.2.  Path Validation . . . . . . . . . . . . . . . . . . . . .  41</td><td class="lineno"></td></tr>
      <tr id="diff0014"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     8.3.  Initiating Path Validation  . . . . . . . . . . . . . . .  4<span class="delete">1</span></td><td> </td><td class="rblock">     8.3.  Initiating Path Validation  . . . . . . . . . . . . . . .  4<span class="insert">2</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     8.4.  Path Validation Responses . . . . . . . . . . . . . . . .  42</td><td> </td><td class="right">     8.4.  Path Validation Responses . . . . . . . . . . . . . . . .  42</td><td class="lineno"></td></tr>
      <tr id="diff0015"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     8.5.  Successful Path Validation  . . . . . . . . . . . . . . .  4<span class="delete">2</span></td><td> </td><td class="rblock">     8.5.  Successful Path Validation  . . . . . . . . . . . . . . .  4<span class="insert">3</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     8.6.  Failed Path Validation  . . . . . . . . . . . . . . . . .  43</td><td> </td><td class="right">     8.6.  Failed Path Validation  . . . . . . . . . . . . . . . . .  43</td><td class="lineno"></td></tr>
      <tr id="diff0016"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   9.  Connection Migration  . . . . . . . . . . . . . . . . . . . .  <span class="delete">43</span></td><td> </td><td class="rblock">   9.  Connection Migration  . . . . . . . . . . . . . . . . . . . .  <span class="insert">44</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     9.1.  Probing a New Path  . . . . . . . . . . . . . . . . . . .  <span class="delete">44</span></td><td> </td><td class="rblock">     9.1.  Probing a New Path  . . . . . . . . . . . . . . . . . . .  <span class="insert">45</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     9.2.  Initiating Connection Migration . . . . . . . . . . . . .  <span class="delete">44</span></td><td> </td><td class="rblock">     9.2.  Initiating Connection Migration . . . . . . . . . . . . .  <span class="insert">45</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     9.3.  Responding to Connection Migration  . . . . . . . . . . .  <span class="delete">45</span></td><td> </td><td class="rblock">     9.3.  Responding to Connection Migration  . . . . . . . . . . .  <span class="insert">46</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">       9.3.1.  Peer Address Spoofing . . . . . . . . . . . . . . . .  <span class="delete">45</span></td><td> </td><td class="rblock">       9.3.1.  Peer Address Spoofing . . . . . . . . . . . . . . . .  <span class="insert">46</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">       9.3.2.  On-Path Address Spoofing  . . . . . . . . . . . . . .  <span class="delete">46</span></td><td> </td><td class="rblock">       9.3.2.  On-Path Address Spoofing  . . . . . . . . . . . . . .  <span class="insert">47</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">       9.3.3.  Off-Path Packet Forwarding  . . . . . . . . . . . . .  47</td><td> </td><td class="right">       9.3.3.  Off-Path Packet Forwarding  . . . . . . . . . . . . .  47</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     9.4.  Loss Detection and Congestion Control . . . . . . . . . .  48</td><td> </td><td class="right">     9.4.  Loss Detection and Congestion Control . . . . . . . . . .  48</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     9.5.  Privacy Implications of Connection Migration  . . . . . .  49</td><td> </td><td class="right">     9.5.  Privacy Implications of Connection Migration  . . . . . .  49</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     9.6.  Server's Preferred Address  . . . . . . . . . . . . . . .  50</td><td> </td><td class="right">     9.6.  Server's Preferred Address  . . . . . . . . . . . . . . .  50</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">       9.6.1.  Communicating A Preferred Address . . . . . . . . . .  50</td><td> </td><td class="right">       9.6.1.  Communicating A Preferred Address . . . . . . . . . .  50</td><td class="lineno"></td></tr>
      <tr id="diff0017"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">       9.6.2.  Responding to Connection Migration  . . . . . . . . .  5<span class="delete">0</span></td><td> </td><td class="rblock">       9.6.2.  Responding to Connection Migration  . . . . . . . . .  5<span class="insert">1</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">       9.6.3.  Interaction of Client Migration and Preferred Address  51</td><td> </td><td class="right">       9.6.3.  Interaction of Client Migration and Preferred Address  51</td><td class="lineno"></td></tr>
      <tr id="diff0018"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   10. Connection Termination  . . . . . . . . . . . . . . . . . . .  <span class="delete">51</span></td><td> </td><td class="rblock">   10. Connection Termination  . . . . . . . . . . . . . . . . . . .  <span class="insert">52</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     10.1.  Closing and Draining Connection States . . . . . . . . .  <span class="delete">51</span></td><td> </td><td class="rblock">     10.1.  Closing and Draining Connection States . . . . . . . . .  <span class="insert">52</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     10.2.  Idle Timeout . . . . . . . . . . . . . . . . . . . . . .  53</td><td> </td><td class="right">     10.2.  Idle Timeout . . . . . . . . . . . . . . . . . . . . . .  53</td><td class="lineno"></td></tr>
      <tr id="diff0019"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     10.3.  Immediate Close  . . . . . . . . . . . . . . . . . . . .  5<span class="delete">3</span></td><td> </td><td class="rblock">     10.3.  Immediate Close  . . . . . . . . . . . . . . . . . . . .  5<span class="insert">4</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     10.4.  Stateless Reset  . . . . . . . . . . . . . . . . . . . .  55</td><td> </td><td class="right">     10.4.  Stateless Reset  . . . . . . . . . . . . . . . . . . . .  55</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">       10.4.1.  Detecting a Stateless Reset  . . . . . . . . . . . .  57</td><td> </td><td class="right">       10.4.1.  Detecting a Stateless Reset  . . . . . . . . . . . .  57</td><td class="lineno"></td></tr>
      <tr id="diff0020"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">       10.4.2.  Calculating a Stateless Reset Token  . . . . . . . .  <span class="delete">57</span></td><td> </td><td class="rblock">       10.4.2.  Calculating a Stateless Reset Token  . . . . . . . .  <span class="insert">58</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">       10.4.3.  Looping  . . . . . . . . . . . . . . . . . . . . . .  <span class="delete">58</span></td><td> </td><td class="rblock">       10.4.3.  Looping  . . . . . . . . . . . . . . . . . . . . . .  <span class="insert">59</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   11. Error Handling  . . . . . . . . . . . . . . . . . . . . . . .  59</td><td> </td><td class="right">   11. Error Handling  . . . . . . . . . . . . . . . . . . . . . . .  59</td><td class="lineno"></td></tr>
      <tr id="diff0021"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     11.1.  Connection Errors  . . . . . . . . . . . . . . . . . . .  <span class="delete">59</span></td><td> </td><td class="rblock">     11.1.  Connection Errors  . . . . . . . . . . . . . . . . . . .  <span class="insert">60</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     11.2.  Stream Errors  . . . . . . . . . . . . . . . . . . . . .  60</td><td> </td><td class="right">     11.2.  Stream Errors  . . . . . . . . . . . . . . . . . . . . .  60</td><td class="lineno"></td></tr>
      <tr id="diff0022"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   12. Packets and Frames  . . . . . . . . . . . . . . . . . . . . .  <span class="delete">60</span></td><td> </td><td class="rblock">   12. Packets and Frames  . . . . . . . . . . . . . . . . . . . . .  <span class="insert">61</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     12.1.  Protected Packets  . . . . . . . . . . . . . . . . . . .  <span class="delete">60</span></td><td> </td><td class="rblock">     12.1.  Protected Packets  . . . . . . . . . . . . . . . . . . .  <span class="insert">61</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     12.2.  Coalescing Packets . . . . . . . . . . . . . . . . . . .  <span class="delete">61</span></td><td> </td><td class="rblock">     12.2.  Coalescing Packets . . . . . . . . . . . . . . . . . . .  <span class="insert">62</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     12.3.  Packet Numbers . . . . . . . . . . . . . . . . . . . . .  62</td><td> </td><td class="right">     12.3.  Packet Numbers . . . . . . . . . . . . . . . . . . . . .  62</td><td class="lineno"></td></tr>
      <tr id="diff0023"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     12.4.  Frames and Frame Types . . . . . . . . . . . . . . . . .  6<span class="delete">3</span></td><td> </td><td class="rblock">     12.4.  Frames and Frame Types . . . . . . . . . . . . . . . . .  6<span class="insert">4</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   13. Packetization and Reliability . . . . . . . . . . . . . . . .  66</td><td> </td><td class="right">   13. Packetization and Reliability . . . . . . . . . . . . . . . .  66</td><td class="lineno"></td></tr>
      <tr id="diff0024"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     13.1.  Packet Processing and Acknowledgment . . . . . . . . . .  6<span class="delete">6</span></td><td> </td><td class="rblock">     13.1.  Packet Processing and Acknowledgment . . . . . . . . . .  6<span class="insert">7</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">       13.1.1.  Sending ACK Frames . . . . . . . . . . . . . . . . .  67</td><td> </td><td class="right">       13.1.1.  Sending ACK Frames . . . . . . . . . . . . . . . . .  67</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">       13.1.2.  ACK Frames and Packet Protection . . . . . . . . . .  68</td><td> </td><td class="right">       13.1.2.  ACK Frames and Packet Protection . . . . . . . . . .  68</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     13.2.  Retransmission of Information  . . . . . . . . . . . . .  68</td><td> </td><td class="right">     13.2.  Retransmission of Information  . . . . . . . . . . . . .  68</td><td class="lineno"></td></tr>
      <tr id="diff0025"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     13.3.  Explicit Congestion Notification . . . . . . . . . . . .  7<span class="delete">0</span></td><td> </td><td class="rblock">     13.3.  Explicit Congestion Notification . . . . . . . . . . . .  7<span class="insert">1</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">       13.3.1.  ECN Counts . . . . . . . . . . . . . . . . . . . . .  71</td><td> </td><td class="right">       13.3.1.  ECN Counts . . . . . . . . . . . . . . . . . . . . .  71</td><td class="lineno"></td></tr>
      <tr id="diff0026"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">       13.3.2.  ECN Verification . . . . . . . . . . . . . . . . . .  7<span class="delete">1</span></td><td> </td><td class="rblock">       13.3.2.  ECN Verification . . . . . . . . . . . . . . . . . .  7<span class="insert">2</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   14. Packet Size . . . . . . . . . . . . . . . . . . . . . . . . .  73</td><td> </td><td class="right">   14. Packet Size . . . . . . . . . . . . . . . . . . . . . . . . .  73</td><td class="lineno"></td></tr>
      <tr id="diff0027"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     14.1.  Path Maximum Transmission Unit (PMTU)  . . . . . . . . .  <span class="delete">73</span></td><td> </td><td class="rblock">     14.1.  Path Maximum Transmission Unit (PMTU)  . . . . . . . . .  <span class="insert">74</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     14.2.  ICMP Packet Too Big Messages . . . . . . . . . . . . . .  <span class="delete">74</span></td><td> </td><td class="rblock">     14.2.  ICMP Packet Too Big Messages . . . . . . . . . . . . . .  <span class="insert">75</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     14.3.  Datagram Packetization Layer PMTU Discovery  . . . . . .  <span class="delete">75</span></td><td> </td><td class="rblock">     14.3.  Datagram Packetization Layer PMTU Discovery  . . . . . .  <span class="insert">76</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   15. Versions  . . . . . . . . . . . . . . . . . . . . . . . . . .  76</td><td> </td><td class="right">   15. Versions  . . . . . . . . . . . . . . . . . . . . . . . . . .  76</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   16. Variable-Length Integer Encoding  . . . . . . . . . . . . . .  77</td><td> </td><td class="right">   16. Variable-Length Integer Encoding  . . . . . . . . . . . . . .  77</td><td class="lineno"></td></tr>
      <tr id="diff0028"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   17. Packet Formats  . . . . . . . . . . . . . . . . . . . . . . .  7<span class="delete">7</span></td><td> </td><td class="rblock">   17. Packet Formats  . . . . . . . . . . . . . . . . . . . . . . .  7<span class="insert">8</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     17.1.  Packet Number Encoding and Decoding  . . . . . . . . . .  78</td><td> </td><td class="right">     17.1.  Packet Number Encoding and Decoding  . . . . . . . . . .  78</td><td class="lineno"></td></tr>
      <tr id="diff0029"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     17.2.  Long Header <span class="delete">Packet .</span> . . . . . . . . . . . . . . . . . .  79</td><td> </td><td class="rblock">     17.2.  Long Header <span class="insert">Packets</span>  . . . . . . . . . . . . . . . . . .  79</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     <span class="delete">17.3.  Short Header Packet  . . . . . . . . . . . . . . . . . .  81</span></td><td> </td><td class="rblock">       <span class="insert">17.2.1.</span>  Version Negotiation Packet . . . . . . . . . . . . .  <span class="insert">82</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">     17.4.</span>  Version Negotiation Packet . . . . . . . . . . . . . <span class="delete">. .  83</span></td><td> </td><td class="rblock"><span class="insert">       17.2.2.</span>  Initial Packet . . . . . . . . . . . . . . . . . . .  <span class="insert">83</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">     17.5.</span>  Initial Packet . . . . . . . . . . . . . . . . . . . <span class="delete">. .  84</span></td><td> </td><td class="rblock"><span class="insert">       17.2.3.  0-RTT</span>  . . . . . . . . . . . . . . . . . . . . . . .  86</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">       17.5.1.  Abandoning Initial Packets . . .</span> . . . . . . . . . .  <span class="delete">86</span></td><td> </td><td class="rblock">       <span class="insert">17.2.4.  Handshake</span> Packet . . . . . . . . . . . . . . . . . .  <span class="insert">87</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">       17.5.2.  Starting Packet Numbers  .</span> . . . . . . . . . . . . .  86</td><td> </td><td class="rblock"><span class="insert">       17.2.5.  Retry Packet</span> . . . . . . . . . . . . . . . . . . . .  <span class="insert">88</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">       <span class="delete">17.5.3.  0-RTT</span> Packet <span class="delete">Numbers</span> . . . . . . . . . . . . . . . .  <span class="delete">86</span></td><td> </td><td class="rblock"><span class="insert">     17.3.  Short Header Packets</span> . . . . . . . . . . . . . . . . . .  <span class="insert">90</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">     17.6.  Handshake Packet . .</span> . . . . . . . . . . . . . . . . . .  <span class="delete">87</span></td><td> </td><td class="rblock">   18. Transport Parameter Encoding  . . . . . . . . . . . . . . . .  <span class="insert">92</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">     17.7.  Retry Packet</span> . . . . . . . . . . . . . . . . . . . . . .  <span class="delete">88</span></td><td> </td><td class="rblock">     18.1.  Transport Parameter Definitions  . . . . . . . . . . . .  <span class="insert">94</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   18. Transport Parameter Encoding  . . . . . . . . . . . . . . . .  <span class="delete">90</span></td><td> </td><td class="rblock">   19. Frame Types and Formats . . . . . . . . . . . . . . . . . . .  <span class="insert">97</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     18.1.  Transport Parameter Definitions  . . . . . . . . . . . .  <span class="delete">92</span></td><td> </td><td class="rblock">     19.1.  PADDING Frame  . . . . . . . . . . . . . . . . . . . . .  <span class="insert">97</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   19. Frame Types and Formats . . . . . . . . . . . . . . . . . . .  <span class="delete">94</span></td><td> </td><td class="rblock">     19.2.  PING Frame . . . . . . . . . . . . . . . . . . . . . . .  <span class="insert">97</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     19.1.  PADDING Frame  . . . . . . . . . . . . . . . . . . . . .  <span class="delete">95</span></td><td> </td><td class="rblock">     19.3.  ACK Frames . . . . . . . . . . . . . . . . . . . . . . .  <span class="insert">97</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     19.2.  PING Frame . . . . . . . . . . . . . . . . . . . . . . .  <span class="delete">95</span></td><td> </td><td class="rblock">       19.3.1.  ACK <span class="insert">Ranges</span> . . . . . . . . . . . . . . . . . <span class="insert">. . . .  99</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     19.3.  ACK Frames . . . . . . . . . . . . . . . . . . . . . . .  <span class="delete">95</span></td><td> </td><td class="rblock">       19.3.2.  ECN <span class="insert">Counts</span> . . . . . . . . . . . . . . . . . . . . <span class="insert">. 101</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">       19.3.1.  ACK <span class="delete">Block Section</span>  . . . . . . . . . . . . . . . . .  <span class="delete">97</span></td><td> </td><td class="rblock">     19.4.  RESET_STREAM Frame . . . . . . . . . . . . . . . . . . . <span class="insert">102</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">       19.3.2.  ECN <span class="delete">section</span>  . . . . . . . . . . . . . . . . . . . .  <span class="delete">99</span></td><td> </td><td class="rblock">     19.5.  STOP_SENDING Frame . . . . . . . . . . . . . . . . . . . <span class="insert">102</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     19.4.  RESET_STREAM Frame . . . . . . . . . . . . . . . . . . . <span class="delete">100</span></td><td> </td><td class="rblock">     19.6.  CRYPTO Frame . . . . . . . . . . . . . . . . . . . . . . <span class="insert">103</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     19.5.  STOP_SENDING Frame . . . . . . . . . . . . . . . . . . . <span class="delete">100</span></td><td> </td><td class="rblock">     19.7.  NEW_TOKEN Frame  . . . . . . . . . . . . . . . . . . . . <span class="insert">104</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     19.6.  CRYPTO Frame . . . . . . . . . . . . . . . . . . . . . . <span class="delete">101</span></td><td> </td><td class="rblock">     19.8.  STREAM Frames  . . . . . . . . . . . . . . . . . . . . . <span class="insert">104</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     19.7.  NEW_TOKEN Frame  . . . . . . . . . . . . . . . . . . . . <span class="delete">102</span></td><td> </td><td class="rblock">     19.9.  MAX_DATA Frame . . . . . . . . . . . . . . . . . . . . . <span class="insert">106</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     19.8.  STREAM Frames  . . . . . . . . . . . . . . . . . . . . . <span class="delete">102</span></td><td> </td><td class="rblock">     19.10. MAX_STREAM_DATA Frame  . . . . . . . . . . . . . . . . . <span class="insert">106</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     19.9.  MAX_DATA Frame . . . . . . . . . . . . . . . . . . . . . <span class="delete">104</span></td><td> </td><td class="rblock">     19.11. MAX_STREAMS Frames . . . . . . . . . . . . . . . . . . . <span class="insert">107</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     19.10. MAX_STREAM_DATA Frame  . . . . . . . . . . . . . . . . . <span class="delete">104</span></td><td> </td><td class="rblock">     19.12. DATA_BLOCKED Frame . . . . . . . . . . . . . . . . . . . <span class="insert">108</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     19.11. MAX_STREAMS Frames . . . . . . . . . . . . . . . . . . . <span class="delete">105</span></td><td> </td><td class="rblock">     19.13. STREAM_DATA_BLOCKED Frame  . . . . . . . . . . . . . . . <span class="insert">109</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     19.12. DATA_BLOCKED Frame . . . . . . . . . . . . . . . . . . . <span class="delete">106</span></td><td> </td><td class="rblock">     19.14. STREAMS_BLOCKED Frames . . . . . . . . . . . . . . . . . <span class="insert">109</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     19.13. STREAM_DATA_BLOCKED Frame  . . . . . . . . . . . . . . . <span class="delete">107</span></td><td> </td><td class="rblock">     19.15. NEW_CONNECTION_ID Frame  . . . . . . . . . . . . . . . . <span class="insert">110</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     19.14. STREAMS_BLOCKED Frames . . . . . . . . . . . . . . . . . <span class="delete">107</span></td><td> </td><td class="rblock">     19.16. RETIRE_CONNECTION_ID Frame . . . . . . . . . . . . . . . <span class="insert">111</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     19.15. NEW_CONNECTION_ID Frame  . . . . . . . . . . . . . . . . <span class="delete">108</span></td><td> </td><td class="rblock">     19.17. PATH_CHALLENGE Frame . . . . . . . . . . . . . . . . . . <span class="insert">112</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     19.16. RETIRE_CONNECTION_ID Frame . . . . . . . . . . . . . . . <span class="delete">109</span></td><td> </td><td class="rblock">     19.18. PATH_RESPONSE Frame  . . . . . . . . . . . . . . . . . . <span class="insert">112</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     19.17. PATH_CHALLENGE Frame . . . . . . . . . . . . . . . . . . <span class="delete">110</span></td><td> </td><td class="rblock">     19.19. CONNECTION_CLOSE Frames  . . . . . . . . . . . . . . . . <span class="insert">113</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     19.18. PATH_RESPONSE Frame  . . . . . . . . . . . . . . . . . . <span class="delete">110</span></td><td> </td><td class="rblock">     19.20. Extension Frames . . . . . . . . . . . . . . . . . . . . <span class="insert">114</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     19.19. CONNECTION_CLOSE Frames  . . . . . . . . . . . . . . . . <span class="delete">111</span></td><td> </td><td class="rblock">   20. Transport Error Codes . . . . . . . . . . . . . . . . . . . . <span class="insert">114</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     19.20. Extension Frames . . . . . . . . . . . . . . . . . . . . <span class="delete">112</span></td><td> </td><td class="rblock">     20.1.  Application Protocol Error Codes . . . . . . . . . . . . <span class="insert">115</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   20. Transport Error Codes . . . . . . . . . . . . . . . . . . . . <span class="delete">112</span></td><td> </td><td class="rblock">   21. Security Considerations . . . . . . . . . . . . . . . . . . . <span class="insert">116</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     20.1.  Application Protocol Error Codes . . . . . . . . . . . . <span class="delete">113</span></td><td> </td><td class="rblock">     21.1.  Handshake Denial of Service  . . . . . . . . . . . . . . <span class="insert">116</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   21. Security Considerations . . . . . . . . . . . . . . . . . . . <span class="delete">114</span></td><td> </td><td class="rblock">     21.2.  Amplification Attack . . . . . . . . . . . . . . . . . . <span class="insert">117</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     21.1.  Handshake Denial of Service  . . . . . . . . . . . . . . <span class="delete">114</span></td><td> </td><td class="rblock">     21.3.  Optimistic ACK Attack  . . . . . . . . . . . . . . . . . <span class="insert">117</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     21.2.  Amplification Attack . . . . . . . . . . . . . . . . . . <span class="delete">115</span></td><td> </td><td class="rblock">     21.4.  Slowloris Attacks  . . . . . . . . . . . . . . . . . . . <span class="insert">117</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     21.3.  Optimistic ACK Attack  . . . . . . . . . . . . . . . . . <span class="delete">115</span></td><td> </td><td class="rblock">     21.5.  Stream Fragmentation and Reassembly Attacks  . . . . . . <span class="insert">118</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     21.4.  Slowloris Attacks  . . . . . . . . . . . . . . . . . . . <span class="delete">115</span></td><td> </td><td class="rblock">     21.6.  Stream Commitment Attack . . . . . . . . . . . . . . . . <span class="insert">118</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     21.5.  Stream Fragmentation and Reassembly Attacks  . . . . . . <span class="delete">116</span></td><td> </td><td class="rblock">     21.7.  Explicit Congestion Notification Attacks . . . . . . . . <span class="insert">119</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     21.6.  Stream Commitment Attack . . . . . . . . . . . . . . . . <span class="delete">116</span></td><td> </td><td class="rblock">     21.8.  Stateless Reset Oracle . . . . . . . . . . . . . . . . . <span class="insert">119</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     21.7.  Explicit Congestion Notification Attacks . . . . . . . . <span class="delete">117</span></td><td> </td><td class="rblock">   22. IANA Considerations . . . . . . . . . . . . . . . . . . . . . <span class="insert">119</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     21.8.  Stateless Reset Oracle . . . . . . . . . . . . . . . . . <span class="delete">117</span></td><td> </td><td class="rblock">     22.1.  QUIC Transport Parameter Registry  . . . . . . . . . . . <span class="insert">119</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   22. IANA Considerations . . . . . . . . . . . . . . . . . . . . . <span class="delete">117</span></td><td> </td><td class="rblock">     22.2.  QUIC Frame Type Registry . . . . . . . . . . . . . . . . <span class="insert">121</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     22.1.  QUIC Transport Parameter Registry  . . . . . . . . . . . <span class="delete">117</span></td><td> </td><td class="rblock">     22.3.  QUIC Transport Error Codes Registry  . . . . . . . . . . <span class="insert">122</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     22.2.  QUIC Frame Type Registry . . . . . . . . . . . . . . . . <span class="delete">119</span></td><td> </td><td class="rblock">   23. References  . . . . . . . . . . . . . . . . . . . . . . . . . <span class="insert">125</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     22.3.  QUIC Transport Error Codes Registry  . . . . . . . . . . <span class="delete">120</span></td><td> </td><td class="rblock">     23.1.  Normative References . . . . . . . . . . . . . . . . . . <span class="insert">125</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   23. References  . . . . . . . . . . . . . . . . . . . . . . . . . <span class="delete">123</span></td><td> </td><td class="rblock">     23.2.  Informative References . . . . . . . . . . . . . . . . . <span class="insert">126</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     23.1.  Normative References . . . . . . . . . . . . . . . . . . <span class="delete">123</span></td><td> </td><td class="rblock">   Appendix A.  Sample Packet Number Decoding Algorithm  . . . . . . <span class="insert">128</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     23.2.  Informative References . . . . . . . . . . . . . . . . . <span class="delete">124</span></td><td> </td><td class="rblock">   Appendix B.  Change Log . . . . . . . . . . . . . . . . . . . . . <span class="insert">128</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Appendix A.  Sample Packet Number Decoding Algorithm  . . . . . . <span class="delete">126</span></td><td> </td><td class="rblock">     B.1.  Since <span class="insert">draft-ietf-quic-transport-17</span>  . . . . . . . . . . . <span class="insert">128</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Appendix B.  Change Log . . . . . . . . . . . . . . . . . . . . . <span class="delete">126</span></td><td> </td><td class="rblock">     B.2.  Since <span class="insert">draft-ietf-quic-transport-16</span>  . . . . . . . . . . . <span class="insert">129</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     B.1.  Since <span class="delete">draft-ietf-quic-transport-16</span>  . . . . . . . . . . . <span class="delete">126</span></td><td> </td><td class="rblock">     B.3.  Since <span class="insert">draft-ietf-quic-transport-15</span>  . . . . . . . . . . . <span class="insert">130</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     B.2.  Since <span class="delete">draft-ietf-quic-transport-15</span>  . . . . . . . . . . . <span class="delete">128</span></td><td> </td><td class="rblock">     B.4.  Since <span class="insert">draft-ietf-quic-transport-14</span>  . . . . . . . . . . . <span class="insert">130</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     B.3.  Since <span class="delete">draft-ietf-quic-transport-14</span>  . . . . . . . . . . . <span class="delete">128</span></td><td> </td><td class="rblock">     B.5.  Since <span class="insert">draft-ietf-quic-transport-13</span>  . . . . . . . . . . . <span class="insert">131</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     B.4.  Since <span class="delete">draft-ietf-quic-transport-13</span>  . . . . . . . . . . . <span class="delete">128</span></td><td> </td><td class="rblock">     B.6.  Since <span class="insert">draft-ietf-quic-transport-12</span>  . . . . . . . . . . . <span class="insert">132</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     B.5.  Since <span class="delete">draft-ietf-quic-transport-12</span>  . . . . . . . . . . . <span class="delete">129</span></td><td> </td><td class="rblock">     B.7.  Since <span class="insert">draft-ietf-quic-transport-11</span>  . . . . . . . . . . . <span class="insert">133</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     B.6.  Since <span class="delete">draft-ietf-quic-transport-11</span>  . . . . . . . . . . . <span class="delete">130</span></td><td> </td><td class="rblock">     B.8.  Since <span class="insert">draft-ietf-quic-transport-10</span>  . . . . . . . . . . . <span class="insert">133</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     B.7.  Since <span class="delete">draft-ietf-quic-transport-10</span>  . . . . . . . . . . . <span class="delete">130</span></td><td> </td><td class="rblock">     B.9.  Since <span class="insert">draft-ietf-quic-transport-09</span>  . . . . . . . . . . . <span class="insert">134</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     B.8.  Since <span class="delete">draft-ietf-quic-transport-09</span>  . . . . . . . . . . . <span class="delete">131</span></td><td> </td><td class="rblock">     B.10. Since <span class="insert">draft-ietf-quic-transport-08</span>  . . . . . . . . . . . <span class="insert">134</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     B.9.  Since <span class="delete">draft-ietf-quic-transport-08</span>  . . . . . . . . . . . <span class="delete">131</span></td><td> </td><td class="rblock">     B.11. Since <span class="insert">draft-ietf-quic-transport-07</span>  . . . . . . . . . . . <span class="insert">135</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     B.10. Since <span class="delete">draft-ietf-quic-transport-07</span>  . . . . . . . . . . . <span class="delete">132</span></td><td> </td><td class="rblock">     B.12. Since <span class="insert">draft-ietf-quic-transport-06</span>  . . . . . . . . . . . <span class="insert">136</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     B.11. Since <span class="delete">draft-ietf-quic-transport-06</span>  . . . . . . . . . . . <span class="delete">133</span></td><td> </td><td class="rblock">     B.13. Since <span class="insert">draft-ietf-quic-transport-05</span>  . . . . . . . . . . . <span class="insert">136</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     B.12. Since <span class="delete">draft-ietf-quic-transport-05</span>  . . . . . . . . . . . <span class="delete">133</span></td><td> </td><td class="rblock">     B.14. Since <span class="insert">draft-ietf-quic-transport-04</span>  . . . . . . . . . . . <span class="insert">136</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     B.13. Since <span class="delete">draft-ietf-quic-transport-04</span>  . . . . . . . . . . . <span class="delete">133</span></td><td> </td><td class="rblock">     B.15. Since <span class="insert">draft-ietf-quic-transport-03</span>  . . . . . . . . . . . <span class="insert">137</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     B.14. Since <span class="delete">draft-ietf-quic-transport-03</span>  . . . . . . . . . . . <span class="delete">134</span></td><td> </td><td class="rblock">     B.16. Since <span class="insert">draft-ietf-quic-transport-02</span>  . . . . . . . . . . . <span class="insert">137</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     B.15. Since <span class="delete">draft-ietf-quic-transport-02</span>  . . . . . . . . . . . <span class="delete">134</span></td><td> </td><td class="rblock">     B.17. Since <span class="insert">draft-ietf-quic-transport-01</span>  . . . . . . . . . . . <span class="insert">138</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     B.16. Since <span class="delete">draft-ietf-quic-transport-01</span>  . . . . . . . . . . . <span class="delete">135</span></td><td> </td><td class="rblock">     B.18. Since <span class="insert">draft-ietf-quic-transport-00  . . . . . . . . . . . 140</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     B.17. Since <span class="delete">draft-ietf-quic-transport-00</span>  . . . . . . . . . . . <span class="delete">137</span></td><td> </td><td class="rblock"><span class="insert">     B.19. Since</span> draft-hamilton-quic-transport-protocol-01 . . . . . <span class="insert">140</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     B.18. Since draft-hamilton-quic-transport-protocol-01 . . . . . <span class="delete">137</span></td><td> </td><td class="rblock">   Acknowledgments . . . . . . . . . . . . . . . . . . . . . . . . . <span class="insert">141</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Acknowledgments . . . . . . . . . . . . . . . . . . . . . . . . . <span class="delete">138</span></td><td> </td><td class="rblock">   Contributors  . . . . . . . . . . . . . . . . . . . . . . . . . . <span class="insert">141</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Contributors  . . . . . . . . . . . . . . . . . . . . . . . . . . <span class="delete">138</span></td><td> </td><td class="rblock">   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . . <span class="insert">141</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . . <span class="delete">138</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">1.  Introduction</td><td> </td><td class="right">1.  Introduction</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   QUIC is a multiplexed and secure general-purpose transport protocol</td><td> </td><td class="right">   QUIC is a multiplexed and secure general-purpose transport protocol</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   that provides:</td><td> </td><td class="right">   that provides:</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Stream multiplexing</td><td> </td><td class="right">   o  Stream multiplexing</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Stream and connection-level flow control</td><td> </td><td class="right">   o  Stream and connection-level flow control</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-4" class="change"><td></td><th><small>skipping to change at</small><a href="#part-4"><em> page 11, line 42<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-4"><em> page 11, line 33<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   Note:  These states are largely informative.  This document uses</td><td> </td><td class="right">   Note:  These states are largely informative.  This document uses</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      stream states to describe rules for when and how different types</td><td> </td><td class="right">      stream states to describe rules for when and how different types</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      of frames can be sent and the reactions that are expected when</td><td> </td><td class="right">      of frames can be sent and the reactions that are expected when</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      different types of frames are received.  Though these state</td><td> </td><td class="right">      different types of frames are received.  Though these state</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      machines are intended to be useful in implementing QUIC, these</td><td> </td><td class="right">      machines are intended to be useful in implementing QUIC, these</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      states aren't intended to constrain implementations.  An</td><td> </td><td class="right">      states aren't intended to constrain implementations.  An</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      implementation can define a different state machine as long as its</td><td> </td><td class="right">      implementation can define a different state machine as long as its</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      behavior is consistent with an implementation that implements</td><td> </td><td class="right">      behavior is consistent with an implementation that implements</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      these states.</td><td> </td><td class="right">      these states.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0030"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">3.1.  Send Stream States</td><td> </td><td class="rblock">3.1.  Send<span class="insert">ing</span> Stream States</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Figure 1 shows the states for the part of a stream that sends data to</td><td> </td><td class="right">   Figure 1 shows the states for the part of a stream that sends data to</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   a peer.</td><td> </td><td class="right">   a peer.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">          o</td><td> </td><td class="right">          o</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">          | Create Stream (Sending)</td><td> </td><td class="right">          | Create Stream (Sending)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">          | Peer Creates Bidirectional Stream</td><td> </td><td class="right">          | Peer Creates Bidirectional Stream</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">          v</td><td> </td><td class="right">          v</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      +-------+</td><td> </td><td class="right">      +-------+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      | Ready | Send RESET_STREAM</td><td> </td><td class="right">      | Ready | Send RESET_STREAM</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-5" class="change"><td></td><th><small>skipping to change at</small><a href="#part-5"><em> page 12, line 39<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-5"><em> page 12, line 39<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">      | Sent  |------------------&gt;| Sent  |</td><td> </td><td class="right">      | Sent  |------------------&gt;| Sent  |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      +-------+                   +-------+</td><td> </td><td class="right">      +-------+                   +-------+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">          |                           |</td><td> </td><td class="right">          |                           |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">          | Recv All ACKs             | Recv ACK</td><td> </td><td class="right">          | Recv All ACKs             | Recv ACK</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">          v                           v</td><td> </td><td class="right">          v                           v</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      +-------+                   +-------+</td><td> </td><td class="right">      +-------+                   +-------+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      | Data  |                   | Reset |</td><td> </td><td class="right">      | Data  |                   | Reset |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      | Recvd |                   | Recvd |</td><td> </td><td class="right">      | Recvd |                   | Recvd |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      +-------+                   +-------+</td><td> </td><td class="right">      +-------+                   +-------+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0031"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">               <span class="delete">      Figure 1: States for Send</span> Streams</td><td> </td><td class="rblock">               <span class="insert">Figure 1: States for Sending Parts of</span> Streams</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The sending part of stream that the endpoint initiates (types 0 and 2</td><td> </td><td class="right">   The sending part of stream that the endpoint initiates (types 0 and 2</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   for clients, 1 and 3 for servers) is opened by the application.  The</td><td> </td><td class="right">   for clients, 1 and 3 for servers) is opened by the application.  The</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   "Ready" state represents a newly created stream that is able to</td><td> </td><td class="right">   "Ready" state represents a newly created stream that is able to</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   accept data from the application.  Stream data might be buffered in</td><td> </td><td class="right">   accept data from the application.  Stream data might be buffered in</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   this state in preparation for sending.</td><td> </td><td class="right">   this state in preparation for sending.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0032"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Sending the first STREAM or STREAM_DATA_BLOCKED frame causes a <span class="delete">send</span></td><td> </td><td class="rblock">   Sending the first STREAM or STREAM_DATA_BLOCKED frame causes a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   stream to enter the "Send" state.  An implementation might choose to</td><td> </td><td class="rblock">   <span class="insert">sending part of a</span> stream to enter the "Send" state.  An</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   defer allocating a stream ID to a <span class="delete">send</span> stream until it sends the</td><td> </td><td class="rblock">   implementation might choose to defer allocating a stream ID to a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   first frame and enters this state, which can allow for better stream</td><td> </td><td class="rblock">   stream until it sends the first frame and enters this state, which</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   prioritization.</td><td> </td><td class="rblock">   can allow for better stream prioritization.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The sending part of a bidirectional stream initiated by a peer (type</td><td> </td><td class="right">   The sending part of a bidirectional stream initiated by a peer (type</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   0 for a server, type 1 for a client) enters the "Ready" state then</td><td> </td><td class="right">   0 for a server, type 1 for a client) enters the "Ready" state then</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   immediately transitions to the "Send" state if the receiving part</td><td> </td><td class="right">   immediately transitions to the "Send" state if the receiving part</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   enters the "Recv" state (Section 3.2).</td><td> </td><td class="right">   enters the "Recv" state (Section 3.2).</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   In the "Send" state, an endpoint transmits - and retransmits as</td><td> </td><td class="right">   In the "Send" state, an endpoint transmits - and retransmits as</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   necessary - stream data in STREAM frames.  The endpoint respects the</td><td> </td><td class="right">   necessary - stream data in STREAM frames.  The endpoint respects the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   flow control limits set by its peer, and continues to accept and</td><td> </td><td class="right">   flow control limits set by its peer, and continues to accept and</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   process MAX_STREAM_DATA frames.  An endpoint in the "Send" state</td><td> </td><td class="right">   process MAX_STREAM_DATA frames.  An endpoint in the "Send" state</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   generates STREAM_DATA_BLOCKED frames if it is blocked from sending by</td><td> </td><td class="right">   generates STREAM_DATA_BLOCKED frames if it is blocked from sending by</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   stream or connection flow control limits Section 4.1.</td><td> </td><td class="right">   stream or connection flow control limits Section 4.1.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   After the application indicates that all stream data has been sent</td><td> </td><td class="right">   After the application indicates that all stream data has been sent</td><td class="lineno"></td></tr>
      <tr id="diff0033"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   and a STREAM frame containing the FIN bit is sent, the <span class="delete">send</span> stream</td><td> </td><td class="rblock">   and a STREAM frame containing the FIN bit is sent, the <span class="insert">sending part</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   enters the "Data Sent" state.  From this state, the endpoint only</td><td> </td><td class="rblock"><span class="insert">   of the</span> stream enters the "Data Sent" state.  From this state, the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   retransmits stream data as necessary.  The endpoint does not need to</td><td> </td><td class="rblock">   endpoint only retransmits stream data as necessary.  The endpoint</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   check flow control limits or send STREAM_DATA_BLOCKED frames for a</td><td> </td><td class="rblock">   does not need to check flow control limits or send</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">send</span> stream in this state.  MAX_STREAM_DATA frames might be received</td><td> </td><td class="rblock">   STREAM_DATA_BLOCKED frames for a stream in this state.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   until the peer receives the final stream offset.  The endpoint can</td><td> </td><td class="rblock">   MAX_STREAM_DATA frames might be received until the peer receives the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   safely ignore any MAX_STREAM_DATA frames it receives from its peer</td><td> </td><td class="rblock">   final stream offset.  The endpoint can safely ignore any</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   for a stream in this state.</td><td> </td><td class="rblock">   MAX_STREAM_DATA frames it receives from its peer for a stream in this</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   state.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0034"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Once all stream data has been successfully acknowledged, the <span class="delete">send</span></td><td> </td><td class="rblock">   Once all stream data has been successfully acknowledged, the <span class="insert">sending</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   stream enters the "Data Recvd" state, which is a terminal state.</td><td> </td><td class="rblock"><span class="insert">   part of the</span> stream enters the "Data Recvd" state, which is a terminal</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   state.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   From any of the "Ready", "Send", or "Data Sent" states, an</td><td> </td><td class="right">   From any of the "Ready", "Send", or "Data Sent" states, an</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   application can signal that it wishes to abandon transmission of</td><td> </td><td class="right">   application can signal that it wishes to abandon transmission of</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   stream data.  Alternatively, an endpoint might receive a STOP_SENDING</td><td> </td><td class="right">   stream data.  Alternatively, an endpoint might receive a STOP_SENDING</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   frame from its peer.  In either case, the endpoint sends a</td><td> </td><td class="right">   frame from its peer.  In either case, the endpoint sends a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   RESET_STREAM frame, which causes the stream to enter the "Reset Sent"</td><td> </td><td class="right">   RESET_STREAM frame, which causes the stream to enter the "Reset Sent"</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   state.</td><td> </td><td class="right">   state.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0035"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   An endpoint MAY send a RESET_STREAM as the first frame <span class="delete">on</span> a <span class="delete">send</span></td><td> </td><td class="rblock">   An endpoint MAY send a RESET_STREAM as the first frame <span class="insert">that mentions</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   stream; this causes the <span class="delete">send</span> stream to open and then immediately</td><td> </td><td class="rblock">   a stream; this causes the <span class="insert">sending part of that</span> stream to open and</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   transition to the "Reset Sent" state.</td><td> </td><td class="rblock">   then immediately transition to the "Reset Sent" state.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Once a packet containing a RESET_STREAM has been acknowledged, the</td><td> </td><td class="right">   Once a packet containing a RESET_STREAM has been acknowledged, the</td><td class="lineno"></td></tr>
      <tr id="diff0036"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">send</span> stream enters the "Reset Recvd" state, which is a terminal</td><td> </td><td class="rblock">   <span class="insert">sending part of the</span> stream enters the "Reset Recvd" state, which is a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   state.</td><td> </td><td class="rblock">   terminal state.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0037"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">3.2.  Receiv<span class="delete">e</span> Stream States</td><td> </td><td class="rblock">3.2.  Receiv<span class="insert">ing</span> Stream States</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Figure 2 shows the states for the part of a stream that receives data</td><td> </td><td class="right">   Figure 2 shows the states for the part of a stream that receives data</td><td class="lineno"></td></tr>
      <tr id="diff0038"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   from a peer.  The states for a <span class="delete">receive</span> stream mirror only some of the</td><td> </td><td class="rblock">   from a peer.  The states for a <span class="insert">receiving part of a</span> stream mirror only</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   states of the <span class="delete">send</span> stream at the peer.  <span class="delete">A receive</span> stream does not</td><td> </td><td class="rblock">   some of the states of the <span class="insert">sending part of the</span> stream at the peer.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   track states on the <span class="delete">send stream</span> that cannot be observed, such as the</td><td> </td><td class="rblock">   <span class="insert">The receiving part of a</span> stream does not track states on the <span class="insert">sending</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   "Ready" state.  Instead, <span class="delete">receive streams track</span> the delivery of data</td><td> </td><td class="rblock"><span class="insert">   part</span> that cannot be observed, such as the "Ready" state.  Instead,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   to the application, some of which cannot be observed by the sender.</td><td> </td><td class="rblock">   <span class="insert">the receiving part of a stream tracks</span> the delivery of data to the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   application, some of which cannot be observed by the sender.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">          o</td><td> </td><td class="right">          o</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">          | Recv STREAM / STREAM_DATA_BLOCKED / RESET_STREAM</td><td> </td><td class="right">          | Recv STREAM / STREAM_DATA_BLOCKED / RESET_STREAM</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">          | Create Bidirectional Stream (Sending)</td><td> </td><td class="right">          | Create Bidirectional Stream (Sending)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">          | Recv MAX_STREAM_DATA / STOP_SENDING (Bidirectional)</td><td> </td><td class="right">          | Recv MAX_STREAM_DATA / STOP_SENDING (Bidirectional)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">          | Create Higher-Numbered Stream</td><td> </td><td class="right">          | Create Higher-Numbered Stream</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">          v</td><td> </td><td class="right">          v</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      +-------+</td><td> </td><td class="right">      +-------+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      | Recv  | Recv RESET_STREAM</td><td> </td><td class="right">      | Recv  | Recv RESET_STREAM</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      |       |-----------------------.</td><td> </td><td class="right">      |       |-----------------------.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-6" class="change"><td></td><th><small>skipping to change at</small><a href="#part-6"><em> page 14, line 37<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-6"><em> page 14, line 40<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">      | Recvd |  Recv All Data    | Recvd |</td><td> </td><td class="right">      | Recvd |  Recv All Data    | Recvd |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      +-------+&lt;-- (optional) ----+-------+</td><td> </td><td class="right">      +-------+&lt;-- (optional) ----+-------+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">          |                           |</td><td> </td><td class="right">          |                           |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">          | App Read All Data         | App Read RST</td><td> </td><td class="right">          | App Read All Data         | App Read RST</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">          v                           v</td><td> </td><td class="right">          v                           v</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      +-------+                   +-------+</td><td> </td><td class="right">      +-------+                   +-------+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      | Data  |                   | Reset |</td><td> </td><td class="right">      | Data  |                   | Reset |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      | Read  |                   | Read  |</td><td> </td><td class="right">      | Read  |                   | Read  |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      +-------+                   +-------+</td><td> </td><td class="right">      +-------+                   +-------+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0039"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">              <span class="delete">     Figure 2: States for Receive</span> Streams</td><td> </td><td class="rblock">              <span class="insert">Figure 2: States for Receiving Parts of</span> Streams</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The receiving part of a stream initiated by a peer (types 1 and 3 for</td><td> </td><td class="right">   The receiving part of a stream initiated by a peer (types 1 and 3 for</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   a client, or 0 and 2 for a server) is created when the first STREAM,</td><td> </td><td class="right">   a client, or 0 and 2 for a server) is created when the first STREAM,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   STREAM_DATA_BLOCKED, or RESET_STREAM is received for that stream.</td><td> </td><td class="right">   STREAM_DATA_BLOCKED, or RESET_STREAM is received for that stream.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   For bidirectional streams initiated by a peer, receipt of a</td><td> </td><td class="right">   For bidirectional streams initiated by a peer, receipt of a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   MAX_STREAM_DATA or STOP_SENDING frame for the sending part of the</td><td> </td><td class="right">   MAX_STREAM_DATA or STOP_SENDING frame for the sending part of the</td><td class="lineno"></td></tr>
      <tr id="diff0040"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   stream also creates the receiving part.  The initial state for <span class="delete">a</span></td><td> </td><td class="rblock">   stream also creates the receiving part.  The initial state for <span class="insert">the</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   receive</span> stream is "Recv".</td><td> </td><td class="rblock"><span class="insert">   receiving part of</span> stream is "Recv".</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0041"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   The <span class="delete">receive</span> stream enters the "Recv" state when the sending part of a</td><td> </td><td class="rblock">   The <span class="insert">receiving part of a</span> stream enters the "Recv" state when the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   bidirectional stream initiated by the endpoint (type 0 for a client,</td><td> </td><td class="rblock">   sending part of a bidirectional stream initiated by the endpoint</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   type 1 for a server) enters the "Ready" state.</td><td> </td><td class="rblock">   (type 0 for a client, type 1 for a server) enters the "Ready" state.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   An endpoint opens a bidirectional stream when a MAX_STREAM_DATA or</td><td> </td><td class="right">   An endpoint opens a bidirectional stream when a MAX_STREAM_DATA or</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   STOP_SENDING frame is received from the peer for that stream.</td><td> </td><td class="right">   STOP_SENDING frame is received from the peer for that stream.</td><td class="lineno"></td></tr>
      <tr id="diff0042"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">                                                                         </span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Receiving a MAX_STREAM_DATA frame for an unopened stream indicates</td><td> </td><td class="right">   Receiving a MAX_STREAM_DATA frame for an unopened stream indicates</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   that the remote peer has opened the stream and is providing flow</td><td> </td><td class="right">   that the remote peer has opened the stream and is providing flow</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   control credit.  Receiving a STOP_SENDING frame for an unopened</td><td> </td><td class="right">   control credit.  Receiving a STOP_SENDING frame for an unopened</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   stream indicates that the remote peer no longer wishes to receive</td><td> </td><td class="right">   stream indicates that the remote peer no longer wishes to receive</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   data on this stream.  Either frame might arrive before a STREAM or</td><td> </td><td class="right">   data on this stream.  Either frame might arrive before a STREAM or</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   STREAM_DATA_BLOCKED frame if packets are lost or reordered.</td><td> </td><td class="right">   STREAM_DATA_BLOCKED frame if packets are lost or reordered.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Before creating a stream, all streams of the same type with lower-</td><td> </td><td class="right">   Before creating a stream, all streams of the same type with lower-</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   numbered stream IDs MUST be created.  This ensures that the creation</td><td> </td><td class="right">   numbered stream IDs MUST be created.  This ensures that the creation</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   order for streams is consistent on both endpoints.</td><td> </td><td class="right">   order for streams is consistent on both endpoints.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-7" class="change"><td></td><th><small>skipping to change at</small><a href="#part-7"><em> page 15, line 23<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-7"><em> page 15, line 29<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   numbered stream IDs MUST be created.  This ensures that the creation</td><td> </td><td class="right">   numbered stream IDs MUST be created.  This ensures that the creation</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   order for streams is consistent on both endpoints.</td><td> </td><td class="right">   order for streams is consistent on both endpoints.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   In the "Recv" state, the endpoint receives STREAM and</td><td> </td><td class="right">   In the "Recv" state, the endpoint receives STREAM and</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   STREAM_DATA_BLOCKED frames.  Incoming data is buffered and can be</td><td> </td><td class="right">   STREAM_DATA_BLOCKED frames.  Incoming data is buffered and can be</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   reassembled into the correct order for delivery to the application.</td><td> </td><td class="right">   reassembled into the correct order for delivery to the application.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   As data is consumed by the application and buffer space becomes</td><td> </td><td class="right">   As data is consumed by the application and buffer space becomes</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   available, the endpoint sends MAX_STREAM_DATA frames to allow the</td><td> </td><td class="right">   available, the endpoint sends MAX_STREAM_DATA frames to allow the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   peer to send more data.</td><td> </td><td class="right">   peer to send more data.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0043"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   When a STREAM frame with a FIN bit is received, the final <span class="delete">offset</span> is</td><td> </td><td class="rblock">   When a STREAM frame with a FIN bit is received, the final <span class="insert">size of the</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   known (see Section 4.4).  The <span class="delete">receive</span> stream enters the "Size Known"</td><td> </td><td class="rblock"><span class="insert">   stream</span> is known (see Section 4.4).  The <span class="insert">receiving part of the</span> stream</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   state.  In this state, the endpoint no longer needs to send</td><td> </td><td class="rblock">   <span class="insert">then</span> enters the "Size Known" state.  In this state, the endpoint no</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   MAX_STREAM_DATA frames, it only receives any retransmissions of</td><td> </td><td class="rblock">   longer needs to send MAX_STREAM_DATA frames, it only receives any</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   stream data.</td><td> </td><td class="rblock">   retransmissions of stream data.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0044"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Once all data for the stream has been received, the receiv<span class="delete">e stream</span></td><td> </td><td class="rblock">   Once all data for the stream has been received, the receiv<span class="insert">ing part</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   enters the "Data Recvd" state.  This might happen as a result of</td><td> </td><td class="right">   enters the "Data Recvd" state.  This might happen as a result of</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   receiving the same STREAM frame that causes the transition to "Size</td><td> </td><td class="right">   receiving the same STREAM frame that causes the transition to "Size</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Known".  In this state, the endpoint has all stream data.  Any STREAM</td><td> </td><td class="right">   Known".  In this state, the endpoint has all stream data.  Any STREAM</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   or STREAM_DATA_BLOCKED frames it receives for the stream can be</td><td> </td><td class="right">   or STREAM_DATA_BLOCKED frames it receives for the stream can be</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   discarded.</td><td> </td><td class="right">   discarded.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The "Data Recvd" state persists until stream data has been delivered</td><td> </td><td class="right">   The "Data Recvd" state persists until stream data has been delivered</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   to the application.  Once stream data has been delivered, the stream</td><td> </td><td class="right">   to the application.  Once stream data has been delivered, the stream</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   enters the "Data Read" state, which is a terminal state.</td><td> </td><td class="right">   enters the "Data Read" state, which is a terminal state.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-8" class="change"><td></td><th><small>skipping to change at</small><a href="#part-8"><em> page 16, line 7<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-8"><em> page 16, line 13<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   possible for remaining stream data to arrive after receiving a</td><td> </td><td class="right">   possible for remaining stream data to arrive after receiving a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   RESET_STREAM frame (the "Reset Recvd" state).  An implementation is</td><td> </td><td class="right">   RESET_STREAM frame (the "Reset Recvd" state).  An implementation is</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   free to manage this situation as it chooses.  Sending RESET_STREAM</td><td> </td><td class="right">   free to manage this situation as it chooses.  Sending RESET_STREAM</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   means that an endpoint cannot guarantee delivery of stream data;</td><td> </td><td class="right">   means that an endpoint cannot guarantee delivery of stream data;</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   however there is no requirement that stream data not be delivered if</td><td> </td><td class="right">   however there is no requirement that stream data not be delivered if</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   a RESET_STREAM is received.  An implementation MAY interrupt delivery</td><td> </td><td class="right">   a RESET_STREAM is received.  An implementation MAY interrupt delivery</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   of stream data, discard any data that was not consumed, and signal</td><td> </td><td class="right">   of stream data, discard any data that was not consumed, and signal</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the receipt of the RESET_STREAM immediately.  Alternatively, the</td><td> </td><td class="right">   the receipt of the RESET_STREAM immediately.  Alternatively, the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   RESET_STREAM signal might be suppressed or withheld if stream data is</td><td> </td><td class="right">   RESET_STREAM signal might be suppressed or withheld if stream data is</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   completely received and is buffered to be read by the application.</td><td> </td><td class="right">   completely received and is buffered to be read by the application.</td><td class="lineno"></td></tr>
      <tr id="diff0045"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   In the latter case, the <span class="delete">receive</span> stream transitions from "Reset Recvd"</td><td> </td><td class="rblock">   In the latter case, the <span class="insert">receiving part of the</span> stream transitions from</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   to "Data Recvd".</td><td> </td><td class="rblock">   "Reset Recvd" to "Data Recvd".</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Once the application has been delivered the signal indicating that</td><td> </td><td class="right">   Once the application has been delivered the signal indicating that</td><td class="lineno"></td></tr>
      <tr id="diff0046"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   the <span class="delete">receive</span> stream was reset, the <span class="delete">receive</span> stream transitions to the</td><td> </td><td class="rblock">   the stream was reset, the <span class="insert">receiving part of the</span> stream transitions to</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   "Reset Read" state, which is a terminal state.</td><td> </td><td class="rblock">   the "Reset Read" state, which is a terminal state.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">3.3.  Permitted Frame Types</td><td> </td><td class="right">3.3.  Permitted Frame Types</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The sender of a stream sends just three frame types that affect the</td><td> </td><td class="right">   The sender of a stream sends just three frame types that affect the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   state of a stream at either sender or receiver: STREAM</td><td> </td><td class="right">   state of a stream at either sender or receiver: STREAM</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   (Section 19.8), STREAM_DATA_BLOCKED (Section 19.13), and RESET_STREAM</td><td> </td><td class="right">   (Section 19.8), STREAM_DATA_BLOCKED (Section 19.13), and RESET_STREAM</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   (Section 19.4).</td><td> </td><td class="right">   (Section 19.4).</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A sender MUST NOT send any of these frames from a terminal state</td><td> </td><td class="right">   A sender MUST NOT send any of these frames from a terminal state</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   ("Data Recvd" or "Reset Recvd").  A sender MUST NOT send STREAM or</td><td> </td><td class="right">   ("Data Recvd" or "Reset Recvd").  A sender MUST NOT send STREAM or</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-9" class="change"><td></td><th><small>skipping to change at</small><a href="#part-9"><em> page 16, line 41<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-9"><em> page 16, line 47<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   The receiver only sends MAX_STREAM_DATA in the "Recv" state.  A</td><td> </td><td class="right">   The receiver only sends MAX_STREAM_DATA in the "Recv" state.  A</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   receiver can send STOP_SENDING in any state where it has not received</td><td> </td><td class="right">   receiver can send STOP_SENDING in any state where it has not received</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   a RESET_STREAM frame; that is states other than "Reset Recvd" or</td><td> </td><td class="right">   a RESET_STREAM frame; that is states other than "Reset Recvd" or</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   "Reset Read".  However there is little value in sending a</td><td> </td><td class="right">   "Reset Read".  However there is little value in sending a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   STOP_SENDING frame in the "Data Recvd" state, since all stream data</td><td> </td><td class="right">   STOP_SENDING frame in the "Data Recvd" state, since all stream data</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   has been received.  A sender could receive either of these two frames</td><td> </td><td class="right">   has been received.  A sender could receive either of these two frames</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   in any state as a result of delayed delivery of packets.</td><td> </td><td class="right">   in any state as a result of delayed delivery of packets.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">3.4.  Bidirectional Stream States</td><td> </td><td class="right">3.4.  Bidirectional Stream States</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0047"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   A bidirectional stream is composed of <span class="delete">a send stream</span> and <span class="delete">a receive</span></td><td> </td><td class="rblock">   A bidirectional stream is composed of <span class="insert">sending</span> and <span class="insert">receiving parts.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   stream.</span>  Implementations may represent states of the bidirectional</td><td> </td><td class="rblock">   Implementations may represent states of the bidirectional stream as</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   stream as composites of <span class="delete">send</span> and <span class="delete">receive</span> stream states.  The simplest</td><td> </td><td class="rblock">   composites of <span class="insert">sending</span> and <span class="insert">receiving</span> stream states.  The simplest</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   model presents the stream as "open" when either <span class="delete">send</span> or <span class="delete">receive</span></td><td> </td><td class="rblock">   model presents the stream as "open" when either <span class="insert">sending</span> or <span class="insert">receiving</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   stream is</span> in a non-terminal state and "closed" when both <span class="delete">send</span> and</td><td> </td><td class="rblock"><span class="insert">   parts are</span> in a non-terminal state and "closed" when both <span class="insert">sending</span> and</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">receive</span> streams are in <span class="delete">a</span> terminal <span class="delete">state.</span></td><td> </td><td class="rblock">   <span class="insert">receiving</span> streams are in terminal <span class="insert">states.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Table 2 shows a more complex mapping of bidirectional stream states</td><td> </td><td class="right">   Table 2 shows a more complex mapping of bidirectional stream states</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   that loosely correspond to the stream states in HTTP/2 [HTTP2].  This</td><td> </td><td class="right">   that loosely correspond to the stream states in HTTP/2 [HTTP2].  This</td><td class="lineno"></td></tr>
      <tr id="diff0048"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   shows that multiple states on <span class="delete">send</span> or <span class="delete">receive</span> streams are mapped to</td><td> </td><td class="rblock">   shows that multiple states on <span class="insert">sending</span> or <span class="insert">receiving parts of</span> streams</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   the same composite state.  Note that this is just one possibility for</td><td> </td><td class="rblock">   are mapped to the same composite state.  Note that this is just one</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   such a mapping; this mapping requires that data is acknowledged</td><td> </td><td class="rblock">   possibility for such a mapping; this mapping requires that data is</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   before the transition to a "closed" or "half-closed" state.</td><td> </td><td class="rblock">   acknowledged before the transition to a "closed" or "half-closed"</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   state.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-----------------------+---------------------+---------------------+</td><td> </td><td class="right">   +-----------------------+---------------------+---------------------+</td><td class="lineno"></td></tr>
      <tr id="diff0049"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   | Send<span class="delete"> Stream           | Receive Stream</span>      | Composite State     |</td><td> </td><td class="rblock">   | Send<span class="insert">ing Part          | Receiving Part</span>      | Composite State     |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-----------------------+---------------------+---------------------+</td><td> </td><td class="right">   +-----------------------+---------------------+---------------------+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   | No Stream/Ready       | No Stream/Recv *1   | idle                |</td><td> </td><td class="right">   | No Stream/Ready       | No Stream/Recv *1   | idle                |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                       |                     |                     |</td><td> </td><td class="right">   |                       |                     |                     |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   | Ready/Send/Data Sent  | Recv/Size Known     | open                |</td><td> </td><td class="right">   | Ready/Send/Data Sent  | Recv/Size Known     | open                |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                       |                     |                     |</td><td> </td><td class="right">   |                       |                     |                     |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   | Ready/Send/Data Sent  | Data Recvd/Data     | half-closed         |</td><td> </td><td class="right">   | Ready/Send/Data Sent  | Data Recvd/Data     | half-closed         |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                       | Read                | (remote)            |</td><td> </td><td class="right">   |                       | Read                | (remote)            |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                       |                     |                     |</td><td> </td><td class="right">   |                       |                     |                     |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   | Ready/Send/Data Sent  | Reset Recvd/Reset   | half-closed         |</td><td> </td><td class="right">   | Ready/Send/Data Sent  | Reset Recvd/Reset   | half-closed         |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                       | Read                | (remote)            |</td><td> </td><td class="right">   |                       | Read                | (remote)            |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                       |                     |                     |</td><td> </td><td class="right">   |                       |                     |                     |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   | Data Recvd            | Recv/Size Known     | half-closed (local) |</td><td> </td><td class="right">   | Data Recvd            | Recv/Size Known     | half-closed (local) |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                       |                     |                     |</td><td> </td><td class="right">   |                       |                     |                     |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   | Reset Sent/Reset      | Recv/Size Known     | half-closed (local) |</td><td> </td><td class="right">   | Reset Sent/Reset      | Recv/Size Known     | half-closed (local) |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   | Recvd                 |                     |                     |</td><td> </td><td class="right">   | Recvd                 |                     |                     |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                       |                     |                     |</td><td> </td><td class="right">   |                       |                     |                     |</td><td class="lineno"></td></tr>
      <tr id="diff0050"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">| Data Recvd            | Recv/Size Known     | half-closed (local) |</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   |                       |                     |                     |</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   | Reset Sent/Reset      | Data Recvd/Data     | closed              |</td><td> </td><td class="right">   | Reset Sent/Reset      | Data Recvd/Data     | closed              |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   | Recvd                 | Read                |                     |</td><td> </td><td class="right">   | Recvd                 | Read                |                     |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                       |                     |                     |</td><td> </td><td class="right">   |                       |                     |                     |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   | Reset Sent/Reset      | Reset Recvd/Reset   | closed              |</td><td> </td><td class="right">   | Reset Sent/Reset      | Reset Recvd/Reset   | closed              |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   | Recvd                 | Read                |                     |</td><td> </td><td class="right">   | Recvd                 | Read                |                     |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                       |                     |                     |</td><td> </td><td class="right">   |                       |                     |                     |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   | Data Recvd            | Data Recvd/Data     | closed              |</td><td> </td><td class="right">   | Data Recvd            | Data Recvd/Data     | closed              |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                       | Read                |                     |</td><td> </td><td class="right">   |                       | Read                |                     |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                       |                     |                     |</td><td> </td><td class="right">   |                       |                     |                     |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   | Data Recvd            | Reset Recvd/Reset   | closed              |</td><td> </td><td class="right">   | Data Recvd            | Reset Recvd/Reset   | closed              |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                       | Read                |                     |</td><td> </td><td class="right">   |                       | Read                |                     |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-----------------------+---------------------+---------------------+</td><td> </td><td class="right">   +-----------------------+---------------------+---------------------+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">           Table 2: Possible Mapping of Stream States to HTTP/2</td><td> </td><td class="right">           Table 2: Possible Mapping of Stream States to HTTP/2</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Note (*1):  A stream is considered "idle" if it has not yet been</td><td> </td><td class="right">   Note (*1):  A stream is considered "idle" if it has not yet been</td><td class="lineno"></td></tr>
      <tr id="diff0051"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">      created, or if the <span class="delete">receive</span> stream is in the "Recv" state without</td><td> </td><td class="rblock">      created, or if the <span class="insert">receiving part of the</span> stream is in the "Recv"</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">      yet having received any frames.</td><td> </td><td class="rblock">      state without yet having received any frames.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">3.5.  Solicited State Transitions</td><td> </td><td class="right">3.5.  Solicited State Transitions</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   If an endpoint is no longer interested in the data it is receiving on</td><td> </td><td class="right">   If an endpoint is no longer interested in the data it is receiving on</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   a stream, it MAY send a STOP_SENDING frame identifying that stream to</td><td> </td><td class="right">   a stream, it MAY send a STOP_SENDING frame identifying that stream to</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   prompt closure of the stream in the opposite direction.  This</td><td> </td><td class="right">   prompt closure of the stream in the opposite direction.  This</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   typically indicates that the receiving application is no longer</td><td> </td><td class="right">   typically indicates that the receiving application is no longer</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   reading data it receives from the stream, but it is not a guarantee</td><td> </td><td class="right">   reading data it receives from the stream, but it is not a guarantee</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   that incoming data will be ignored.</td><td> </td><td class="right">   that incoming data will be ignored.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   STREAM frames received after sending STOP_SENDING are still counted</td><td> </td><td class="right">   STREAM frames received after sending STOP_SENDING are still counted</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   toward connection and stream flow control, even though these frames</td><td> </td><td class="right">   toward connection and stream flow control, even though these frames</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   will be discarded upon receipt.</td><td> </td><td class="right">   will be discarded upon receipt.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A STOP_SENDING frame requests that the receiving endpoint send a</td><td> </td><td class="right">   A STOP_SENDING frame requests that the receiving endpoint send a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   RESET_STREAM frame.  An endpoint that receives a STOP_SENDING frame</td><td> </td><td class="right">   RESET_STREAM frame.  An endpoint that receives a STOP_SENDING frame</td><td class="lineno"></td></tr>
      <tr id="diff0052"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   MUST send a RESET_STREAM frame <span class="delete">for that stream.  An endpoint SHOULD</span></td><td> </td><td class="rblock">   MUST send a RESET_STREAM frame <span class="insert">if</span> the <span class="insert">stream is in</span> the <span class="insert">Ready or Send</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   copy</span> the <span class="delete">error code from</span> the <span class="delete">STOP_SENDING frame, but MAY use any</span></td><td> </td><td class="rblock"><span class="insert">   state.  If</span> the <span class="insert">stream is</span> in <span class="insert">the Data Sent state and</span> any <span class="insert">outstanding</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   application error code.  The endpoint that sends a STOP_SENDING frame</span></td><td> </td><td class="rblock"><span class="insert">   data is declared lost, an endpoint SHOULD send a</span> RESET_STREAM frame</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   can ignore</span> the <span class="delete">error code carried</span> in any RESET_STREAM frame <span class="delete">it</span></td><td> </td><td class="rblock">   <span class="insert">in lieu of a retransmission.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   receives.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0053"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   If the STOP_SENDING frame is received on a <span class="delete">send</span> stream that is</td><td> </td><td class="rblock">   <span class="insert">An endpoint SHOULD copy the error code from the STOP_SENDING frame to</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   already in the "Data Sent" state, an endpoint that wishes to cease</td><td> </td><td class="rblock"><span class="insert">   the RESET_STREAM frame it sends, but MAY use any application error</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   code.  The endpoint that sends a STOP_SENDING frame MAY ignore the</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   error code carried in any RESET_STREAM frame it receives.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                         </td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   If the STOP_SENDING frame is received on a stream that is already in</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   the "Data Sent" state, an endpoint that wishes to cease</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   retransmission of previously-sent STREAM frames on that stream MUST</td><td> </td><td class="right">   retransmission of previously-sent STREAM frames on that stream MUST</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   first send a RESET_STREAM frame.</td><td> </td><td class="right">   first send a RESET_STREAM frame.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0054"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   STOP_SENDING SHOULD only be sent for a <span class="delete">receive</span> stream that has not</td><td> </td><td class="rblock">   STOP_SENDING SHOULD only be sent for a stream that has not been <span class="insert">reset</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   been <span class="delete">reset.</span>  STOP_SENDING is most useful for streams in the "Recv" or</td><td> </td><td class="rblock"><span class="insert">   by the peer.</span>  STOP_SENDING is most useful for streams in the "Recv"</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   "Size Known" states.</td><td> </td><td class="rblock">   or "Size Known" states.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   An endpoint is expected to send another STOP_SENDING frame if a</td><td> </td><td class="right">   An endpoint is expected to send another STOP_SENDING frame if a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   packet containing a previous STOP_SENDING is lost.  However, once</td><td> </td><td class="right">   packet containing a previous STOP_SENDING is lost.  However, once</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   either all stream data or a RESET_STREAM frame has been received for</td><td> </td><td class="right">   either all stream data or a RESET_STREAM frame has been received for</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the stream - that is, the stream is in any state other than "Recv" or</td><td> </td><td class="right">   the stream - that is, the stream is in any state other than "Recv" or</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   "Size Known" - sending a STOP_SENDING frame is unnecessary.</td><td> </td><td class="right">   "Size Known" - sending a STOP_SENDING frame is unnecessary.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   An endpoint that wishes to terminate both directions of a</td><td> </td><td class="right">   An endpoint that wishes to terminate both directions of a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   bidirectional stream can terminate one direction by sending a</td><td> </td><td class="right">   bidirectional stream can terminate one direction by sending a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   RESET_STREAM, and it can encourage prompt termination in the opposite</td><td> </td><td class="right">   RESET_STREAM, and it can encourage prompt termination in the opposite</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-10" class="change"><td></td><th><small>skipping to change at</small><a href="#part-10"><em> page 20, line 44<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-10"><em> page 21, line 5<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   This document leaves when and how many bytes to advertise in a</td><td> </td><td class="right">   This document leaves when and how many bytes to advertise in a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   MAX_STREAM_DATA or MAX_DATA frame to implementations, but offers a</td><td> </td><td class="right">   MAX_STREAM_DATA or MAX_DATA frame to implementations, but offers a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   few considerations.  These frames contribute to connection overhead.</td><td> </td><td class="right">   few considerations.  These frames contribute to connection overhead.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Therefore frequently sending frames with small changes is</td><td> </td><td class="right">   Therefore frequently sending frames with small changes is</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   undesirable.  At the same time, larger increments to limits are</td><td> </td><td class="right">   undesirable.  At the same time, larger increments to limits are</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   necessary to avoid blocking if updates are less frequent, requiring</td><td> </td><td class="right">   necessary to avoid blocking if updates are less frequent, requiring</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   larger resource commitments at the receiver.  Thus there is a trade-</td><td> </td><td class="right">   larger resource commitments at the receiver.  Thus there is a trade-</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   off between resource commitment and overhead when determining how</td><td> </td><td class="right">   off between resource commitment and overhead when determining how</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   large a limit is advertised.</td><td> </td><td class="right">   large a limit is advertised.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0055"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   A receiver <span class="delete">MAY</span> use an autotuning mechanism to tune the frequency and</td><td> </td><td class="rblock">   A receiver <span class="insert">can</span> use an autotuning mechanism to tune the frequency and</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   amount of advertised additional credit based on a round-trip time</td><td> </td><td class="right">   amount of advertised additional credit based on a round-trip time</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   estimate and the rate at which the receiving application consumes</td><td> </td><td class="right">   estimate and the rate at which the receiving application consumes</td><td class="lineno"></td></tr>
      <tr id="diff0056"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   data, similar to common TCP implementations.</td><td> </td><td class="rblock">   data, similar to common TCP implementations.  <span class="insert">As an optimization,</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   sending frames related to flow control only when there are other</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   frames to send or when a peer is blocked ensures that flow control</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   doesn't cause extra packets to be sent.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   If a sender runs out of flow control credit, it will be unable to</td><td> </td><td class="right">   If a sender runs out of flow control credit, it will be unable to</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   send new data and is considered blocked.  It is generally considered</td><td> </td><td class="right">   send new data and is considered blocked.  It is generally considered</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   best to not let the sender become blocked.  To avoid blocking a</td><td> </td><td class="right">   best to not let the sender become blocked.  To avoid blocking a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   sender, and to reasonably account for the possibility of loss, a</td><td> </td><td class="right">   sender, and to reasonably account for the possibility of loss, a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   receiver should send a MAX_DATA or MAX_STREAM_DATA frame at least two</td><td> </td><td class="right">   receiver should send a MAX_DATA or MAX_STREAM_DATA frame at least two</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   round trips before it expects the sender to get blocked.</td><td> </td><td class="right">   round trips before it expects the sender to get blocked.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A receiver MUST NOT wait for a STREAM_DATA_BLOCKED or DATA_BLOCKED</td><td> </td><td class="right">   A receiver MUST NOT wait for a STREAM_DATA_BLOCKED or DATA_BLOCKED</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   frame before sending MAX_STREAM_DATA or MAX_DATA, since doing so will</td><td> </td><td class="right">   frame before sending MAX_STREAM_DATA or MAX_DATA, since doing so will</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-11" class="change"><td></td><th><small>skipping to change at</small><a href="#part-11"><em> page 21, line 28<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-11"><em> page 21, line 41<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   On receipt of a RESET_STREAM frame, an endpoint will tear down state</td><td> </td><td class="right">   On receipt of a RESET_STREAM frame, an endpoint will tear down state</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   for the matching stream and ignore further data arriving on that</td><td> </td><td class="right">   for the matching stream and ignore further data arriving on that</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   stream.  If a RESET_STREAM frame is reordered with stream data for</td><td> </td><td class="right">   stream.  If a RESET_STREAM frame is reordered with stream data for</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the same stream, the receiver's estimate of the number of bytes</td><td> </td><td class="right">   the same stream, the receiver's estimate of the number of bytes</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   received on that stream can be lower than the sender's estimate of</td><td> </td><td class="right">   received on that stream can be lower than the sender's estimate of</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the number sent.  As a result, the two endpoints could disagree on</td><td> </td><td class="right">   the number sent.  As a result, the two endpoints could disagree on</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the number of bytes that count towards connection flow control.</td><td> </td><td class="right">   the number of bytes that count towards connection flow control.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   To remedy this issue, a RESET_STREAM frame (Section 19.4) includes</td><td> </td><td class="right">   To remedy this issue, a RESET_STREAM frame (Section 19.4) includes</td><td class="lineno"></td></tr>
      <tr id="diff0057"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   the final <span class="delete">offset</span> of data sent on the stream.  On receiving a</td><td> </td><td class="rblock">   the final <span class="insert">size</span> of data sent on the stream.  On receiving a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   RESET_STREAM frame, a receiver definitively knows how many bytes were</td><td> </td><td class="right">   RESET_STREAM frame, a receiver definitively knows how many bytes were</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   sent on that stream before the RESET_STREAM frame, and the receiver</td><td> </td><td class="right">   sent on that stream before the RESET_STREAM frame, and the receiver</td><td class="lineno"></td></tr>
      <tr id="diff0058"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   MUST use the final <span class="delete">offset</span> to account for all bytes sent on the stream</td><td> </td><td class="rblock">   MUST use the final <span class="insert">size of the stream</span> to account for all bytes sent</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   in its connection level flow controller.</td><td> </td><td class="rblock">   on the stream in its connection level flow controller.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   RESET_STREAM terminates one direction of a stream abruptly.  For a</td><td> </td><td class="right">   RESET_STREAM terminates one direction of a stream abruptly.  For a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   bidirectional stream, RESET_STREAM has no effect on data flow in the</td><td> </td><td class="right">   bidirectional stream, RESET_STREAM has no effect on data flow in the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   opposite direction.  Both endpoints MUST maintain flow control state</td><td> </td><td class="right">   opposite direction.  Both endpoints MUST maintain flow control state</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   for the stream in the unterminated direction until that direction</td><td> </td><td class="right">   for the stream in the unterminated direction until that direction</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   enters a terminal state, or until one of the endpoints sends</td><td> </td><td class="right">   enters a terminal state, or until one of the endpoints sends</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   CONNECTION_CLOSE.</td><td> </td><td class="right">   CONNECTION_CLOSE.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0059"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">4.4.  Stream Final <span class="delete">Offset</span></td><td> </td><td class="rblock">4.4.  Stream Final <span class="insert">Size</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0060"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   The final <span class="delete">offset</span> is the <span class="delete">count of the number</span> of <span class="delete">bytes</span> that <span class="delete">are</span></td><td> </td><td class="rblock">   The final <span class="insert">size</span> is the <span class="insert">amount</span> of <span class="insert">flow control credit</span> that <span class="insert">is consumed</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   transmitted on</span> a stream.  <span class="delete">For a stream</span> that <span class="delete">is reset,</span> the <span class="delete">final</span></td><td> </td><td class="rblock"><span class="insert">   by</span> a stream.  <span class="insert">Assuming</span> that <span class="insert">every contiguous byte on</span> the <span class="insert">stream was</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   offset is carried explicitly in a RESET_STREAM frame.  Otherwise,</span> the</td><td> </td><td class="rblock"><span class="insert">   sent once,</span> the final <span class="insert">size</span> is the <span class="insert">number</span> of <span class="insert">bytes sent.  More</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   final <span class="delete">offset</span> is the <span class="delete">offset of the end</span> of the <span class="delete">data carried in a STREAM</span></td><td> </td><td class="rblock"><span class="insert">   generally, this is one higher than</span> the <span class="insert">largest byte offset sent on</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   frame marked with a FIN flag, or 0 in</span> the <span class="delete">case of incoming</span></td><td> </td><td class="rblock">   the <span class="insert">stream.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   unidirectional streams.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0061"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   An endpoint will know the final <span class="delete">offset</span> for a stream when the <span class="delete">receive</span></td><td> </td><td class="rblock">   <span class="insert">For a stream that is reset, the final size is carried explicitly in a</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   stream enters the "Size Known" or "Reset Recvd" state (Section 3).</td><td> </td><td class="rblock"><span class="insert">   RESET_STREAM frame.  Otherwise, the final size is the offset plus the</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   length of a STREAM frame marked with a FIN flag, or 0 in the case of</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   incoming unidirectional streams.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                         </td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   An endpoint will know the final <span class="insert">size</span> for a stream when the <span class="insert">receiving</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   part of the</span> stream enters the "Size Known" or "Reset Recvd" state</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   (Section 3).</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   An endpoint MUST NOT send data on a stream at or beyond the final</td><td> </td><td class="right">   An endpoint MUST NOT send data on a stream at or beyond the final</td><td class="lineno"></td></tr>
      <tr id="diff0062"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">offset</span>.</td><td> </td><td class="rblock">   <span class="insert">size</span>.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0063"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Once a final <span class="delete">offset</span> for a stream is known, it cannot change.  If a</td><td> </td><td class="rblock">   Once a final <span class="insert">size</span> for a stream is known, it cannot change.  If a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   RESET_STREAM or STREAM frame is received indicating a change in the</td><td> </td><td class="right">   RESET_STREAM or STREAM frame is received indicating a change in the</td><td class="lineno"></td></tr>
      <tr id="diff0064"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   final <span class="delete">offset</span> for the stream, an endpoint SHOULD respond with a</td><td> </td><td class="rblock">   final <span class="insert">size</span> for the stream, an endpoint SHOULD respond with a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">FINAL_OFFSET_ERROR</span> error (see Section 11).  A receiver SHOULD treat</td><td> </td><td class="rblock">   <span class="insert">FINAL_SIZE_ERROR</span> error (see Section 11).  A receiver SHOULD treat</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   receipt of data at or beyond the final <span class="delete">offset</span> as a <span class="delete">FINAL_OFFSET_ERROR</span></td><td> </td><td class="rblock">   receipt of data at or beyond the final <span class="insert">size</span> as a <span class="insert">FINAL_SIZE_ERROR</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   error, even after a stream is closed.  Generating these errors is not</td><td> </td><td class="right">   error, even after a stream is closed.  Generating these errors is not</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   mandatory, but only because requiring that an endpoint generate these</td><td> </td><td class="right">   mandatory, but only because requiring that an endpoint generate these</td><td class="lineno"></td></tr>
      <tr id="diff0065"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   errors also means that the endpoint needs to maintain the final</td><td> </td><td class="rblock">   errors also means that the endpoint needs to maintain the final <span class="insert">size</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">offset</span> state for closed streams, which could mean a significant state</td><td> </td><td class="rblock">   state for closed streams, which could mean a significant state</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   commitment.</td><td> </td><td class="right">   commitment.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">4.5.  Controlling Concurrency</td><td> </td><td class="right">4.5.  Controlling Concurrency</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   An endpoint limits the cumulative number of incoming streams a peer</td><td> </td><td class="right">   An endpoint limits the cumulative number of incoming streams a peer</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   can open.  Only streams with a stream ID less than (max_stream * 4 +</td><td> </td><td class="right">   can open.  Only streams with a stream ID less than (max_stream * 4 +</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   initial_stream_id_for_type) can be opened (see Table 5).  Initial</td><td> </td><td class="right">   initial_stream_id_for_type) can be opened (see Table 5).  Initial</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   limits are set in the transport parameters (see Section 18.1) and</td><td> </td><td class="right">   limits are set in the transport parameters (see Section 18.1) and</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   subsequently limits are advertised using MAX_STREAMS frames</td><td> </td><td class="right">   subsequently limits are advertised using MAX_STREAMS frames</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   (Section 19.11).  Separate limits apply to unidirectional and</td><td> </td><td class="right">   (Section 19.11).  Separate limits apply to unidirectional and</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-12" class="change"><td></td><th><small>skipping to change at</small><a href="#part-12"><em> page 23, line 48<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-12"><em> page 24, line 18<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Packets with short headers (Section 17.3) only include the</td><td> </td><td class="right">   Packets with short headers (Section 17.3) only include the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Destination Connection ID and omit the explicit length.  The length</td><td> </td><td class="right">   Destination Connection ID and omit the explicit length.  The length</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   of the Destination Connection ID field is expected to be known to</td><td> </td><td class="right">   of the Destination Connection ID field is expected to be known to</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   endpoints.  Endpoints using a load balancer that routes based on</td><td> </td><td class="right">   endpoints.  Endpoints using a load balancer that routes based on</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   connection ID could agree with the load balancer on a fixed length</td><td> </td><td class="right">   connection ID could agree with the load balancer on a fixed length</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   for connection IDs, or agree on an encoding scheme.  A fixed portion</td><td> </td><td class="right">   for connection IDs, or agree on an encoding scheme.  A fixed portion</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   could encode an explicit length, which allows the entire connection</td><td> </td><td class="right">   could encode an explicit length, which allows the entire connection</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   ID to vary in length and still be used by the load balancer.</td><td> </td><td class="right">   ID to vary in length and still be used by the load balancer.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0066"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   A Version Negotiation (Section <span class="delete">17.4)</span> packet echoes the connection IDs</td><td> </td><td class="rblock">   A Version Negotiation (Section <span class="insert">17.2.1)</span> packet echoes the connection</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   selected by the client, both to ensure correct routing toward the</td><td> </td><td class="rblock">   IDs selected by the client, both to ensure correct routing toward the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   client and to allow the client to validate that the packet is in</td><td> </td><td class="right">   client and to allow the client to validate that the packet is in</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   response to an Initial packet.</td><td> </td><td class="right">   response to an Initial packet.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A zero-length connection ID MAY be used when the connection ID is not</td><td> </td><td class="right">   A zero-length connection ID MAY be used when the connection ID is not</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   needed for routing and the address/port tuple of packets is</td><td> </td><td class="right">   needed for routing and the address/port tuple of packets is</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   sufficient to identify a connection.  An endpoint whose peer has</td><td> </td><td class="right">   sufficient to identify a connection.  An endpoint whose peer has</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   selected a zero-length connection ID MUST continue to use a zero-</td><td> </td><td class="right">   selected a zero-length connection ID MUST continue to use a zero-</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   length connection ID for the lifetime of the connection and MUST NOT</td><td> </td><td class="right">   length connection ID for the lifetime of the connection and MUST NOT</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   send packets from any other local address.</td><td> </td><td class="right">   send packets from any other local address.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-13" class="change"><td></td><th><small>skipping to change at</small><a href="#part-13"><em> page 25, line 44<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-13"><em> page 26, line 14<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Hosts try to associate a packet with an existing connection.  If the</td><td> </td><td class="right">   Hosts try to associate a packet with an existing connection.  If the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   packet has a Destination Connection ID corresponding to an existing</td><td> </td><td class="right">   packet has a Destination Connection ID corresponding to an existing</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   connection, QUIC processes that packet accordingly.  Note that more</td><td> </td><td class="right">   connection, QUIC processes that packet accordingly.  Note that more</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   than one connection ID can be associated with a connection; see</td><td> </td><td class="right">   than one connection ID can be associated with a connection; see</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Section 5.1.</td><td> </td><td class="right">   Section 5.1.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   If the Destination Connection ID is zero length and the packet</td><td> </td><td class="right">   If the Destination Connection ID is zero length and the packet</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   matches the address/port tuple of a connection where the host did not</td><td> </td><td class="right">   matches the address/port tuple of a connection where the host did not</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   require connection IDs, QUIC processes the packet as part of that</td><td> </td><td class="right">   require connection IDs, QUIC processes the packet as part of that</td><td class="lineno"></td></tr>
      <tr id="diff0067"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   connection.  Endpoints <span class="delete">MUST drop packets with zero-length</span> Destination</td><td> </td><td class="rblock">   connection.  Endpoints <span class="insert">SHOULD either reject connection attempts that</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Connection ID <span class="delete">fields if they do not correspond</span> to <span class="delete">a single</span></td><td> </td><td class="rblock"><span class="insert">   use the same addresses as existing connections, or use a non-zero-</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   connection.</span></td><td> </td><td class="rblock"><span class="insert">   length</span> Destination Connection ID <span class="insert">so that packets can be correctly</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   attributed</span> to <span class="insert">connections.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Endpoints can send a Stateless Reset (Section 10.4) for any packets</td><td> </td><td class="right">   Endpoints can send a Stateless Reset (Section 10.4) for any packets</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   that cannot be attributed to an existing connection.  A stateless</td><td> </td><td class="right">   that cannot be attributed to an existing connection.  A stateless</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   reset allows a peer to more quickly identify when a connection</td><td> </td><td class="right">   reset allows a peer to more quickly identify when a connection</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   becomes unusable.</td><td> </td><td class="right">   becomes unusable.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Packets that are matched to an existing connection, but for which the</td><td> </td><td class="right">   Packets that are matched to an existing connection, but for which the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   endpoint cannot remove packet protection, are discarded.</td><td> </td><td class="right">   endpoint cannot remove packet protection, are discarded.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0068"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   <span class="insert">Invalid packets without packet protection, such as Initial, Retry, or</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Version Negotiation, MAY be discarded.  An endpoint MUST generate a</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   connection error if it commits changes to state before discovering an</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   error.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                         </td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">5.2.1.  Client Packet Handling</td><td> </td><td class="right">5.2.1.  Client Packet Handling</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Valid packets sent to clients always include a Destination Connection</td><td> </td><td class="right">   Valid packets sent to clients always include a Destination Connection</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   ID that matches a value the client selects.  Clients that choose to</td><td> </td><td class="right">   ID that matches a value the client selects.  Clients that choose to</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   receive zero-length connection IDs can use the address/port tuple to</td><td> </td><td class="right">   receive zero-length connection IDs can use the address/port tuple to</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   identify a connection.  Packets that don't match an existing</td><td> </td><td class="right">   identify a connection.  Packets that don't match an existing</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   connection are discarded.</td><td> </td><td class="right">   connection are discarded.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Due to packet reordering or loss, clients might receive packets for a</td><td> </td><td class="right">   Due to packet reordering or loss, clients might receive packets for a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   connection that are encrypted with a key it has not yet computed.</td><td> </td><td class="right">   connection that are encrypted with a key it has not yet computed.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-14" class="change"><td></td><th><small>skipping to change at</small><a href="#part-14"><em> page 28, line 9<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-14"><em> page 28, line 30<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   a server sends a Version Negotiation packet.  Clients that support</td><td> </td><td class="right">   a server sends a Version Negotiation packet.  Clients that support</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   multiple QUIC versions SHOULD pad the first packet they send to the</td><td> </td><td class="right">   multiple QUIC versions SHOULD pad the first packet they send to the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   largest of the minimum packet sizes across all versions they support.</td><td> </td><td class="right">   largest of the minimum packet sizes across all versions they support.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   This ensures that the server responds if there is a mutually</td><td> </td><td class="right">   This ensures that the server responds if there is a mutually</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   supported version.</td><td> </td><td class="right">   supported version.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">6.1.  Sending Version Negotiation Packets</td><td> </td><td class="right">6.1.  Sending Version Negotiation Packets</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   If the version selected by the client is not acceptable to the</td><td> </td><td class="right">   If the version selected by the client is not acceptable to the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   server, the server responds with a Version Negotiation packet (see</td><td> </td><td class="right">   server, the server responds with a Version Negotiation packet (see</td><td class="lineno"></td></tr>
      <tr id="diff0069"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Section <span class="delete">17.4).</span>  This includes a list of versions that the server will</td><td> </td><td class="rblock">   Section <span class="insert">17.2.1).</span>  This includes a list of versions that the server</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   accept.  An endpoint MUST NOT send a Version Negotiation packet in</td><td> </td><td class="rblock">   will accept.  An endpoint MUST NOT send a Version Negotiation packet</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   response to receiving a Version Negotiation packet.</td><td> </td><td class="rblock">   in response to receiving a Version Negotiation packet.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   This system allows a server to process packets with unsupported</td><td> </td><td class="right">   This system allows a server to process packets with unsupported</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   versions without retaining state.  Though either the Initial packet</td><td> </td><td class="right">   versions without retaining state.  Though either the Initial packet</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   or the Version Negotiation packet that is sent in response could be</td><td> </td><td class="right">   or the Version Negotiation packet that is sent in response could be</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   lost, the client will send new packets until it successfully receives</td><td> </td><td class="right">   lost, the client will send new packets until it successfully receives</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   a response or it abandons the connection attempt.</td><td> </td><td class="right">   a response or it abandons the connection attempt.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A server MAY limit the number of Version Negotiation packets it</td><td> </td><td class="right">   A server MAY limit the number of Version Negotiation packets it</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   sends.  For instance, a server that is able to recognize packets as</td><td> </td><td class="right">   sends.  For instance, a server that is able to recognize packets as</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   0-RTT might choose not to send Version Negotiation packets in</td><td> </td><td class="right">   0-RTT might choose not to send Version Negotiation packets in</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-15" class="change"><td></td><th><small>skipping to change at</small><a href="#part-15"><em> page 29, line 6<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-15"><em> page 29, line 27<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A client MUST NOT change the version it uses unless it is in response</td><td> </td><td class="right">   A client MUST NOT change the version it uses unless it is in response</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   to a Version Negotiation packet from the server.  Once a client</td><td> </td><td class="right">   to a Version Negotiation packet from the server.  Once a client</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   receives a packet from the server which is not a Version Negotiation</td><td> </td><td class="right">   receives a packet from the server which is not a Version Negotiation</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   packet, it MUST discard other Version Negotiation packets on the same</td><td> </td><td class="right">   packet, it MUST discard other Version Negotiation packets on the same</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   connection.  Similarly, a client MUST ignore a Version Negotiation</td><td> </td><td class="right">   connection.  Similarly, a client MUST ignore a Version Negotiation</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   packet if it has already received and acted on a Version Negotiation</td><td> </td><td class="right">   packet if it has already received and acted on a Version Negotiation</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   packet.</td><td> </td><td class="right">   packet.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A client MUST ignore a Version Negotiation packet that lists the</td><td> </td><td class="right">   A client MUST ignore a Version Negotiation packet that lists the</td><td class="lineno"></td></tr>
      <tr id="diff0070"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   client's chosen version.</td><td> </td><td class="rblock">   client's chosen version.  <span class="insert">If the client does not support any of the</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   versions the server offers, it aborts the connection attempt.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A client MAY attempt 0-RTT after receiving a Version Negotiation</td><td> </td><td class="right">   A client MAY attempt 0-RTT after receiving a Version Negotiation</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   packet.  A client that sends additional 0-RTT packets MUST NOT reset</td><td> </td><td class="right">   packet.  A client that sends additional 0-RTT packets MUST NOT reset</td><td class="lineno"></td></tr>
      <tr id="diff0071"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   the packet number to 0 as a result, see Section 17.<span class="delete">5</span>.3.</td><td> </td><td class="rblock">   the packet number to 0 as a result, see Section 17.<span class="insert">2</span>.3.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Version negotiation packets have no cryptographic protection.  The</td><td> </td><td class="right">   Version negotiation packets have no cryptographic protection.  The</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   result of the negotiation MUST be revalidated as part of the</td><td> </td><td class="right">   result of the negotiation MUST be revalidated as part of the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   cryptographic handshake (see Section 7.3.3).</td><td> </td><td class="right">   cryptographic handshake (see Section 7.3.3).</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">6.3.  Using Reserved Versions</td><td> </td><td class="right">6.3.  Using Reserved Versions</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   For a server to use a new version in the future, clients must</td><td> </td><td class="right">   For a server to use a new version in the future, clients must</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   correctly handle unsupported versions.  To help ensure this, a server</td><td> </td><td class="right">   correctly handle unsupported versions.  To help ensure this, a server</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   SHOULD include a reserved version (see Section 15) while generating a</td><td> </td><td class="right">   SHOULD include a reserved version (see Section 15) while generating a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-16" class="change"><td></td><th><small>skipping to change at</small><a href="#part-16"><em> page 30, line 38<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-16"><em> page 31, line 13<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   protocol.</td><td> </td><td class="right">   protocol.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   An endpoint can verify support for Explicit Congestion Notification</td><td> </td><td class="right">   An endpoint can verify support for Explicit Congestion Notification</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   (ECN) in the first packets it sends, as described in Section 13.3.2.</td><td> </td><td class="right">   (ECN) in the first packets it sends, as described in Section 13.3.2.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The CRYPTO frame can be sent in different packet number spaces.  The</td><td> </td><td class="right">   The CRYPTO frame can be sent in different packet number spaces.  The</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   sequence numbers used by CRYPTO frames to ensure ordered delivery of</td><td> </td><td class="right">   sequence numbers used by CRYPTO frames to ensure ordered delivery of</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   cryptographic handshake data start from zero in each packet number</td><td> </td><td class="right">   cryptographic handshake data start from zero in each packet number</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   space.</td><td> </td><td class="right">   space.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0072"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   <span class="insert">Endpoints MUST explicitly negotiate an application protocol.  This</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   avoids situations where there is a disagreement about the protocol</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   that is in use.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                         </td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">7.1.  Example Handshake Flows</td><td> </td><td class="right">7.1.  Example Handshake Flows</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Details of how TLS is integrated with QUIC are provided in</td><td> </td><td class="right">   Details of how TLS is integrated with QUIC are provided in</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   [QUIC-TLS], but some examples are provided here.  An extension of</td><td> </td><td class="right">   [QUIC-TLS], but some examples are provided here.  An extension of</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   this exchange to support client address validation is shown in</td><td> </td><td class="right">   this exchange to support client address validation is shown in</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Section 8.1.1.</td><td> </td><td class="right">   Section 8.1.1.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Once any version negotiation and address validation exchanges are</td><td> </td><td class="right">   Once any version negotiation and address validation exchanges are</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   complete, the cryptographic handshake is used to agree on</td><td> </td><td class="right">   complete, the cryptographic handshake is used to agree on</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   cryptographic keys.  The cryptographic handshake is carried in</td><td> </td><td class="right">   cryptographic keys.  The cryptographic handshake is carried in</td><td class="lineno"></td></tr>
      <tr id="diff0073"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Initial (Section 17.<span class="delete">5) and Handshake (Section 17.6</span>) packets.</td><td> </td><td class="rblock">   Initial (Section 17.<span class="insert">2.2) and Handshake (Section 17.2.4</span>) packets.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Figure 4 provides an overview of the 1-RTT handshake.  Each line</td><td> </td><td class="right">   Figure 4 provides an overview of the 1-RTT handshake.  Each line</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   shows a QUIC packet with the packet type and packet number shown</td><td> </td><td class="right">   shows a QUIC packet with the packet type and packet number shown</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   first, followed by the frames that are typically contained in those</td><td> </td><td class="right">   first, followed by the frames that are typically contained in those</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   packets.  So, for instance the first packet is of type Initial, with</td><td> </td><td class="right">   packets.  So, for instance the first packet is of type Initial, with</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   packet number 0, and contains a CRYPTO frame carrying the</td><td> </td><td class="right">   packet number 0, and contains a CRYPTO frame carrying the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   ClientHello.</td><td> </td><td class="right">   ClientHello.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Note that multiple QUIC packets - even of different encryption levels</td><td> </td><td class="right">   Note that multiple QUIC packets - even of different encryption levels</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   - may be coalesced into a single UDP datagram (see Section 12.2), and</td><td> </td><td class="right">   - may be coalesced into a single UDP datagram (see Section 12.2), and</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-17" class="change"><td></td><th><small>skipping to change at</small><a href="#part-17"><em> page 34, line 6<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-17"><em> page 34, line 31<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   The encoding of the transport parameters is detailed in Section 18.</td><td> </td><td class="right">   The encoding of the transport parameters is detailed in Section 18.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   QUIC includes the encoded transport parameters in the cryptographic</td><td> </td><td class="right">   QUIC includes the encoded transport parameters in the cryptographic</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   handshake.  Once the handshake completes, the transport parameters</td><td> </td><td class="right">   handshake.  Once the handshake completes, the transport parameters</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   declared by the peer are available.  Each endpoint validates the</td><td> </td><td class="right">   declared by the peer are available.  Each endpoint validates the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   value provided by its peer.  In particular, version negotiation MUST</td><td> </td><td class="right">   value provided by its peer.  In particular, version negotiation MUST</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   be validated (see Section 7.3.3) before the connection establishment</td><td> </td><td class="right">   be validated (see Section 7.3.3) before the connection establishment</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   is considered properly complete.</td><td> </td><td class="right">   is considered properly complete.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Definitions for each of the defined transport parameters are included</td><td> </td><td class="right">   Definitions for each of the defined transport parameters are included</td><td class="lineno"></td></tr>
      <tr id="diff0074"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   in Section 18.1.  Any given parameter MUST appear at most once in a</td><td> </td><td class="rblock">   in Section 18.1.  <span class="insert">An endpoint MUST treat receipt of a transport</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   given transport parameters extension.  An endpoint MUST treat receipt</td><td> </td><td class="rblock"><span class="insert">   parameter with an invalid value as a connection error of type</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   of duplicate transport parameters as a connection error of type</td><td> </td><td class="rblock"><span class="insert">   TRANSPORT_PARAMETER_ERROR.</span>  Any given parameter MUST appear at most</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   TRANSPORT_PARAMETER_ERROR.</td><td> </td><td class="rblock">   once in a given transport parameters extension.  An endpoint MUST</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   treat receipt of duplicate transport parameters as a connection error</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   of type TRANSPORT_PARAMETER_ERROR.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A server MUST include the original_connection_id transport parameter</td><td> </td><td class="right">   A server MUST include the original_connection_id transport parameter</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   (Section 18.1) if it sent a Retry packet to enable validation of the</td><td> </td><td class="right">   (Section 18.1) if it sent a Retry packet to enable validation of the</td><td class="lineno"></td></tr>
      <tr id="diff0075"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Retry, as described in Section 17.<span class="delete">7</span>.</td><td> </td><td class="rblock">   Retry, as described in Section 17.<span class="insert">2.5</span>.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">7.3.1.  Values of Transport Parameters for 0-RTT</td><td> </td><td class="right">7.3.1.  Values of Transport Parameters for 0-RTT</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A client that attempts to send 0-RTT data MUST remember the transport</td><td> </td><td class="right">   A client that attempts to send 0-RTT data MUST remember the transport</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   parameters used by the server.  The transport parameters that the</td><td> </td><td class="right">   parameters used by the server.  The transport parameters that the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   server advertises during connection establishment apply to all</td><td> </td><td class="right">   server advertises during connection establishment apply to all</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   connections that are resumed using the keying material established</td><td> </td><td class="right">   connections that are resumed using the keying material established</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   during that handshake.  Remembered transport parameters apply to the</td><td> </td><td class="right">   during that handshake.  Remembered transport parameters apply to the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   new connection until the handshake completes and new transport</td><td> </td><td class="right">   new connection until the handshake completes and new transport</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   parameters from the server can be provided.</td><td> </td><td class="right">   parameters from the server can be provided.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-18" class="change"><td></td><th><small>skipping to change at</small><a href="#part-18"><em> page 35, line 44<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-18"><em> page 36, line 26<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   retroactively authenticate the choice of version (see Section 6).</td><td> </td><td class="right">   retroactively authenticate the choice of version (see Section 6).</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The cryptographic handshake provides integrity protection for the</td><td> </td><td class="right">   The cryptographic handshake provides integrity protection for the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   negotiated version as part of the transport parameters (see</td><td> </td><td class="right">   negotiated version as part of the transport parameters (see</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Section 18.1).  As a result, attacks on version negotiation by an</td><td> </td><td class="right">   Section 18.1).  As a result, attacks on version negotiation by an</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   attacker can be detected.</td><td> </td><td class="right">   attacker can be detected.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The client includes the initial_version field in its transport</td><td> </td><td class="right">   The client includes the initial_version field in its transport</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   parameters.  The initial_version is the version that the client</td><td> </td><td class="right">   parameters.  The initial_version is the version that the client</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   initially attempted to use.  If the server did not send a Version</td><td> </td><td class="right">   initially attempted to use.  If the server did not send a Version</td><td class="lineno"></td></tr>
      <tr id="diff0076"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Negotiation packet Section 17.<span class="delete">4</span>, this will be identical to the</td><td> </td><td class="rblock">   Negotiation packet Section 17.<span class="insert">2.1</span>, this will be identical to the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   negotiated_version field in the server transport parameters.</td><td> </td><td class="right">   negotiated_version field in the server transport parameters.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A server that processes all packets in a stateful fashion can</td><td> </td><td class="right">   A server that processes all packets in a stateful fashion can</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   remember how version negotiation was performed and validate the</td><td> </td><td class="right">   remember how version negotiation was performed and validate the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   initial_version value.</td><td> </td><td class="right">   initial_version value.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A server that does not maintain state for every packet it receives</td><td> </td><td class="right">   A server that does not maintain state for every packet it receives</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   (i.e., a stateless server) uses a different process.  If the</td><td> </td><td class="right">   (i.e., a stateless server) uses a different process.  If the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   initial_version matches the version of QUIC that is in use, a</td><td> </td><td class="right">   initial_version matches the version of QUIC that is in use, a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   stateless server can accept the value.</td><td> </td><td class="right">   stateless server can accept the value.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-19" class="change"><td></td><th><small>skipping to change at</small><a href="#part-19"><em> page 36, line 31<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-19"><em> page 37, line 10<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The negotiated_version field is the version that is in use.  This</td><td> </td><td class="right">   The negotiated_version field is the version that is in use.  This</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   MUST be set by the server to the value that is on the Initial packet</td><td> </td><td class="right">   MUST be set by the server to the value that is on the Initial packet</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   that it accepts (not an Initial packet that triggers a Retry or</td><td> </td><td class="right">   that it accepts (not an Initial packet that triggers a Retry or</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Version Negotiation packet).  A client that receives a</td><td> </td><td class="right">   Version Negotiation packet).  A client that receives a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   negotiated_version that does not match the version of QUIC that is in</td><td> </td><td class="right">   negotiated_version that does not match the version of QUIC that is in</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   use MUST terminate the connection with a VERSION_NEGOTIATION_ERROR</td><td> </td><td class="right">   use MUST terminate the connection with a VERSION_NEGOTIATION_ERROR</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   error code.</td><td> </td><td class="right">   error code.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The server includes a list of versions that it would send in any</td><td> </td><td class="right">   The server includes a list of versions that it would send in any</td><td class="lineno"></td></tr>
      <tr id="diff0077"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   version negotiation packet (Section 17.<span class="delete">4</span>) in the supported_versions</td><td> </td><td class="rblock">   version negotiation packet (Section 17.<span class="insert">2.1</span>) in the supported_versions</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   field.  The server populates this field even if it did not send a</td><td> </td><td class="right">   field.  The server populates this field even if it did not send a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   version negotiation packet.</td><td> </td><td class="right">   version negotiation packet.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The client validates that the negotiated_version is included in the</td><td> </td><td class="right">   The client validates that the negotiated_version is included in the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   supported_versions list and - if version negotiation was performed -</td><td> </td><td class="right">   supported_versions list and - if version negotiation was performed -</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   that it would have selected the negotiated version.  A client MUST</td><td> </td><td class="right">   that it would have selected the negotiated version.  A client MUST</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   terminate the connection with a VERSION_NEGOTIATION_ERROR error code</td><td> </td><td class="right">   terminate the connection with a VERSION_NEGOTIATION_ERROR error code</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   if the current QUIC version is not listed in the supported_versions</td><td> </td><td class="right">   if the current QUIC version is not listed in the supported_versions</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   list.  A client MUST terminate with a VERSION_NEGOTIATION_ERROR error</td><td> </td><td class="right">   list.  A client MUST terminate with a VERSION_NEGOTIATION_ERROR error</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   code if version negotiation occurred but it would have selected a</td><td> </td><td class="right">   code if version negotiation occurred but it would have selected a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-20" class="change"><td></td><th><small>skipping to change at</small><a href="#part-20"><em> page 37, line 41<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-20"><em> page 38, line 26<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   received.  This limits the magnitude of any amplification attack that</td><td> </td><td class="right">   received.  This limits the magnitude of any amplification attack that</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   can be mounted using spoofed source addresses.  In determining this</td><td> </td><td class="right">   can be mounted using spoofed source addresses.  In determining this</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   limit, servers only count the size of successfully processed packets.</td><td> </td><td class="right">   limit, servers only count the size of successfully processed packets.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Clients MUST pad UDP datagrams that contain only Initial packets to</td><td> </td><td class="right">   Clients MUST pad UDP datagrams that contain only Initial packets to</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   at least 1200 bytes.  Once a client has received an acknowledgment</td><td> </td><td class="right">   at least 1200 bytes.  Once a client has received an acknowledgment</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   for a Handshake packet it MAY send smaller datagrams.  Sending padded</td><td> </td><td class="right">   for a Handshake packet it MAY send smaller datagrams.  Sending padded</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   datagrams ensures that the server is not overly constrained by the</td><td> </td><td class="right">   datagrams ensures that the server is not overly constrained by the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   amplification restriction.</td><td> </td><td class="right">   amplification restriction.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0078"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">In order to prevent</span> a <span class="delete">handshake deadlock as</span> a <span class="delete">result of</span> the server</td><td> </td><td class="rblock">   <span class="insert">Packet loss, in particular loss of</span> a <span class="insert">Handshake packet from the</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">being unable</span> to <span class="delete">send,</span> clients SHOULD send a packet upon a handshake</td><td> </td><td class="rblock"><span class="insert">   server, can cause</span> a <span class="insert">situation in which</span> the server <span class="insert">cannot send when</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   timeout, as described in [QUIC-RECOVERY].  If the client has no data</td><td> </td><td class="rblock"><span class="insert">   the client has no data</span> to <span class="insert">send and the anti-amplification limit is</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   to retransmit and does not have Handshake keys, it SHOULD send an</td><td> </td><td class="rblock"><span class="insert">   reached.  In order to avoid this causing a handshake deadlock,</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Initial packet in a UDP datagram of at least 1200 bytes.  If the</td><td> </td><td class="rblock">   clients SHOULD send a packet upon a handshake timeout, as described</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   client has Handshake keys, it SHOULD send a Handshake packet.</td><td> </td><td class="rblock">   in [QUIC-RECOVERY].  If the client has no data to retransmit and does</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   not have Handshake keys, it SHOULD send an Initial packet in a UDP</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   datagram of at least 1200 bytes.  If the client has Handshake keys,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   it SHOULD send a Handshake packet.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A server might wish to validate the client address before starting</td><td> </td><td class="right">   A server might wish to validate the client address before starting</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the cryptographic handshake.  QUIC uses a token in the Initial packet</td><td> </td><td class="right">   the cryptographic handshake.  QUIC uses a token in the Initial packet</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   to provide address validation prior to completing the handshake.</td><td> </td><td class="right">   to provide address validation prior to completing the handshake.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   This token is delivered to the client during connection establishment</td><td> </td><td class="right">   This token is delivered to the client during connection establishment</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   with a Retry packet (see Section 8.1.1) or in a previous connection</td><td> </td><td class="right">   with a Retry packet (see Section 8.1.1) or in a previous connection</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   using the NEW_TOKEN frame (see Section 8.1.2).</td><td> </td><td class="right">   using the NEW_TOKEN frame (see Section 8.1.2).</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0079"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   <span class="insert">In addition to sending limits imposed prior to address validation,</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   servers are also constrained in what they can send by the limits set</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   by the congestion controller.  Clients are only constrained by the</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   congestion controller.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                         </td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">8.1.1.  Address Validation using Retry Packets</td><td> </td><td class="right">8.1.1.  Address Validation using Retry Packets</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Upon receiving the client's Initial packet, the server can request</td><td> </td><td class="right">   Upon receiving the client's Initial packet, the server can request</td><td class="lineno"></td></tr>
      <tr id="diff0080"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   address validation by sending a Retry packet (Section 17.<span class="delete">7</span>)</td><td> </td><td class="rblock">   address validation by sending a Retry packet (Section 17.<span class="insert">2.5</span>)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   containing a token.  This token MUST be repeated by the client in all</td><td> </td><td class="right">   containing a token.  This token MUST be repeated by the client in all</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Initial packets it sends after it receives the Retry packet.  In</td><td> </td><td class="right">   Initial packets it sends after it receives the Retry packet.  In</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   response to processing an Initial containing a token, a server can</td><td> </td><td class="right">   response to processing an Initial containing a token, a server can</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   either abort the connection or permit it to proceed.</td><td> </td><td class="right">   either abort the connection or permit it to proceed.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   As long as it is not possible for an attacker to generate a valid</td><td> </td><td class="right">   As long as it is not possible for an attacker to generate a valid</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   token for its own address (see Section 8.1.3) and the client is able</td><td> </td><td class="right">   token for its own address (see Section 8.1.3) and the client is able</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   to return that token, it proves to the server that it received the</td><td> </td><td class="right">   to return that token, it proves to the server that it received the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   token.</td><td> </td><td class="right">   token.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-21" class="change"><td></td><th><small>skipping to change at</small><a href="#part-21"><em> page 39, line 17<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-21"><em> page 40, line 7<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   future connections.  The client includes this token in Initial</td><td> </td><td class="right">   future connections.  The client includes this token in Initial</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   packets to provide address validation in a future connection.  The</td><td> </td><td class="right">   packets to provide address validation in a future connection.  The</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   client MUST include the token in all Initial packets it sends, unless</td><td> </td><td class="right">   client MUST include the token in all Initial packets it sends, unless</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   a Retry replaces the token with a newer token.  The client MUST NOT</td><td> </td><td class="right">   a Retry replaces the token with a newer token.  The client MUST NOT</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   use the token provided in a Retry for future connections.  Servers</td><td> </td><td class="right">   use the token provided in a Retry for future connections.  Servers</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   MAY discard any Initial packet that does not carry the expected</td><td> </td><td class="right">   MAY discard any Initial packet that does not carry the expected</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   token.</td><td> </td><td class="right">   token.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Unlike the token that is created for a Retry packet, there might be</td><td> </td><td class="right">   Unlike the token that is created for a Retry packet, there might be</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   some time between when the token is created and when the token is</td><td> </td><td class="right">   some time between when the token is created and when the token is</td><td class="lineno"></td></tr>
      <tr id="diff0081"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   subsequently used.  Thus, a <span class="delete">resumption</span> token SHOULD include an</td><td> </td><td class="rblock">   subsequently used.  Thus, a token SHOULD include an expiration time.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   expiration time.  The server MAY include either an explicit</td><td> </td><td class="rblock">   The server MAY include either an explicit expiration time or an</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   expiration time or an issued timestamp and dynamically calculate the</td><td> </td><td class="rblock">   issued timestamp and dynamically calculate the expiration time.  It</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   expiration time.  It is also unlikely that the client port number is</td><td> </td><td class="rblock">   is also unlikely that the client port number is the same on two</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   the same on two different connections; validating the port is</td><td> </td><td class="rblock">   different connections; validating the port is therefore unlikely to</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   therefore unlikely to be successful.</td><td> </td><td class="rblock">   be successful.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0082"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   A <span class="delete">resumption</span> token SHOULD be constructed to be easily distinguishable</td><td> </td><td class="rblock">   A token SHOULD be constructed to be easily distinguishable from</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   from tokens that are sent in Retry packets as they are carried in the</td><td> </td><td class="rblock">   tokens that are sent in Retry packets as they are carried in the same</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   same field.</td><td> </td><td class="rblock">   field.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   If the client has a token received in a NEW_TOKEN frame on a previous</td><td> </td><td class="right">   If the client has a token received in a NEW_TOKEN frame on a previous</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   connection to what it believes to be the same server, it can include</td><td> </td><td class="right">   connection to what it believes to be the same server, it can include</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   that value in the Token field of its Initial packet.</td><td> </td><td class="right">   that value in the Token field of its Initial packet.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A token allows a server to correlate activity between the connection</td><td> </td><td class="right">   A token allows a server to correlate activity between the connection</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   where the token was issued and any connection where it is used.</td><td> </td><td class="right">   where the token was issued and any connection where it is used.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Clients that want to break continuity of identity with a server MAY</td><td> </td><td class="right">   Clients that want to break continuity of identity with a server MAY</td><td class="lineno"></td></tr>
      <tr id="diff0083"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   discard tokens provided using the NEW_TOKEN frame.  <span class="delete">Tokens</span> obtained</td><td> </td><td class="rblock">   discard tokens provided using the NEW_TOKEN frame.  <span class="insert">A token</span> obtained</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   in Retry <span class="delete">packets</span> MUST <span class="delete">NOT</span> be <span class="delete">discarded.</span></td><td> </td><td class="rblock">   in <span class="insert">a</span> Retry <span class="insert">packet</span> MUST be <span class="insert">used immediately during the connection</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   attempt and cannot be used in subsequent connection attempts.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A client SHOULD NOT reuse a token in different connections.  Reusing</td><td> </td><td class="right">   A client SHOULD NOT reuse a token in different connections.  Reusing</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   a token allows connections to be linked by entities on the network</td><td> </td><td class="right">   a token allows connections to be linked by entities on the network</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   path (see Section 9.5).  A client MUST NOT reuse a token if it</td><td> </td><td class="right">   path (see Section 9.5).  A client MUST NOT reuse a token if it</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   believes that its point of network attachment has changed since the</td><td> </td><td class="right">   believes that its point of network attachment has changed since the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   token was last used; that is, if there is a change in its local IP</td><td> </td><td class="right">   token was last used; that is, if there is a change in its local IP</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   address or network interface.  A client needs to start the connection</td><td> </td><td class="right">   address or network interface.  A client needs to start the connection</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   process over if it migrates prior to completing the handshake.</td><td> </td><td class="right">   process over if it migrates prior to completing the handshake.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   When a server receives an Initial packet with an address validation</td><td> </td><td class="right">   When a server receives an Initial packet with an address validation</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-22" class="change"><td></td><th><small>skipping to change at</small><a href="#part-22"><em> page 40, line 20<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-22"><em> page 41, line 11<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">      discarded.  A server MAY encode tokens provided with NEW_TOKEN</td><td> </td><td class="right">      discarded.  A server MAY encode tokens provided with NEW_TOKEN</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      frames and Retry packets differently, and validate the latter more</td><td> </td><td class="right">      frames and Retry packets differently, and validate the latter more</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      strictly.</td><td> </td><td class="right">      strictly.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   In a stateless design, a server can use encrypted and authenticated</td><td> </td><td class="right">   In a stateless design, a server can use encrypted and authenticated</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   tokens to pass information to clients that the server can later</td><td> </td><td class="right">   tokens to pass information to clients that the server can later</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   recover and use to validate a client address.  Tokens are not</td><td> </td><td class="right">   recover and use to validate a client address.  Tokens are not</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   integrated into the cryptographic handshake and so they are not</td><td> </td><td class="right">   integrated into the cryptographic handshake and so they are not</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   authenticated.  For instance, a client might be able to reuse a</td><td> </td><td class="right">   authenticated.  For instance, a client might be able to reuse a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   token.  To avoid attacks that exploit this property, a server can</td><td> </td><td class="right">   token.  To avoid attacks that exploit this property, a server can</td><td class="lineno"></td></tr>
      <tr id="diff0084"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   limit its use of tokens to only the information needed validate</td><td> </td><td class="rblock">   limit its use of tokens to only the information needed <span class="insert">to </span>validate</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   client addresses.</td><td> </td><td class="right">   client addresses.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Attackers could replay tokens to use servers as amplifiers in DDoS</td><td> </td><td class="right">   Attackers could replay tokens to use servers as amplifiers in DDoS</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   attacks.  To protect against such attacks, servers SHOULD ensure that</td><td> </td><td class="right">   attacks.  To protect against such attacks, servers SHOULD ensure that</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   tokens sent in Retry packets are only accepted for a short time.</td><td> </td><td class="right">   tokens sent in Retry packets are only accepted for a short time.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Tokens that are provided in NEW_TOKEN frames (see Section 19.7) need</td><td> </td><td class="right">   Tokens that are provided in NEW_TOKEN frames (see Section 19.7) need</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   to be valid for longer, but SHOULD NOT be accepted multiple times in</td><td> </td><td class="right">   to be valid for longer, but SHOULD NOT be accepted multiple times in</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   a short period.  Servers are encouraged to allow tokens to be used</td><td> </td><td class="right">   a short period.  Servers are encouraged to allow tokens to be used</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   only once, if possible.</td><td> </td><td class="right">   only once, if possible.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-23" class="change"><td></td><th><small>skipping to change at</small><a href="#part-23"><em> page 41, line 13<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-23"><em> page 41, line 50<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   server will need to validate the token in the future.</td><td> </td><td class="right">   server will need to validate the token in the future.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">8.2.  Path Validation</td><td> </td><td class="right">8.2.  Path Validation</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Path validation is used during connection migration (see Section 9</td><td> </td><td class="right">   Path validation is used during connection migration (see Section 9</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   and Section 9.6) by the migrating endpoint to verify reachability of</td><td> </td><td class="right">   and Section 9.6) by the migrating endpoint to verify reachability of</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   a peer from a new local address.  In path validation, endpoints test</td><td> </td><td class="right">   a peer from a new local address.  In path validation, endpoints test</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   reachability between a specific local address and a specific peer</td><td> </td><td class="right">   reachability between a specific local address and a specific peer</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   address, where an address is the two-tuple of IP address and port.</td><td> </td><td class="right">   address, where an address is the two-tuple of IP address and port.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0085"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Path validation tests that packets can be both sent to and received</td><td> </td><td class="rblock">   Path validation tests that packets <span class="insert">(PATH_CHALLENGE)</span> can be both sent</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   from a peer on the path.  Importantly, it validates that the packets</td><td> </td><td class="rblock">   to and received <span class="insert">(PATH_RESPONSE)</span> from a peer on the path.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   received from the migrating endpoint do not carry a spoofed source</td><td> </td><td class="rblock">                                                                         </td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   address.</td><td> </td><td class="rblock">   Importantly, it validates that the packets received from the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   migrating endpoint do not carry a spoofed source address.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Path validation can be used at any time by either endpoint.  For</td><td> </td><td class="right">   Path validation can be used at any time by either endpoint.  For</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   instance, an endpoint might check that a peer is still in possession</td><td> </td><td class="right">   instance, an endpoint might check that a peer is still in possession</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   of its address after a period of quiescence.</td><td> </td><td class="right">   of its address after a period of quiescence.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Path validation is not designed as a NAT traversal mechanism.  Though</td><td> </td><td class="right">   Path validation is not designed as a NAT traversal mechanism.  Though</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the mechanism described here might be effective for the creation of</td><td> </td><td class="right">   the mechanism described here might be effective for the creation of</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   NAT bindings that support NAT traversal, the expectation is that one</td><td> </td><td class="right">   NAT bindings that support NAT traversal, the expectation is that one</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   or other peer is able to receive packets without first having sent a</td><td> </td><td class="right">   or other peer is able to receive packets without first having sent a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   packet on that path.  Effective NAT traversal needs additional</td><td> </td><td class="right">   packet on that path.  Effective NAT traversal needs additional</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-24" class="change"><td></td><th><small>skipping to change at</small><a href="#part-24"><em> page 42, line 5<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-24"><em> page 42, line 42<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   To initiate path validation, an endpoint sends a PATH_CHALLENGE frame</td><td> </td><td class="right">   To initiate path validation, an endpoint sends a PATH_CHALLENGE frame</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   containing a random payload on the path to be validated.</td><td> </td><td class="right">   containing a random payload on the path to be validated.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   An endpoint MAY send multiple PATH_CHALLENGE frames to guard against</td><td> </td><td class="right">   An endpoint MAY send multiple PATH_CHALLENGE frames to guard against</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   packet loss.  An endpoint SHOULD NOT send a PATH_CHALLENGE more</td><td> </td><td class="right">   packet loss.  An endpoint SHOULD NOT send a PATH_CHALLENGE more</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   frequently than it would an Initial packet, ensuring that connection</td><td> </td><td class="right">   frequently than it would an Initial packet, ensuring that connection</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   migration is no more load on a new path than establishing a new</td><td> </td><td class="right">   migration is no more load on a new path than establishing a new</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   connection.</td><td> </td><td class="right">   connection.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0086"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   The endpoint MUST use <span class="delete">fresh random</span> data in every PATH_CHALLENGE frame</td><td> </td><td class="rblock">   The endpoint MUST use <span class="insert">unpredictable</span> data in every PATH_CHALLENGE</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   so that it can associate the peer's response with the <span class="delete">causative</span></td><td> </td><td class="rblock">   frame so that it can associate the peer's response with the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   PATH_CHALLENGE.</td><td> </td><td class="rblock">   <span class="insert">corresponding</span> PATH_CHALLENGE.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">8.4.  Path Validation Responses</td><td> </td><td class="right">8.4.  Path Validation Responses</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   On receiving a PATH_CHALLENGE frame, an endpoint MUST respond</td><td> </td><td class="right">   On receiving a PATH_CHALLENGE frame, an endpoint MUST respond</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   immediately by echoing the data contained in the PATH_CHALLENGE frame</td><td> </td><td class="right">   immediately by echoing the data contained in the PATH_CHALLENGE frame</td><td class="lineno"></td></tr>
      <tr id="diff0087"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   in a PATH_RESPONSE frame.  <span class="delete">However, because a PATH_CHALLENGE might be</span></td><td> </td><td class="rblock">   in a PATH_RESPONSE frame.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   sent from a spoofed address, an endpoint MUST limit the rate at which</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   it sends PATH_RESPONSE frames and MAY silently discard PATH_CHALLENGE</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   frames that would cause it to respond at a higher rate.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   To ensure that packets can be both sent to and received from the</td><td> </td><td class="right">   To ensure that packets can be both sent to and received from the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   peer, the PATH_RESPONSE MUST be sent on the same path as the</td><td> </td><td class="right">   peer, the PATH_RESPONSE MUST be sent on the same path as the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   triggering PATH_CHALLENGE.  That is, from the same local address on</td><td> </td><td class="right">   triggering PATH_CHALLENGE.  That is, from the same local address on</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   which the PATH_CHALLENGE was received, to the same remote address</td><td> </td><td class="right">   which the PATH_CHALLENGE was received, to the same remote address</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   from which the PATH_CHALLENGE was received.</td><td> </td><td class="right">   from which the PATH_CHALLENGE was received.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">8.5.  Successful Path Validation</td><td> </td><td class="right">8.5.  Successful Path Validation</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A new address is considered valid when a PATH_RESPONSE frame is</td><td> </td><td class="right">   A new address is considered valid when a PATH_RESPONSE frame is</td><td class="lineno"></td></tr>
      <tr id="diff0088"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   received <span class="delete">containing data</span> that <span class="delete">was sent in a previous PATH_CHALLENGE.</span></td><td> </td><td class="rblock">   received that <span class="insert">meets</span> the <span class="insert">following criteria:</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   Receipt of an acknowledgment for a packet containing a PATH_CHALLENGE</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   frame is not adequate validation, since</span> the <span class="delete">acknowledgment can be</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   spoofed by a malicious peer.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0089"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">For path validation to be successful, a PATH_RESPONSE frame MUST be</span></td><td> </td><td class="rblock">   <span class="insert">o  It contains</span> the <span class="insert">data that</span> was <span class="insert">sent in</span> a <span class="insert">previous PATH_CHALLENGE.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   received from</span> the <span class="delete">same remote address to which the corresponding</span></td><td> </td><td class="rblock"><span class="insert">      Receipt of an acknowledgment for a packet containing</span> a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   PATH_CHALLENGE</span> was <span class="delete">sent.  If</span> a <span class="delete">PATH_RESPONSE frame is received from</span> a</td><td> </td><td class="rblock">      PATH_CHALLENGE <span class="insert">frame</span> is <span class="insert">not adequate validation, since</span> the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">different remote address than the one to which the</span> PATH_CHALLENGE <span class="delete">was</span></td><td> </td><td class="rblock">      <span class="insert">acknowledgment can be spoofed by a malicious peer.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   sent, path validation</span> is <span class="delete">considered to have failed, even if</span> the <span class="delete">data</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   matches that sent in the PATH_CHALLENGE.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0090"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">Additionally, the PATH_RESPONSE frame MUST be received on</span> the same</td><td> </td><td class="rblock">   <span class="insert">o  It was sent from</span> the same <span class="insert">remote</span> address <span class="insert">to</span> which the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">local</span> address <span class="delete">from</span> which the corresponding PATH_CHALLENGE was sent.</td><td> </td><td class="rblock">      corresponding PATH_CHALLENGE was sent.  <span class="insert">If</span> a PATH_RESPONSE frame</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">An endpoint considers the path to be valid when</span> a PATH_RESPONSE frame</td><td> </td><td class="rblock">      is received <span class="insert">from a different remote address than</span> the <span class="insert">one to which</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   is received <span class="delete">on the same path with</span> the <span class="delete">same payload as</span> the</td><td> </td><td class="rblock">      the PATH_CHALLENGE <span class="insert">was sent, path validation is considered to have</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   PATH_CHALLENGE <span class="delete">frame.</span></td><td> </td><td class="rblock"><span class="insert">      failed, even if the data matches that sent in the PATH_CHALLENGE.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0091"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">If a PATH_RESPONSE frame is</span> received on <span class="delete">a different</span> local address</td><td> </td><td class="rblock">   <span class="insert">o  It was</span> received on <span class="insert">the same</span> local address from which the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">than the one</span> from which the PATH_CHALLENGE was <span class="delete">sent, path validation</span></td><td> </td><td class="rblock">      <span class="insert">corresponding</span> PATH_CHALLENGE was <span class="insert">sent.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   is</span> not <span class="delete">considered to be successful, even if the data matches the</span></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   PATH_CHALLENGE.  This doesn't</span> result in path validation failure, as</td><td> </td><td class="rblock"><span class="insert">   Note that receipt on a different local address does</span> not result in</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   it might be a result of a forwarded packet (see Section 9.3.3) or</td><td> </td><td class="rblock">   path validation failure, as it might be a result of a forwarded</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   misrouting.</td><td> </td><td class="rblock">   packet (see Section 9.3.3) or misrouting.  <span class="insert">It is possible that a</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   valid PATH_RESPONSE might be received in the future.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">8.6.  Failed Path Validation</td><td> </td><td class="right">8.6.  Failed Path Validation</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Path validation only fails when the endpoint attempting to validate</td><td> </td><td class="right">   Path validation only fails when the endpoint attempting to validate</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the path abandons its attempt to validate the path.</td><td> </td><td class="right">   the path abandons its attempt to validate the path.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Endpoints SHOULD abandon path validation based on a timer.  When</td><td> </td><td class="right">   Endpoints SHOULD abandon path validation based on a timer.  When</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   setting this timer, implementations are cautioned that the new path</td><td> </td><td class="right">   setting this timer, implementations are cautioned that the new path</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   could have a longer round-trip time than the original.  A value of</td><td> </td><td class="right">   could have a longer round-trip time than the original.  A value of</td><td class="lineno"></td></tr>
      <tr id="diff0092"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   three times the current <span class="delete">Retransmittion</span> Timeout <span class="delete">(RTO)</span> as defined in</td><td> </td><td class="rblock">   three times the <span class="insert">larger of the</span> current <span class="insert">Probe</span> Timeout <span class="insert">(PTO) or the</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   [QUIC-RECOVERY] is RECOMMENDED.</td><td> </td><td class="rblock"><span class="insert">   initial timeout (that is, 2*kInitialRtt)</span> as defined in</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   [QUIC-RECOVERY] is RECOMMENDED.  <span class="insert">That is:</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      validation_timeout = max(3*PTO, 6*kInitialRtt)</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Note that the endpoint might receive packets containing other frames</td><td> </td><td class="right">   Note that the endpoint might receive packets containing other frames</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   on the new path, but a PATH_RESPONSE frame with appropriate data is</td><td> </td><td class="right">   on the new path, but a PATH_RESPONSE frame with appropriate data is</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   required for path validation to succeed.</td><td> </td><td class="right">   required for path validation to succeed.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   When an endpoint abandons path validation, it determines that the</td><td> </td><td class="right">   When an endpoint abandons path validation, it determines that the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   path is unusable.  This does not necessarily imply a failure of the</td><td> </td><td class="right">   path is unusable.  This does not necessarily imply a failure of the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   connection - endpoints can continue sending packets over other paths</td><td> </td><td class="right">   connection - endpoints can continue sending packets over other paths</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   as appropriate.  If no paths are available, an endpoint can wait for</td><td> </td><td class="right">   as appropriate.  If no paths are available, an endpoint can wait for</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   a new path to become available or close the connection.</td><td> </td><td class="right">   a new path to become available or close the connection.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-25" class="change"><td></td><th><small>skipping to change at</small><a href="#part-25"><em> page 49, line 17<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-25"><em> page 49, line 41<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   Using a stable connection ID on multiple network paths allows a</td><td> </td><td class="right">   Using a stable connection ID on multiple network paths allows a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   passive observer to correlate activity between those paths.  An</td><td> </td><td class="right">   passive observer to correlate activity between those paths.  An</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   endpoint that moves between networks might not wish to have their</td><td> </td><td class="right">   endpoint that moves between networks might not wish to have their</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   activity correlated by any entity other than their peer, so different</td><td> </td><td class="right">   activity correlated by any entity other than their peer, so different</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   connection IDs are used when sending from different local addresses,</td><td> </td><td class="right">   connection IDs are used when sending from different local addresses,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   as discussed in Section 5.1.  For this to be effective endpoints need</td><td> </td><td class="right">   as discussed in Section 5.1.  For this to be effective endpoints need</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   to ensure that connections IDs they provide cannot be linked by any</td><td> </td><td class="right">   to ensure that connections IDs they provide cannot be linked by any</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   other entity.</td><td> </td><td class="right">   other entity.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   This eliminates the use of the connection ID for linking activity</td><td> </td><td class="right">   This eliminates the use of the connection ID for linking activity</td><td class="lineno"></td></tr>
      <tr id="diff0093"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   from the same connection on different networks.  <span class="delete">Protection of packet</span></td><td> </td><td class="rblock">   from the same connection on different networks.  <span class="insert">Header protection</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   numbers</span> ensures that packet numbers cannot be used to correlate</td><td> </td><td class="rblock">   ensures that packet numbers cannot be used to correlate activity.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   activity.  This does not prevent other properties of packets, such as</td><td> </td><td class="rblock">   This does not prevent other properties of packets, such as timing and</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   timing and size, from being used to correlate activity.</td><td> </td><td class="rblock">   size, from being used to correlate activity.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Clients MAY move to a new connection ID at any time based on</td><td> </td><td class="right">   Clients MAY move to a new connection ID at any time based on</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   implementation-specific concerns.  For example, after a period of</td><td> </td><td class="right">   implementation-specific concerns.  For example, after a period of</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   network inactivity NAT rebinding might occur when the client begins</td><td> </td><td class="right">   network inactivity NAT rebinding might occur when the client begins</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   sending data again.</td><td> </td><td class="right">   sending data again.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A client might wish to reduce linkability by employing a new</td><td> </td><td class="right">   A client might wish to reduce linkability by employing a new</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   connection ID and source UDP port when sending traffic after a period</td><td> </td><td class="right">   connection ID and source UDP port when sending traffic after a period</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   of inactivity.  Changing the UDP port from which it sends packets at</td><td> </td><td class="right">   of inactivity.  Changing the UDP port from which it sends packets at</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the same time might cause the packet to appear as a connection</td><td> </td><td class="right">   the same time might cause the packet to appear as a connection</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-26" class="change"><td></td><th><small>skipping to change at</small><a href="#part-26"><em> page 50, line 25<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-26"><em> page 50, line 50<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   Migrating a connection to a new server address mid-connection is left</td><td> </td><td class="right">   Migrating a connection to a new server address mid-connection is left</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   for future work.  If a client receives packets from a new server</td><td> </td><td class="right">   for future work.  If a client receives packets from a new server</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   address not indicated by the preferred_address transport parameter,</td><td> </td><td class="right">   address not indicated by the preferred_address transport parameter,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the client SHOULD discard these packets.</td><td> </td><td class="right">   the client SHOULD discard these packets.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">9.6.1.  Communicating A Preferred Address</td><td> </td><td class="right">9.6.1.  Communicating A Preferred Address</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A server conveys a preferred address by including the</td><td> </td><td class="right">   A server conveys a preferred address by including the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   preferred_address transport parameter in the TLS handshake.</td><td> </td><td class="right">   preferred_address transport parameter in the TLS handshake.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0094"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Once the handshake is finished, the client SHOULD initiate path</td><td> </td><td class="rblock">   <span class="insert">Servers MAY communicate a preferred address of each address family</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   validation (see Section 8.2) of <span class="delete">the server's preferred</span> address using</td><td> </td><td class="rblock"><span class="insert">   (IPv4 and IPv6) to allow clients to pick the one most suited to their</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   the connection ID provided in the preferred_address transport</td><td> </td><td class="rblock"><span class="insert">   network attachment.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   parameter.</td><td> </td><td class="rblock">                                                                         </td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   Once the handshake is finished, the client SHOULD <span class="insert">select one of the</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   two server's preferred addresses and</span> initiate path validation (see</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   Section 8.2) of <span class="insert">that</span> address using the connection ID provided in the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   preferred_address transport parameter.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   If path validation succeeds, the client SHOULD immediately begin</td><td> </td><td class="right">   If path validation succeeds, the client SHOULD immediately begin</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   sending all future packets to the new server address using the new</td><td> </td><td class="right">   sending all future packets to the new server address using the new</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   connection ID and discontinue use of the old server address.  If path</td><td> </td><td class="right">   connection ID and discontinue use of the old server address.  If path</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   validation fails, the client MUST continue sending all future packets</td><td> </td><td class="right">   validation fails, the client MUST continue sending all future packets</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   to the server's original IP address.</td><td> </td><td class="right">   to the server's original IP address.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">9.6.2.  Responding to Connection Migration</td><td> </td><td class="right">9.6.2.  Responding to Connection Migration</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A server might receive a packet addressed to its preferred IP address</td><td> </td><td class="right">   A server might receive a packet addressed to its preferred IP address</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   at any time after it accepts a connection.  If this packet contains a</td><td> </td><td class="right">   at any time after it accepts a connection.  If this packet contains a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   PATH_CHALLENGE frame, the server sends a PATH_RESPONSE frame as per</td><td> </td><td class="right">   PATH_CHALLENGE frame, the server sends a PATH_RESPONSE frame as per</td><td class="lineno"></td></tr>
      <tr id="diff0095"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Section 8.2.  The server <span class="delete">MAY</span> send other non-probing frames from its</td><td> </td><td class="rblock">   Section 8.2.  The server <span class="insert">MUST</span> send other non-probing frames from its</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">preferred address, but MUST continue sending all probing packets</span> from</td><td> </td><td class="rblock">   <span class="insert">original address until it receives a non-probing packet</span> from <span class="insert">the</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   its <span class="delete">original IP address.</span></td><td> </td><td class="rblock"><span class="insert">   client at</span> its <span class="insert">preferred address and until the server has validated</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   the new path.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0096"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   The server <span class="delete">SHOULD also initiate</span> path <span class="delete">validation of</span> the client <span class="delete">using</span></td><td> </td><td class="rblock">   The server <span class="insert">MUST probe on the</span> path <span class="insert">toward</span> the client <span class="insert">from</span> its</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   its preferred <span class="delete">address and the address from which it received the</span></td><td> </td><td class="rblock">   preferred <span class="insert">address.</span>  This helps to guard against spurious migration</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   client probe.</span>  This helps to guard against spurious migration</td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   initiated by an attacker.</td><td> </td><td class="right">   initiated by an attacker.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Once the server has completed its path validation and has received a</td><td> </td><td class="right">   Once the server has completed its path validation and has received a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   non-probing packet with a new largest packet number on its preferred</td><td> </td><td class="right">   non-probing packet with a new largest packet number on its preferred</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   address, the server begins sending non-probing packets to the client</td><td> </td><td class="right">   address, the server begins sending non-probing packets to the client</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   exclusively from its preferred IP address.  It SHOULD drop packets</td><td> </td><td class="right">   exclusively from its preferred IP address.  It SHOULD drop packets</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   for this connection received on the old IP address, but MAY continue</td><td> </td><td class="right">   for this connection received on the old IP address, but MAY continue</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   to process delayed packets.</td><td> </td><td class="right">   to process delayed packets.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">9.6.3.  Interaction of Client Migration and Preferred Address</td><td> </td><td class="right">9.6.3.  Interaction of Client Migration and Preferred Address</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-27" class="change"><td></td><th><small>skipping to change at</small><a href="#part-27"><em> page 51, line 34<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-27"><em> page 52, line 14<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   attacks as described in Section 9.3.1 and Section 9.3.2.  In addition</td><td> </td><td class="right">   attacks as described in Section 9.3.1 and Section 9.3.2.  In addition</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   to intentional simultaneous migration, this might also occur because</td><td> </td><td class="right">   to intentional simultaneous migration, this might also occur because</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the client's access network used a different NAT binding for the</td><td> </td><td class="right">   the client's access network used a different NAT binding for the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   server's preferred address.</td><td> </td><td class="right">   server's preferred address.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Servers SHOULD initiate path validation to the client's new address</td><td> </td><td class="right">   Servers SHOULD initiate path validation to the client's new address</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   upon receiving a probe packet from a different address.  Servers MUST</td><td> </td><td class="right">   upon receiving a probe packet from a different address.  Servers MUST</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   NOT send more than a minimum congestion window's worth of non-probing</td><td> </td><td class="right">   NOT send more than a minimum congestion window's worth of non-probing</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   packets to the new address before path validation is complete.</td><td> </td><td class="right">   packets to the new address before path validation is complete.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0097"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   <span class="insert">A client that migrates to a new address SHOULD use a preferred</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   address from the same address family for the server.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                         </td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">10.  Connection Termination</td><td> </td><td class="right">10.  Connection Termination</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Connections should remain open until they become idle for a pre-</td><td> </td><td class="right">   Connections should remain open until they become idle for a pre-</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   negotiated period of time.  A QUIC connection, once established, can</td><td> </td><td class="right">   negotiated period of time.  A QUIC connection, once established, can</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   be terminated in one of three ways:</td><td> </td><td class="right">   be terminated in one of three ways:</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  idle timeout (Section 10.2)</td><td> </td><td class="right">   o  idle timeout (Section 10.2)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  immediate close (Section 10.3)</td><td> </td><td class="right">   o  immediate close (Section 10.3)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  stateless reset (Section 10.4)</td><td> </td><td class="right">   o  stateless reset (Section 10.4)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">10.1.  Closing and Draining Connection States</td><td> </td><td class="right">10.1.  Closing and Draining Connection States</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The closing and draining connection states exist to ensure that</td><td> </td><td class="right">   The closing and draining connection states exist to ensure that</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   connections close cleanly and that delayed or reordered packets are</td><td> </td><td class="right">   connections close cleanly and that delayed or reordered packets are</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   properly discarded.  These states SHOULD persist for three times the</td><td> </td><td class="right">   properly discarded.  These states SHOULD persist for three times the</td><td class="lineno"></td></tr>
      <tr id="diff0098"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   current <span class="delete">Retransmission</span> Timeout <span class="delete">(RTO)</span> interval as defined in</td><td> </td><td class="rblock">   current <span class="insert">Probe</span> Timeout <span class="insert">(PTO)</span> interval as defined in [QUIC-RECOVERY].</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   [QUIC-RECOVERY].</td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   An endpoint enters a closing period after initiating an immediate</td><td> </td><td class="right">   An endpoint enters a closing period after initiating an immediate</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   close (Section 10.3).  While closing, an endpoint MUST NOT send</td><td> </td><td class="right">   close (Section 10.3).  While closing, an endpoint MUST NOT send</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   packets unless they contain a CONNECTION_CLOSE frame (see</td><td> </td><td class="right">   packets unless they contain a CONNECTION_CLOSE frame (see</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Section 10.3 for details).  An endpoint retains only enough</td><td> </td><td class="right">   Section 10.3 for details).  An endpoint retains only enough</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   information to generate a packet containing a CONNECTION_CLOSE frame</td><td> </td><td class="right">   information to generate a packet containing a CONNECTION_CLOSE frame</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   and to identify packets as belonging to the connection.  The</td><td> </td><td class="right">   and to identify packets as belonging to the connection.  The</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   connection ID and QUIC version is sufficient information to identify</td><td> </td><td class="right">   connection ID and QUIC version is sufficient information to identify</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   packets for a closing connection; an endpoint can discard all other</td><td> </td><td class="right">   packets for a closing connection; an endpoint can discard all other</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   connection state.  An endpoint MAY retain packet protection keys for</td><td> </td><td class="right">   connection state.  An endpoint MAY retain packet protection keys for</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-28" class="change"><td></td><th><small>skipping to change at</small><a href="#part-28"><em> page 53, line 9<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-28"><em> page 53, line 36<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   connection being handled generically.  For instance, an endpoint MAY</td><td> </td><td class="right">   connection being handled generically.  For instance, an endpoint MAY</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   send a stateless reset in response to any further incoming packets.</td><td> </td><td class="right">   send a stateless reset in response to any further incoming packets.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The draining and closing periods do not apply when a stateless reset</td><td> </td><td class="right">   The draining and closing periods do not apply when a stateless reset</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   (Section 10.4) is sent.</td><td> </td><td class="right">   (Section 10.4) is sent.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   An endpoint is not expected to handle key updates when it is closing</td><td> </td><td class="right">   An endpoint is not expected to handle key updates when it is closing</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   or draining.  A key update might prevent the endpoint from moving</td><td> </td><td class="right">   or draining.  A key update might prevent the endpoint from moving</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   from the closing state to draining, but it otherwise has no impact.</td><td> </td><td class="right">   from the closing state to draining, but it otherwise has no impact.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0099"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">An</span> endpoint could receive packets from a new source address,</td><td> </td><td class="rblock">   <span class="insert">While in the closing period, an</span> endpoint could receive packets from a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   indicating a client connection migration (Section <span class="delete">9), while in the</span></td><td> </td><td class="rblock">   new source address, indicating a client connection migration</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   closing period.</span>  An endpoint in the closing state MUST strictly limit</td><td> </td><td class="rblock">   (Section <span class="insert">9).</span>  An endpoint in the closing state MUST strictly limit</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the number of packets it sends to this new address until the address</td><td> </td><td class="right">   the number of packets it sends to this new address until the address</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   is validated (see Section 8.2).  A server in the closing state MAY</td><td> </td><td class="right">   is validated (see Section 8.2).  A server in the closing state MAY</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   instead choose to discard packets received from a new source address.</td><td> </td><td class="right">   instead choose to discard packets received from a new source address.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">10.2.  Idle Timeout</td><td> </td><td class="right">10.2.  Idle Timeout</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   If the idle timeout is enabled, a connection that remains idle for</td><td> </td><td class="right">   If the idle timeout is enabled, a connection that remains idle for</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   longer than the advertised idle timeout (see Section 18.1) is closed.</td><td> </td><td class="right">   longer than the advertised idle timeout (see Section 18.1) is closed.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A connection enters the draining state when the idle timeout expires.</td><td> </td><td class="right">   A connection enters the draining state when the idle timeout expires.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0100"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Each endpoint advertises its own idle timeout to its peer.  <span class="delete">The idle</span></td><td> </td><td class="rblock">   Each endpoint advertises its own idle timeout to its peer.  <span class="insert">An</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   timeout starts from the last packet received.  In order to ensure</span></td><td> </td><td class="rblock"><span class="insert">   enpdpoint</span> restarts <span class="insert">any</span> timer <span class="insert">it maintains when a packet from its peer</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   that initiating new activity postpones an idle timeout, an endpoint</span></td><td> </td><td class="rblock"><span class="insert">   is received and processed successfully.  The timer is also restarted</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   restarts <span class="delete">this</span> timer when sending a <span class="delete">packet.  An endpoint does not</span></td><td> </td><td class="rblock">   when sending a packet containing frames other than ACK or <span class="insert">PADDING (an</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   postpone the idle timeout if another</span> packet <span class="delete">has been sent</span> containing</td><td> </td><td class="rblock"><span class="insert">   ACK-eliciting packet, see [QUIC-RECOVERY]), but only if no</span> other <span class="insert">ACK-</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   frames other than ACK or <span class="delete">PADDING, and that</span> other <span class="delete">packet has not</span> been</td><td> </td><td class="rblock"><span class="insert">   eliciting packets have</span> been <span class="insert">sent since last receiving a packet.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">acknowledged or declared lost.  Packets</span> that <span class="delete">contain only ACK or</span></td><td> </td><td class="rblock"><span class="insert">   Restarting when sending packets ensures</span> that <span class="insert">connections do</span> not</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   PADDING frames are</span> not <span class="delete">acknowledged until an endpoint has other</span></td><td> </td><td class="rblock">   <span class="insert">prematurely time out when initiating new activity.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   frames to send, so they could prevent the timeout from being</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   refreshed.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The value for an idle timeout can be asymmetric.  The value</td><td> </td><td class="right">   The value for an idle timeout can be asymmetric.  The value</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   advertised by an endpoint is only used to determine whether the</td><td> </td><td class="right">   advertised by an endpoint is only used to determine whether the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   connection is live at that endpoint.  An endpoint that sends packets</td><td> </td><td class="right">   connection is live at that endpoint.  An endpoint that sends packets</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   near the end of the idle timeout period of a peer risks having those</td><td> </td><td class="right">   near the end of the idle timeout period of a peer risks having those</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   packets discarded if its peer enters the draining state before the</td><td> </td><td class="right">   packets discarded if its peer enters the draining state before the</td><td class="lineno"></td></tr>
      <tr id="diff0101"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   packets arrive.  If a peer could timeout within an <span class="delete">RTO (see</span></td><td> </td><td class="rblock">   packets arrive.  If a peer could timeout within an <span class="insert">Probe Timeout</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Section <span class="delete">5.3.3</span> of [QUIC-RECOVERY]), it is advisable to test for</td><td> </td><td class="rblock"><span class="insert">   (PTO, see</span> Section <span class="insert">6.2.2</span> of [QUIC-RECOVERY]), it is advisable to test</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   liveness before sending any data that cannot be retried safely.</td><td> </td><td class="rblock">   for liveness before sending any data that cannot be retried safely.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">10.3.  Immediate Close</td><td> </td><td class="right">10.3.  Immediate Close</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   An endpoint sends a CONNECTION_CLOSE frame (Section 19.19) to</td><td> </td><td class="right">   An endpoint sends a CONNECTION_CLOSE frame (Section 19.19) to</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   terminate the connection immediately.  A CONNECTION_CLOSE frame</td><td> </td><td class="right">   terminate the connection immediately.  A CONNECTION_CLOSE frame</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   causes all streams to immediately become closed; open streams can be</td><td> </td><td class="right">   causes all streams to immediately become closed; open streams can be</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   assumed to be implicitly reset.</td><td> </td><td class="right">   assumed to be implicitly reset.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   After sending a CONNECTION_CLOSE frame, endpoints immediately enter</td><td> </td><td class="right">   After sending a CONNECTION_CLOSE frame, endpoints immediately enter</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the closing state.  During the closing period, an endpoint that sends</td><td> </td><td class="right">   the closing state.  During the closing period, an endpoint that sends</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   a CONNECTION_CLOSE frame SHOULD respond to any packet that it</td><td> </td><td class="right">   a CONNECTION_CLOSE frame SHOULD respond to any packet that it</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   receives with another packet containing a CONNECTION_CLOSE frame.  To</td><td> </td><td class="right">   receives with another packet containing a CONNECTION_CLOSE frame.  To</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   minimize the state that an endpoint maintains for a closing</td><td> </td><td class="right">   minimize the state that an endpoint maintains for a closing</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   connection, endpoints MAY send the exact same packet.  However,</td><td> </td><td class="right">   connection, endpoints MAY send the exact same packet.  However,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   endpoints SHOULD limit the number of packets they generate containing</td><td> </td><td class="right">   endpoints SHOULD limit the number of packets they generate containing</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   a CONNECTION_CLOSE frame.  For instance, an endpoint could</td><td> </td><td class="right">   a CONNECTION_CLOSE frame.  For instance, an endpoint could</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   progressively increase the number of packets that it receives before</td><td> </td><td class="right">   progressively increase the number of packets that it receives before</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   sending additional packets or increase the time between packets.</td><td> </td><td class="right">   sending additional packets or increase the time between packets.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0102"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Note:  Allowing retransmission of a packet contradicts other advice</td><td> </td><td class="rblock">   Note:  Allowing retransmission of a <span class="insert">closing</span> packet contradicts other</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">      in this document that recommends the creation of new packet</td><td> </td><td class="rblock">      advice in this document that recommends the creation of new packet</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      numbers for every packet.  Sending new packet numbers is primarily</td><td> </td><td class="right">      numbers for every packet.  Sending new packet numbers is primarily</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      of advantage to loss recovery and congestion control, which are</td><td> </td><td class="right">      of advantage to loss recovery and congestion control, which are</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      not expected to be relevant for a closed connection.</td><td> </td><td class="right">      not expected to be relevant for a closed connection.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      Retransmitting the final packet requires less state.</td><td> </td><td class="right">      Retransmitting the final packet requires less state.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   New packets from unverified addresses could be used to create an</td><td> </td><td class="right">   New packets from unverified addresses could be used to create an</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   amplification attack (see Section 8).  To avoid this, endpoints MUST</td><td> </td><td class="right">   amplification attack (see Section 8).  To avoid this, endpoints MUST</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   either limit transmission of CONNECTION_CLOSE frames to validated</td><td> </td><td class="right">   either limit transmission of CONNECTION_CLOSE frames to validated</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   addresses or drop packets without response if the response would be</td><td> </td><td class="right">   addresses or drop packets without response if the response would be</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   more than three times larger than the received packet.</td><td> </td><td class="right">   more than three times larger than the received packet.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-29" class="change"><td></td><th><small>skipping to change at</small><a href="#part-29"><em> page 55, line 30<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-29"><em> page 56, line 8<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   protected by encryption, so only client and server know this value.</td><td> </td><td class="right">   protected by encryption, so only client and server know this value.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Tokens are invalidated when their associated connection ID is retired</td><td> </td><td class="right">   Tokens are invalidated when their associated connection ID is retired</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   via a RETIRE_CONNECTION_ID frame (Section 19.16).</td><td> </td><td class="right">   via a RETIRE_CONNECTION_ID frame (Section 19.16).</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   An endpoint that receives packets that it cannot process sends a</td><td> </td><td class="right">   An endpoint that receives packets that it cannot process sends a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   packet in the following layout:</td><td> </td><td class="right">   packet in the following layout:</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">    0                   1                   2                   3</td><td> </td><td class="right">    0                   1                   2                   3</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</td><td> </td><td class="right">    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr id="diff0103"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   |0|1|               <span class="delete">    Random Bits (182..)  </span>                ...</td><td> </td><td class="rblock">   |0|1|               <span class="insert">Unpredictable Bits (182..)</span>                ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                                                               |</td><td> </td><td class="right">   |                                                               |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +                                                               +</td><td> </td><td class="right">   +                                                               +</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                                                               |</td><td> </td><td class="right">   |                                                               |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +                   Stateless Reset Token (128)                 +</td><td> </td><td class="right">   +                   Stateless Reset Token (128)                 +</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                                                               |</td><td> </td><td class="right">   |                                                               |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +                                                               +</td><td> </td><td class="right">   +                                                               +</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                                                               |</td><td> </td><td class="right">   |                                                               |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">                     Figure 7: Stateless Reset Packet</td><td> </td><td class="right">                     Figure 7: Stateless Reset Packet</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   This design ensures that a stateless reset packet is - to the extent</td><td> </td><td class="right">   This design ensures that a stateless reset packet is - to the extent</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   possible - indistinguishable from a regular packet with a short</td><td> </td><td class="right">   possible - indistinguishable from a regular packet with a short</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   header.</td><td> </td><td class="right">   header.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A stateless reset uses an entire UDP datagram, starting with the</td><td> </td><td class="right">   A stateless reset uses an entire UDP datagram, starting with the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   first two bits of the packet header.  The remainder of the first byte</td><td> </td><td class="right">   first two bits of the packet header.  The remainder of the first byte</td><td class="lineno"></td></tr>
      <tr id="diff0104"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   and an arbitrary number of <span class="delete">random bytes following i</span>t are set to</td><td> </td><td class="rblock">   and an arbitrary number of <span class="insert">bytes following it tha</span>t are set to</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   unpredictable values.  The last 16 bytes of the datagram contain a</td><td> </td><td class="right">   unpredictable values.  The last 16 bytes of the datagram contain a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Stateless Reset Token.</td><td> </td><td class="right">   Stateless Reset Token.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A stateless reset will be interpreted by a recipient as a packet with</td><td> </td><td class="right">   A stateless reset will be interpreted by a recipient as a packet with</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   a short header.  For the packet to appear as valid, the Random Bits</td><td> </td><td class="right">   a short header.  For the packet to appear as valid, the Random Bits</td><td class="lineno"></td></tr>
      <tr id="diff0105"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   field needs to include at least 182 bits of <span class="delete">random or unpredictable</span></td><td> </td><td class="rblock">   field needs to include at least 182 bits of <span class="insert">data</span> (or <span class="insert">23</span> bytes, less</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   values</span> (or <span class="delete">24</span> bytes, less the two fixed bits).  This is intended to</td><td> </td><td class="rblock">   the two fixed bits).  This is intended to allow for a <span class="insert">Destination</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   allow for a <span class="delete">destination connection</span> ID of the maximum length</td><td> </td><td class="rblock"><span class="insert">   Connection</span> ID of the maximum length permitted, with a minimal packet</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   permitted, with a minimal packet number, and payload.  The Stateless</td><td> </td><td class="rblock">   number, and payload.  The Stateless Reset Token corresponds to the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Reset Token corresponds to the minimum expansion of the packet</td><td> </td><td class="rblock">   minimum expansion of the packet protection AEAD.  More <span class="insert">unpredictable</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   protection AEAD.  More <span class="delete">random</span> bytes might be necessary if the</td><td> </td><td class="rblock">   bytes might be necessary if the endpoint could have negotiated a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   endpoint could have negotiated a packet protection scheme with a</td><td> </td><td class="rblock">   packet protection scheme with a larger minimum AEAD expansion.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   larger minimum AEAD expansion.</td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   An endpoint SHOULD NOT send a stateless reset that is significantly</td><td> </td><td class="right">   An endpoint SHOULD NOT send a stateless reset that is significantly</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   larger than the packet it receives.  Endpoints MUST discard packets</td><td> </td><td class="right">   larger than the packet it receives.  Endpoints MUST discard packets</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   that are too small to be valid QUIC packets.  With the set of AEAD</td><td> </td><td class="right">   that are too small to be valid QUIC packets.  With the set of AEAD</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   functions defined in [QUIC-TLS], packets that are smaller than 21</td><td> </td><td class="right">   functions defined in [QUIC-TLS], packets that are smaller than 21</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   bytes are never valid.</td><td> </td><td class="right">   bytes are never valid.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   An endpoint MAY send a stateless reset in response to a packet with a</td><td> </td><td class="right">   An endpoint MAY send a stateless reset in response to a packet with a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   long header.  This would not be effective if the stateless reset</td><td> </td><td class="right">   long header.  This would not be effective if the stateless reset</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   token was not yet available to a peer.  In this QUIC version, packets</td><td> </td><td class="right">   token was not yet available to a peer.  In this QUIC version, packets</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-30" class="change"><td></td><th><small>skipping to change at</small><a href="#part-30"><em> page 57, line 18<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-30"><em> page 57, line 44<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   This stateless reset design is specific to QUIC version 1.  An</td><td> </td><td class="right">   This stateless reset design is specific to QUIC version 1.  An</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   endpoint that supports multiple versions of QUIC needs to generate a</td><td> </td><td class="right">   endpoint that supports multiple versions of QUIC needs to generate a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   stateless reset that will be accepted by peers that support any</td><td> </td><td class="right">   stateless reset that will be accepted by peers that support any</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   version that the endpoint might support (or might have supported</td><td> </td><td class="right">   version that the endpoint might support (or might have supported</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   prior to losing state).  Designers of new versions of QUIC need to be</td><td> </td><td class="right">   prior to losing state).  Designers of new versions of QUIC need to be</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   aware of this and either reuse this design, or use a portion of the</td><td> </td><td class="right">   aware of this and either reuse this design, or use a portion of the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   packet other than the last 16 bytes for carrying data.</td><td> </td><td class="right">   packet other than the last 16 bytes for carrying data.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">10.4.1.  Detecting a Stateless Reset</td><td> </td><td class="right">10.4.1.  Detecting a Stateless Reset</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0106"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   An endpoint detects a potential stateless reset when a packet with a</td><td> </td><td class="rblock">   An endpoint detects a potential stateless reset when a <span class="insert">incoming</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   short header either cannot be <span class="delete">decrypted</span> or is marked as a duplicate</td><td> </td><td class="rblock">   packet with a short header either cannot be <span class="insert">associated with a</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   packet.  The endpoint then compares the last 16 bytes of the packet</td><td> </td><td class="rblock"><span class="insert">   connection, cannot be decrypted,</span> or is marked as a duplicate packet.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   with the Stateless Reset Token provided by its peer, either in a</td><td> </td><td class="rblock">   The endpoint then compares the last 16 bytes of the packet with the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   Stateless Reset Token provided by its peer, either in a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   NEW_CONNECTION_ID frame or the server's transport parameters.  If</td><td> </td><td class="right">   NEW_CONNECTION_ID frame or the server's transport parameters.  If</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   these values are identical, the endpoint MUST enter the draining</td><td> </td><td class="right">   these values are identical, the endpoint MUST enter the draining</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   period and not send any further packets on this connection.  If the</td><td> </td><td class="right">   period and not send any further packets on this connection.  If the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   comparison fails, the packet can be discarded.</td><td> </td><td class="right">   comparison fails, the packet can be discarded.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">10.4.2.  Calculating a Stateless Reset Token</td><td> </td><td class="right">10.4.2.  Calculating a Stateless Reset Token</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The stateless reset token MUST be difficult to guess.  In order to</td><td> </td><td class="right">   The stateless reset token MUST be difficult to guess.  In order to</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   create a Stateless Reset Token, an endpoint could randomly generate</td><td> </td><td class="right">   create a Stateless Reset Token, an endpoint could randomly generate</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   [RFC4086] a secret for every connection that it creates.  However,</td><td> </td><td class="right">   [RFC4086] a secret for every connection that it creates.  However,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-31" class="change"><td></td><th><small>skipping to change at</small><a href="#part-31"><em> page 58, line 27<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-31"><em> page 59, line 10<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   same static key (see Section 21.8).  A connection ID from a</td><td> </td><td class="right">   same static key (see Section 21.8).  A connection ID from a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   connection that is reset by revealing the Stateless Reset Token</td><td> </td><td class="right">   connection that is reset by revealing the Stateless Reset Token</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   cannot be reused for new connections at nodes that share a static</td><td> </td><td class="right">   cannot be reused for new connections at nodes that share a static</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   key.</td><td> </td><td class="right">   key.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Note that Stateless Reset packets do not have any cryptographic</td><td> </td><td class="right">   Note that Stateless Reset packets do not have any cryptographic</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   protection.</td><td> </td><td class="right">   protection.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">10.4.3.  Looping</td><td> </td><td class="right">10.4.3.  Looping</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0107"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   The design of a Stateless Reset is such that it is indistinguishable</td><td> </td><td class="rblock">   The design of a Stateless Reset is such that <span class="insert">without knowing the</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   from a valid packet.  <span class="delete">This means that</span> a Stateless Reset might <span class="delete">trigger</span></td><td> </td><td class="rblock"><span class="insert">   stateless reset token</span> it is indistinguishable from a valid packet.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   the sending of a</span> Stateless Reset in response, which could lead to</td><td> </td><td class="rblock">   <span class="insert">For instance, if a server sends</span> a Stateless Reset <span class="insert">to another server</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   infinite <span class="delete">exchanges.</span></td><td> </td><td class="rblock"><span class="insert">   it</span> might <span class="insert">receive another</span> Stateless Reset in response, which could</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   lead to <span class="insert">an</span> infinite <span class="insert">exchange.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   An endpoint MUST ensure that every Stateless Reset that it sends is</td><td> </td><td class="right">   An endpoint MUST ensure that every Stateless Reset that it sends is</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   smaller than the packet which triggered it, unless it maintains state</td><td> </td><td class="right">   smaller than the packet which triggered it, unless it maintains state</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   sufficient to prevent looping.  In the event of a loop, this results</td><td> </td><td class="right">   sufficient to prevent looping.  In the event of a loop, this results</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   in packets eventually being too small to trigger a response.</td><td> </td><td class="right">   in packets eventually being too small to trigger a response.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   An endpoint can remember the number of Stateless Reset packets that</td><td> </td><td class="right">   An endpoint can remember the number of Stateless Reset packets that</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   it has sent and stop generating new Stateless Reset packets once a</td><td> </td><td class="right">   it has sent and stop generating new Stateless Reset packets once a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   limit is reached.  Using separate limits for different remote</td><td> </td><td class="right">   limit is reached.  Using separate limits for different remote</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   addresses will ensure that Stateless Reset packets can be used to</td><td> </td><td class="right">   addresses will ensure that Stateless Reset packets can be used to</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   close connections when other peers or connections have exhausted</td><td> </td><td class="right">   close connections when other peers or connections have exhausted</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   limits.</td><td> </td><td class="right">   limits.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Reducing the size of a Stateless Reset below the recommended minimum</td><td> </td><td class="right">   Reducing the size of a Stateless Reset below the recommended minimum</td><td class="lineno"></td></tr>
      <tr id="diff0108"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   size of 3<span class="delete">7</span> bytes could mean that the packet could reveal to an</td><td> </td><td class="rblock">   size of 3<span class="insert">9</span> bytes could mean that the packet could reveal to an</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   observer that it is a Stateless Reset.  Conversely, refusing to send</td><td> </td><td class="right">   observer that it is a Stateless Reset.  Conversely, refusing to send</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   a Stateless Reset in response to a small packet might result in</td><td> </td><td class="right">   a Stateless Reset in response to a small packet might result in</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Stateless Reset not being useful in detecting cases of broken</td><td> </td><td class="right">   Stateless Reset not being useful in detecting cases of broken</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   connections where only very small packets are sent; such failures</td><td> </td><td class="right">   connections where only very small packets are sent; such failures</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   might only be detected by other means, such as timers.</td><td> </td><td class="right">   might only be detected by other means, such as timers.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   An endpoint can increase the odds that a packet will trigger a</td><td> </td><td class="right">   An endpoint can increase the odds that a packet will trigger a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Stateless Reset if it cannot be processed by padding it to at least</td><td> </td><td class="right">   Stateless Reset if it cannot be processed by padding it to at least</td><td class="lineno"></td></tr>
      <tr id="diff0109"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">38</span> bytes.</td><td> </td><td class="rblock">   <span class="insert">40</span> bytes.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">11.  Error Handling</td><td> </td><td class="right">11.  Error Handling</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   An endpoint that detects an error SHOULD signal the existence of that</td><td> </td><td class="right">   An endpoint that detects an error SHOULD signal the existence of that</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   error to its peer.  Both transport-level and application-level errors</td><td> </td><td class="right">   error to its peer.  Both transport-level and application-level errors</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   can affect an entire connection (see Section 11.1), while only</td><td> </td><td class="right">   can affect an entire connection (see Section 11.1), while only</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   application-level errors can be isolated to a single stream (see</td><td> </td><td class="right">   application-level errors can be isolated to a single stream (see</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Section 11.2).</td><td> </td><td class="right">   Section 11.2).</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The most appropriate error code (Section 20) SHOULD be included in</td><td> </td><td class="right">   The most appropriate error code (Section 20) SHOULD be included in</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-32" class="change"><td></td><th><small>skipping to change at</small><a href="#part-32"><em> page 60, line 27<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-32"><em> page 61, line 9<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   RESET_STREAM MUST be instigated by the protocol using QUIC, either</td><td> </td><td class="right">   RESET_STREAM MUST be instigated by the protocol using QUIC, either</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   directly or through the receipt of a STOP_SENDING frame from a peer.</td><td> </td><td class="right">   directly or through the receipt of a STOP_SENDING frame from a peer.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   RESET_STREAM carries an application error code.  Resetting a stream</td><td> </td><td class="right">   RESET_STREAM carries an application error code.  Resetting a stream</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   without knowledge of the application protocol could cause the</td><td> </td><td class="right">   without knowledge of the application protocol could cause the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   protocol to enter an unrecoverable state.  Application protocols</td><td> </td><td class="right">   protocol to enter an unrecoverable state.  Application protocols</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   might require certain streams to be reliably delivered in order to</td><td> </td><td class="right">   might require certain streams to be reliably delivered in order to</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   guarantee consistent state between endpoints.</td><td> </td><td class="right">   guarantee consistent state between endpoints.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">12.  Packets and Frames</td><td> </td><td class="right">12.  Packets and Frames</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0110"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   QUIC endpoints communicate by exchanging packets.  Packets <span class="delete">are</span></td><td> </td><td class="rblock">   QUIC endpoints communicate by exchanging packets.  Packets have</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   carried in UDP datagrams (see Section 12.2) and</span> have confidentiality</td><td> </td><td class="rblock">   confidentiality and integrity protection (see Section <span class="insert">12.1) and are</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   and integrity protection (see Section <span class="delete">12.1).</span></td><td> </td><td class="rblock"><span class="insert">   carried in UDP datagrams (see Section 12.2).</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   This version of QUIC uses the long packet header (see Section 17.2)</td><td> </td><td class="right">   This version of QUIC uses the long packet header (see Section 17.2)</td><td class="lineno"></td></tr>
      <tr id="diff0111"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   during connection <span class="delete">establishment and the short header (see</span></td><td> </td><td class="rblock">   during connection <span class="insert">establishment.</span>  Packets <span class="insert">with</span> the long header are</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   Section 17.3) once 1-RTT keys have been established.</span></td><td> </td><td class="rblock">   Initial <span class="insert">(Section 17.2.2), 0-RTT (Section 17.2.3),</span> Handshake</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">                                                                         </td><td> </td><td class="rblock">   <span class="insert">(Section 17.2.4),</span> and <span class="insert">Retry (Section 17.2.5).  Version negotiation</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Packets <span class="delete">that carry</span> the long header are Initial <span class="delete">Section 17.5, Retry</span></td><td> </td><td class="rblock"><span class="insert">   uses a version-independent packet</span> with a <span class="insert">long header (see</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   Section 17.7,</span> Handshake <span class="delete">Section 17.6,</span> and <span class="delete">0-RTT Protected packets</span></td><td> </td><td class="rblock"><span class="insert">   Section 17.2.1).</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   Section 12.1.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   Packets</span> with <span class="delete">the short header are designed for minimal overhead and</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   are used after</span> a <span class="delete">connection is established.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0112"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">Version negotiation uses a packet</span> with a <span class="delete">special format (see</span></td><td> </td><td class="rblock">   <span class="insert">Packets</span> with <span class="insert">the short header (Section 17.3) are designed for minimal</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   Section 17.4).</span></td><td> </td><td class="rblock"><span class="insert">   overhead and are used after</span> a <span class="insert">connection is established and 1-RTT</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   keys are available.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">12.1.  Protected Packets</td><td> </td><td class="right">12.1.  Protected Packets</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   All QUIC packets except Version Negotiation and Retry packets use</td><td> </td><td class="right">   All QUIC packets except Version Negotiation and Retry packets use</td><td class="lineno"></td></tr>
      <tr id="diff0113"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   authenticated encryption with additional data (AEAD) [RFC511<span class="delete">9</span>] to</td><td> </td><td class="rblock">   authenticated encryption with additional data (AEAD) [RFC511<span class="insert">6</span>] to</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   provide confidentiality and integrity protection.  Details of packet</td><td> </td><td class="right">   provide confidentiality and integrity protection.  Details of packet</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   protection are found in [QUIC-TLS]; this section includes an overview</td><td> </td><td class="right">   protection are found in [QUIC-TLS]; this section includes an overview</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   of the process.</td><td> </td><td class="right">   of the process.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Initial packets are protected using keys that are statically derived.</td><td> </td><td class="right">   Initial packets are protected using keys that are statically derived.</td><td class="lineno"></td></tr>
      <tr id="diff0114"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   This packet protection is not effective confidentiality <span class="delete">protection,</span></td><td> </td><td class="rblock">   This packet protection is not effective confidentiality <span class="insert">protection.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   it</span> only exists to ensure that the sender of the packet is on the</td><td> </td><td class="rblock"><span class="insert">   Initial protection</span> only exists to ensure that the sender of the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   network path.  Any entity that receives the Initial packet from a</td><td> </td><td class="rblock">   packet is on the network path.  Any entity that receives the Initial</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   client can recover the keys necessary to remove packet protection or</td><td> </td><td class="rblock">   packet from a client can recover the keys necessary to remove packet</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   to generate packets that will be successfully authenticated.</td><td> </td><td class="rblock">   protection or to generate packets that will be successfully</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   authenticated.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   All other packets are protected with keys derived from the</td><td> </td><td class="right">   All other packets are protected with keys derived from the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   cryptographic handshake.  The type of the packet from the long header</td><td> </td><td class="right">   cryptographic handshake.  The type of the packet from the long header</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   or key phase from the short header are used to identify which</td><td> </td><td class="right">   or key phase from the short header are used to identify which</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   encryption level - and therefore the keys - that are used.  Packets</td><td> </td><td class="right">   encryption level - and therefore the keys - that are used.  Packets</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   protected with 0-RTT and 1-RTT keys are expected to have</td><td> </td><td class="right">   protected with 0-RTT and 1-RTT keys are expected to have</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   confidentiality and data origin authentication; the cryptographic</td><td> </td><td class="right">   confidentiality and data origin authentication; the cryptographic</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   handshake ensures that only the communicating endpoints receive the</td><td> </td><td class="right">   handshake ensures that only the communicating endpoints receive the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   corresponding keys.</td><td> </td><td class="right">   corresponding keys.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The packet number field contains a packet number, which has</td><td> </td><td class="right">   The packet number field contains a packet number, which has</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   additional confidentiality protection that is applied after packet</td><td> </td><td class="right">   additional confidentiality protection that is applied after packet</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   protection is applied (see [QUIC-TLS] for details).  The underlying</td><td> </td><td class="right">   protection is applied (see [QUIC-TLS] for details).  The underlying</td><td class="lineno"></td></tr>
      <tr id="diff0115"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   packet number increases with each packet <span class="delete">sent,</span> see Section 12.3 for</td><td> </td><td class="rblock">   packet number increases with each packet <span class="insert">sent in a given packet</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   details.</td><td> </td><td class="rblock"><span class="insert">   number space,</span> see Section 12.3 for details.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">12.2.  Coalescing Packets</td><td> </td><td class="right">12.2.  Coalescing Packets</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0116"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">A</span> sender can coalesce multiple QUIC packets into one UDP datagram.</td><td> </td><td class="rblock">   <span class="insert">Initial (Section 17.2.2), 0-RTT (Section 17.2.3), and Handshake</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   This can reduce the number of UDP datagrams needed to complete the</td><td> </td><td class="rblock"><span class="insert">   (Section 17.2.4) packets contain a Length field, which determines the</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   cryptographic handshake and starting sending data.  Receivers MUST be</td><td> </td><td class="rblock"><span class="insert">   end of the packet.  The length includes both the Packet Number and</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   able to process coalesced packets.</td><td> </td><td class="rblock"><span class="insert">   Payload fields, both of which are confidentiality protected and</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   initially of unknown length.  The length of the Payload field is</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   learned once header protection is removed.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Using the Length field, a</span> sender can coalesce multiple QUIC packets</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   into one UDP datagram.  This can reduce the number of UDP datagrams</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   needed to complete the cryptographic handshake and starting sending</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   data.  Receivers MUST be able to process coalesced packets.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Coalescing packets in order of increasing encryption levels (Initial,</td><td> </td><td class="right">   Coalescing packets in order of increasing encryption levels (Initial,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   0-RTT, Handshake, 1-RTT) makes it more likely the receiver will be</td><td> </td><td class="right">   0-RTT, Handshake, 1-RTT) makes it more likely the receiver will be</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   able to process all the packets in a single pass.  A packet with a</td><td> </td><td class="right">   able to process all the packets in a single pass.  A packet with a</td><td class="lineno"></td></tr>
      <tr id="diff0117"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   short header does not include a length, so it <span class="delete">will always</span> be the last</td><td> </td><td class="rblock">   short header does not include a length, so it <span class="insert">can only</span> be the last</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   packet included in a UDP datagram.</td><td> </td><td class="right">   packet included in a UDP datagram.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Senders MUST NOT coalesce QUIC packets for different connections into</td><td> </td><td class="right">   Senders MUST NOT coalesce QUIC packets for different connections into</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   a single UDP datagram.  Receivers SHOULD ignore any subsequent</td><td> </td><td class="right">   a single UDP datagram.  Receivers SHOULD ignore any subsequent</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   packets with a different Destination Connection ID than the first</td><td> </td><td class="right">   packets with a different Destination Connection ID than the first</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   packet in the datagram.</td><td> </td><td class="right">   packet in the datagram.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Every QUIC packet that is coalesced into a single UDP datagram is</td><td> </td><td class="right">   Every QUIC packet that is coalesced into a single UDP datagram is</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   separate and complete.  Though the values of some fields in the</td><td> </td><td class="right">   separate and complete.  Though the values of some fields in the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   packet header might be redundant, no fields are omitted.  The</td><td> </td><td class="right">   packet header might be redundant, no fields are omitted.  The</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   receiver of coalesced QUIC packets MUST individually process each</td><td> </td><td class="right">   receiver of coalesced QUIC packets MUST individually process each</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   QUIC packet and separately acknowledge them, as if they were received</td><td> </td><td class="right">   QUIC packet and separately acknowledge them, as if they were received</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   as the payload of different UDP datagrams.  For example, if</td><td> </td><td class="right">   as the payload of different UDP datagrams.  For example, if</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   decryption fails (because the keys are not available or any other</td><td> </td><td class="right">   decryption fails (because the keys are not available or any other</td><td class="lineno"></td></tr>
      <tr id="diff0118"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">reason) or</span> the <span class="delete">packet is of an unknown type,</span> the receiver MAY either</td><td> </td><td class="rblock">   <span class="insert">reason),</span> the the receiver MAY either discard or buffer the packet for</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   discard or buffer the packet for later processing and MUST attempt to</td><td> </td><td class="rblock">   later processing and MUST attempt to process the remaining packets.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   process the remaining packets.</td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0119"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Retry packets (Section <span class="delete">17.7),</span> Version Negotiation packets</td><td> </td><td class="rblock">   Retry packets (Section <span class="insert">17.2.5),</span> Version Negotiation packets</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   (Section <span class="delete">17.4),</span> and packets with a short header cannot be followed by</td><td> </td><td class="rblock">   (Section <span class="insert">17.2.1),</span> and packets with a short header <span class="insert">(Section 17.3) do</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   other packets in the same UDP datagram.</td><td> </td><td class="rblock"><span class="insert">   not contain a Length field and so</span> cannot be followed by other packets</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   in the same UDP datagram.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">12.3.  Packet Numbers</td><td> </td><td class="right">12.3.  Packet Numbers</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0120"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   The packet number is an integer in the range 0 to 2^62-1.  <span class="delete">Where</span></td><td> </td><td class="rblock">   The packet number is an integer in the range 0 to 2^62-1.  This</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   present, packet numbers are encoded as a variable-length integer (see</span></td><td> </td><td class="rblock">   number is used in determining the cryptographic nonce for packet</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   Section 16).</span>  This number is used in determining the cryptographic</td><td> </td><td class="rblock">   protection.  Each endpoint maintains a separate packet number for</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   nonce for packet protection.  Each endpoint maintains a separate</td><td> </td><td class="rblock">   sending and receiving.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   packet number for sending and receiving.</td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0121"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Version Negotiation (Section <span class="delete">17.4)</span> and Retry Section <span class="delete">17.7</span> packets do</td><td> </td><td class="rblock">   <span class="insert">Packet numbers are limited to this range because they need to be</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   not include a packet number.</td><td> </td><td class="rblock"><span class="insert">   representable in whole in the Largest Acknowledged field of an ACK</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   frame (Section 19.3).  When present in a long or short header</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   however, packet numbers are reduced and encoded in 1 to 4 bytes, see</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Section 17.1).</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                         </td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   Version Negotiation (Section <span class="insert">17.2.1)</span> and Retry Section <span class="insert">17.2.5</span> packets</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   do not include a packet number.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Packet numbers are divided into 3 spaces in QUIC:</td><td> </td><td class="right">   Packet numbers are divided into 3 spaces in QUIC:</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0122"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   o  Initial space: All Initial packets Section <span class="delete">17.5</span> are in this space.</td><td> </td><td class="rblock">   o  Initial space: All Initial packets Section <span class="insert">17.2.2</span> are in this</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">      space.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0123"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   o  Handshake space: All Handshake packets Section 17.<span class="delete">6</span> are in this</td><td> </td><td class="rblock">   o  Handshake space: All Handshake packets Section 17.<span class="insert">2.4</span> are in this</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      space.</td><td> </td><td class="right">      space.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Application data space: All 0-RTT and 1-RTT encrypted packets</td><td> </td><td class="right">   o  Application data space: All 0-RTT and 1-RTT encrypted packets</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      Section 12.1 are in this space.</td><td> </td><td class="right">      Section 12.1 are in this space.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   As described in [QUIC-TLS], each packet type uses different</td><td> </td><td class="right">   As described in [QUIC-TLS], each packet type uses different</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   protection keys.</td><td> </td><td class="right">   protection keys.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Conceptually, a packet number space is the context in which a packet</td><td> </td><td class="right">   Conceptually, a packet number space is the context in which a packet</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   can be processed and acknowledged.  Initial packets can only be sent</td><td> </td><td class="right">   can be processed and acknowledged.  Initial packets can only be sent</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   with Initial packet protection keys and acknowledged in packets which</td><td> </td><td class="right">   with Initial packet protection keys and acknowledged in packets which</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   are also Initial packets.  Similarly, Handshake packets are sent at</td><td> </td><td class="right">   are also Initial packets.  Similarly, Handshake packets are sent at</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the Handshake encryption level and can only be acknowledged in</td><td> </td><td class="right">   the Handshake encryption level and can only be acknowledged in</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Handshake packets.</td><td> </td><td class="right">   Handshake packets.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   This enforces cryptographic separation between the data sent in the</td><td> </td><td class="right">   This enforces cryptographic separation between the data sent in the</td><td class="lineno"></td></tr>
      <tr id="diff0124"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   different packet sequence number spaces.  <span class="delete">Each packet number</span> space</td><td> </td><td class="rblock">   different packet sequence number spaces.  <span class="insert">Packet numbers in each</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">starts</span> at packet number 0.  Subsequent packets sent in the same</td><td> </td><td class="rblock">   space <span class="insert">start</span> at packet number 0.  Subsequent packets sent in the same</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   packet number space MUST increase the packet number by at least one.</td><td> </td><td class="right">   packet number space MUST increase the packet number by at least one.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   0-RTT and 1-RTT data exist in the same packet number space to make</td><td> </td><td class="right">   0-RTT and 1-RTT data exist in the same packet number space to make</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   loss recovery algorithms easier to implement between the two packet</td><td> </td><td class="right">   loss recovery algorithms easier to implement between the two packet</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   types.</td><td> </td><td class="right">   types.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A QUIC endpoint MUST NOT reuse a packet number within the same packet</td><td> </td><td class="right">   A QUIC endpoint MUST NOT reuse a packet number within the same packet</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   number space in one connection (that is, under the same cryptographic</td><td> </td><td class="right">   number space in one connection (that is, under the same cryptographic</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   keys).  If the packet number for sending reaches 2^62 - 1, the sender</td><td> </td><td class="right">   keys).  If the packet number for sending reaches 2^62 - 1, the sender</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   MUST close the connection without sending a CONNECTION_CLOSE frame or</td><td> </td><td class="right">   MUST close the connection without sending a CONNECTION_CLOSE frame or</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-33" class="change"><td></td><th><small>skipping to change at</small><a href="#part-33"><em> page 65, line 49<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-33"><em> page 66, line 5<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">          |             |                      |               |</td><td> </td><td class="right">          |             |                      |               |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">          | 0x1a        | PATH_CHALLENGE       | Section 19.17 |</td><td> </td><td class="right">          | 0x1a        | PATH_CHALLENGE       | Section 19.17 |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">          |             |                      |               |</td><td> </td><td class="right">          |             |                      |               |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">          | 0x1b        | PATH_RESPONSE        | Section 19.18 |</td><td> </td><td class="right">          | 0x1b        | PATH_RESPONSE        | Section 19.18 |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">          |             |                      |               |</td><td> </td><td class="right">          |             |                      |               |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">          | 0x1c - 0x1d | CONNECTION_CLOSE     | Section 19.19 |</td><td> </td><td class="right">          | 0x1c - 0x1d | CONNECTION_CLOSE     | Section 19.19 |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">          +-------------+----------------------+---------------+</td><td> </td><td class="right">          +-------------+----------------------+---------------+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">                           Table 3: Frame Types</td><td> </td><td class="right">                           Table 3: Frame Types</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0125"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   All QUIC frames are <span class="delete">idempotent.</span>  That is, a valid frame does not</td><td> </td><td class="rblock">   All QUIC frames are <span class="insert">idempotent in this version of QUIC.</span>  That is, a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   cause undesirable side effects or errors when received more than</td><td> </td><td class="rblock">   valid frame does not cause undesirable side effects or errors when</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   once.</td><td> </td><td class="rblock">   received more than once.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The Frame Type field uses a variable length integer encoding (see</td><td> </td><td class="right">   The Frame Type field uses a variable length integer encoding (see</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Section 16) with one exception.  To ensure simple and efficient</td><td> </td><td class="right">   Section 16) with one exception.  To ensure simple and efficient</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   implementations of frame parsing, a frame type MUST use the shortest</td><td> </td><td class="right">   implementations of frame parsing, a frame type MUST use the shortest</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   possible encoding.  Though a two-, four- or eight-byte encoding of</td><td> </td><td class="right">   possible encoding.  Though a two-, four- or eight-byte encoding of</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the frame types defined in this document is possible, the Frame Type</td><td> </td><td class="right">   the frame types defined in this document is possible, the Frame Type</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   field for these frames is encoded on a single byte.  For instance,</td><td> </td><td class="right">   field for these frames is encoded on a single byte.  For instance,</td><td class="lineno"></td></tr>
      <tr id="diff0126"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   though <span class="delete">0x4007</span> is a legitimate two-byte encoding for a variable-length</td><td> </td><td class="rblock">   though <span class="insert">0x4001</span> is a legitimate two-byte encoding for a variable-length</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   integer with a value of <span class="delete">7,</span> PING frames are always encoded as a single</td><td> </td><td class="rblock">   integer with a value of <span class="insert">1,</span> PING frames are always encoded as a single</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   byte with the value <span class="delete">0x07.</span>  An endpoint MAY treat the receipt of a</td><td> </td><td class="rblock">   byte with the value <span class="insert">0x01.</span>  An endpoint MAY treat the receipt of a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   frame type that uses a longer encoding than necessary as a connection</td><td> </td><td class="right">   frame type that uses a longer encoding than necessary as a connection</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   error of type PROTOCOL_VIOLATION.</td><td> </td><td class="right">   error of type PROTOCOL_VIOLATION.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">13.  Packetization and Reliability</td><td> </td><td class="right">13.  Packetization and Reliability</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A sender bundles one or more frames in a QUIC packet (see</td><td> </td><td class="right">   A sender bundles one or more frames in a QUIC packet (see</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Section 12.4).</td><td> </td><td class="right">   Section 12.4).</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A sender can minimize per-packet bandwidth and computational costs by</td><td> </td><td class="right">   A sender can minimize per-packet bandwidth and computational costs by</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   bundling as many frames as possible within a QUIC packet.  A sender</td><td> </td><td class="right">   bundling as many frames as possible within a QUIC packet.  A sender</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   MAY wait for a short period of time to bundle multiple frames before</td><td> </td><td class="right">   MAY wait for a short period of time to bundle multiple frames before</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   sending a packet that is not maximally packed, to avoid sending out</td><td> </td><td class="right">   sending a packet that is not maximally packed, to avoid sending out</td><td class="lineno"></td></tr>
      <tr id="diff0127"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   large numbers of small packets.  An implementation <span class="delete">may</span> use knowledge</td><td> </td><td class="rblock">   large numbers of small packets.  An implementation <span class="insert">MAY</span> use knowledge</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   about application sending behavior or heuristics to determine whether</td><td> </td><td class="right">   about application sending behavior or heuristics to determine whether</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   and for how long to wait.  This waiting period is an implementation</td><td> </td><td class="right">   and for how long to wait.  This waiting period is an implementation</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   decision, and an implementation should be careful to delay</td><td> </td><td class="right">   decision, and an implementation should be careful to delay</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   conservatively, since any delay is likely to increase application-</td><td> </td><td class="right">   conservatively, since any delay is likely to increase application-</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   visible latency.</td><td> </td><td class="right">   visible latency.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Stream multiplexing is achieved by interleaving STREAM frames from</td><td> </td><td class="right">   Stream multiplexing is achieved by interleaving STREAM frames from</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   multiple streams into one or more QUIC packets.  A single QUIC packet</td><td> </td><td class="right">   multiple streams into one or more QUIC packets.  A single QUIC packet</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   can include multiple STREAM frames from one or more streams.</td><td> </td><td class="right">   can include multiple STREAM frames from one or more streams.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-34" class="change"><td></td><th><small>skipping to change at</small><a href="#part-34"><em> page 67, line 13<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-34"><em> page 67, line 19<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   processed.  For STREAM frames, this means the data has been enqueued</td><td> </td><td class="right">   processed.  For STREAM frames, this means the data has been enqueued</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   in preparation to be received by the application protocol, but it</td><td> </td><td class="right">   in preparation to be received by the application protocol, but it</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   does not require that data is delivered and consumed.</td><td> </td><td class="right">   does not require that data is delivered and consumed.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Once the packet has been fully processed, a receiver acknowledges</td><td> </td><td class="right">   Once the packet has been fully processed, a receiver acknowledges</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   receipt by sending one or more ACK frames containing the packet</td><td> </td><td class="right">   receipt by sending one or more ACK frames containing the packet</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   number of the received packet.</td><td> </td><td class="right">   number of the received packet.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">13.1.1.  Sending ACK Frames</td><td> </td><td class="right">13.1.1.  Sending ACK Frames</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0128"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">To avoid creating an indefinite feedback loop,</span> an endpoint MUST NOT</td><td> </td><td class="rblock">   <span class="insert">An endpoint MUST NOT send more than one packet containing only</span> an <span class="insert">ACK</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   send an ACK frame in response to a packet containing only ACK or</td><td> </td><td class="rblock"><span class="insert">   frame per received packet that contains frames other than ACK and</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   PADDING frames, even if there are packet gaps which precede the</td><td> </td><td class="rblock"><span class="insert">   PADDING frames.  An</span> endpoint MUST NOT send <span class="insert">a packet containing only</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   received packet.  The endpoint MUST however acknowledge packets</td><td> </td><td class="rblock">   an ACK frame in response to a packet containing only ACK or PADDING</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   containing only ACK or PADDING frames when sending ACK frames in</td><td> </td><td class="rblock">   frames, even if there are packet gaps which precede the received</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   response to other packets.</td><td> </td><td class="rblock">   packet.  <span class="insert">This prevents an indefinite feedback loop of ACKs.</span>  The</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   endpoint MUST however acknowledge packets containing only ACK or</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   PADDING frames when sending ACK frames in response to other packets.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Packets containing PADDING frames are considered to be in flight for</td><td> </td><td class="right">   Packets containing PADDING frames are considered to be in flight for</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   congestion control purposes [QUIC-RECOVERY].  Sending only PADDING</td><td> </td><td class="right">   congestion control purposes [QUIC-RECOVERY].  Sending only PADDING</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   frames might cause the sender to become limited by the congestion</td><td> </td><td class="right">   frames might cause the sender to become limited by the congestion</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   controller (as described in [QUIC-RECOVERY]) with no acknowledgments</td><td> </td><td class="right">   controller (as described in [QUIC-RECOVERY]) with no acknowledgments</td><td class="lineno"></td></tr>
      <tr id="diff0129"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   forthcoming from the receiver.  Therefore, a sender <span class="delete">should</span> ensure</td><td> </td><td class="rblock">   forthcoming from the receiver.  Therefore, a sender <span class="insert">SHOULD</span> ensure</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   that other frames are sent in addition to PADDING frames to elicit</td><td> </td><td class="right">   that other frames are sent in addition to PADDING frames to elicit</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   acknowledgments from the receiver.</td><td> </td><td class="right">   acknowledgments from the receiver.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0130"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">An endpoint MUST NOT send more than one packet containing only an ACK</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   frame per received packet that contains frames other than ACK and</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   PADDING frames.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">                                                                         </td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The receiver's delayed acknowledgment timer SHOULD NOT exceed the</td><td> </td><td class="right">   The receiver's delayed acknowledgment timer SHOULD NOT exceed the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   current RTT estimate or the value it indicates in the "max_ack_delay"</td><td> </td><td class="right">   current RTT estimate or the value it indicates in the "max_ack_delay"</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   transport parameter.  This ensures an acknowledgment is sent at least</td><td> </td><td class="right">   transport parameter.  This ensures an acknowledgment is sent at least</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   once per RTT when packets needing acknowledgement are received.  The</td><td> </td><td class="right">   once per RTT when packets needing acknowledgement are received.  The</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   sender can use the receiver's "max_ack_delay" value in determining</td><td> </td><td class="right">   sender can use the receiver's "max_ack_delay" value in determining</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   timeouts for timer-based retransmission.</td><td> </td><td class="right">   timeouts for timer-based retransmission.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Strategies and implications of the frequency of generating</td><td> </td><td class="right">   Strategies and implications of the frequency of generating</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   acknowledgments are discussed in more detail in [QUIC-RECOVERY].</td><td> </td><td class="right">   acknowledgments are discussed in more detail in [QUIC-RECOVERY].</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0131"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   To limit ACK <span class="delete">Blocks</span> to those that have not yet been received by the</td><td> </td><td class="rblock">   To limit ACK <span class="insert">Ranges (see Section 19.3.1)</span> to those that have not yet</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   sender, the receiver SHOULD track which ACK frames have been</td><td> </td><td class="rblock">   been received by the sender, the receiver SHOULD track which ACK</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   acknowledged by its peer.  <span class="delete">Once an ACK frame has been acknowledged,</span></td><td> </td><td class="rblock">   frames have been acknowledged by its peer.  <span class="insert">The receiver</span> SHOULD</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   the packets it acknowledges</span> SHOULD <span class="delete">NOT be</span> acknowledged <span class="delete">again.</span></td><td> </td><td class="rblock">   <span class="insert">exclude already</span> acknowledged <span class="insert">packets from future ACK frames whenever</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   these packets would unnecessarily contribute to the ACK frame size.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Because ACK frames are not sent in response to ACK-only packets, a</td><td> </td><td class="right">   Because ACK frames are not sent in response to ACK-only packets, a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   receiver that is only sending ACK frames will only receive</td><td> </td><td class="right">   receiver that is only sending ACK frames will only receive</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   acknowledgements for its packets if the sender includes them in</td><td> </td><td class="right">   acknowledgements for its packets if the sender includes them in</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   packets with non-ACK frames.  A sender SHOULD bundle ACK frames with</td><td> </td><td class="right">   packets with non-ACK frames.  A sender SHOULD bundle ACK frames with</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   other frames when possible.</td><td> </td><td class="right">   other frames when possible.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   To limit receiver state or the size of ACK frames, a receiver MAY</td><td> </td><td class="right">   To limit receiver state or the size of ACK frames, a receiver MAY</td><td class="lineno"></td></tr>
      <tr id="diff0132"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   limit the number of ACK <span class="delete">Block</span>s it sends.  A receiver can do this even</td><td> </td><td class="rblock">   limit the number of ACK <span class="insert">Range</span>s it sends.  A receiver can do this even</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   without receiving acknowledgment of its ACK frames, with the</td><td> </td><td class="right">   without receiving acknowledgment of its ACK frames, with the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   knowledge this could cause the sender to unnecessarily retransmit</td><td> </td><td class="right">   knowledge this could cause the sender to unnecessarily retransmit</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   some data.  Standard QUIC [QUIC-RECOVERY] algorithms declare packets</td><td> </td><td class="right">   some data.  Standard QUIC [QUIC-RECOVERY] algorithms declare packets</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   lost after sufficiently newer packets are acknowledged.  Therefore,</td><td> </td><td class="right">   lost after sufficiently newer packets are acknowledged.  Therefore,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the receiver SHOULD repeatedly acknowledge newly received packets in</td><td> </td><td class="right">   the receiver SHOULD repeatedly acknowledge newly received packets in</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   preference to packets received in the past.</td><td> </td><td class="right">   preference to packets received in the past.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0133"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   <span class="insert">An endpoint SHOULD treat receipt of an acknowledgment for a packet it</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   did not send as a connection error of type PROTOCOL_VIOLATION, if it</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   is able to detect the condition.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                         </td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">13.1.2.  ACK Frames and Packet Protection</td><td> </td><td class="right">13.1.2.  ACK Frames and Packet Protection</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   ACK frames MUST only be carried in a packet that has the same packet</td><td> </td><td class="right">   ACK frames MUST only be carried in a packet that has the same packet</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   number space as the packet being ACKed (see Section 12.1).  For</td><td> </td><td class="right">   number space as the packet being ACKed (see Section 12.1).  For</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   instance, packets that are protected with 1-RTT keys MUST be</td><td> </td><td class="right">   instance, packets that are protected with 1-RTT keys MUST be</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   acknowledged in packets that are also protected with 1-RTT keys.</td><td> </td><td class="right">   acknowledged in packets that are also protected with 1-RTT keys.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Packets that a client sends with 0-RTT packet protection MUST be</td><td> </td><td class="right">   Packets that a client sends with 0-RTT packet protection MUST be</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   acknowledged by the server in packets protected by 1-RTT keys.  This</td><td> </td><td class="right">   acknowledged by the server in packets protected by 1-RTT keys.  This</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   can mean that the client is unable to use these acknowledgments if</td><td> </td><td class="right">   can mean that the client is unable to use these acknowledgments if</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the server cryptographic handshake messages are delayed or lost.</td><td> </td><td class="right">   the server cryptographic handshake messages are delayed or lost.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Note that the same limitation applies to other data sent by the</td><td> </td><td class="right">   Note that the same limitation applies to other data sent by the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   server protected by the 1-RTT keys.</td><td> </td><td class="right">   server protected by the 1-RTT keys.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Endpoints SHOULD send acknowledgments for packets containing CRYPTO</td><td> </td><td class="right">   Endpoints SHOULD send acknowledgments for packets containing CRYPTO</td><td class="lineno"></td></tr>
      <tr id="diff0134"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   frames with a reduced delay; see Section <span class="delete">5.3</span>.1 of [QUIC-RECOVERY].</td><td> </td><td class="rblock">   frames with a reduced delay; see Section <span class="insert">6.2</span>.1 of [QUIC-RECOVERY].</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">13.2.  Retransmission of Information</td><td> </td><td class="right">13.2.  Retransmission of Information</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   QUIC packets that are determined to be lost are not retransmitted</td><td> </td><td class="right">   QUIC packets that are determined to be lost are not retransmitted</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   whole.  The same applies to the frames that are contained within lost</td><td> </td><td class="right">   whole.  The same applies to the frames that are contained within lost</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   packets.  Instead, the information that might be carried in frames is</td><td> </td><td class="right">   packets.  Instead, the information that might be carried in frames is</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   sent again in new frames as needed.</td><td> </td><td class="right">   sent again in new frames as needed.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   New frames and packets are used to carry information that is</td><td> </td><td class="right">   New frames and packets are used to carry information that is</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   determined to have been lost.  In general, information is sent again</td><td> </td><td class="right">   determined to have been lost.  In general, information is sent again</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-35" class="change"><td></td><th><small>skipping to change at</small><a href="#part-35"><em> page 69, line 12<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-35"><em> page 69, line 22<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">      stream.  Once an endpoint sends a RESET_STREAM frame, no further</td><td> </td><td class="right">      stream.  Once an endpoint sends a RESET_STREAM frame, no further</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      STREAM frames are needed.</td><td> </td><td class="right">      STREAM frames are needed.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  The most recent set of acknowledgments are sent in ACK frames.  An</td><td> </td><td class="right">   o  The most recent set of acknowledgments are sent in ACK frames.  An</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      ACK frame SHOULD contain all unacknowledged acknowledgments, as</td><td> </td><td class="right">      ACK frame SHOULD contain all unacknowledged acknowledgments, as</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      described in Section 13.1.1.</td><td> </td><td class="right">      described in Section 13.1.1.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Cancellation of stream transmission, as carried in a RESET_STREAM</td><td> </td><td class="right">   o  Cancellation of stream transmission, as carried in a RESET_STREAM</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      frame, is sent until acknowledged or until all stream data is</td><td> </td><td class="right">      frame, is sent until acknowledged or until all stream data is</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      acknowledged by the peer (that is, either the "Reset Recvd" or</td><td> </td><td class="right">      acknowledged by the peer (that is, either the "Reset Recvd" or</td><td class="lineno"></td></tr>
      <tr id="diff0135"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">      "Data Recvd" state is reached on the <span class="delete">send</span> stream).  The content of</td><td> </td><td class="rblock">      "Data Recvd" state is reached on the <span class="insert">sending part of the</span> stream).</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">      a RESET_STREAM frame MUST NOT change when it is sent again.</td><td> </td><td class="rblock">      The content of a RESET_STREAM frame MUST NOT change when it is</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">      sent again.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Similarly, a request to cancel stream transmission, as encoded in</td><td> </td><td class="right">   o  Similarly, a request to cancel stream transmission, as encoded in</td><td class="lineno"></td></tr>
      <tr id="diff0136"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">      a STOP_SENDING frame, is sent until the <span class="delete">receive</span> stream enters</td><td> </td><td class="rblock">      a STOP_SENDING frame, is sent until the <span class="insert">receiving part of the</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">      either a "Data Recvd" or "Reset Recvd" state, see Section 3.5.</td><td> </td><td class="rblock">      stream enters either a "Data Recvd" or "Reset Recvd" state, see</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">      Section 3.5.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Connection close signals, including packets that contain</td><td> </td><td class="right">   o  Connection close signals, including packets that contain</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      CONNECTION_CLOSE frames, are not sent again when packet loss is</td><td> </td><td class="right">      CONNECTION_CLOSE frames, are not sent again when packet loss is</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      detected, but as described in Section 10.</td><td> </td><td class="right">      detected, but as described in Section 10.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  The current connection maximum data is sent in MAX_DATA frames.</td><td> </td><td class="right">   o  The current connection maximum data is sent in MAX_DATA frames.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      An updated value is sent in a MAX_DATA frame if the packet</td><td> </td><td class="right">      An updated value is sent in a MAX_DATA frame if the packet</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      containing the most recently sent MAX_DATA frame is declared lost,</td><td> </td><td class="right">      containing the most recently sent MAX_DATA frame is declared lost,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      or when the endpoint decides to update the limit.  Care is</td><td> </td><td class="right">      or when the endpoint decides to update the limit.  Care is</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      necessary to avoid sending this frame too often as the limit can</td><td> </td><td class="right">      necessary to avoid sending this frame too often as the limit can</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      increase frequently and cause an unnecessarily large number of</td><td> </td><td class="right">      increase frequently and cause an unnecessarily large number of</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      MAX_DATA frames to be sent.</td><td> </td><td class="right">      MAX_DATA frames to be sent.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  The current maximum stream data offset is sent in MAX_STREAM_DATA</td><td> </td><td class="right">   o  The current maximum stream data offset is sent in MAX_STREAM_DATA</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      frames.  Like MAX_DATA, an updated value is sent when the packet</td><td> </td><td class="right">      frames.  Like MAX_DATA, an updated value is sent when the packet</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      containing the most recent MAX_STREAM_DATA frame for a stream is</td><td> </td><td class="right">      containing the most recent MAX_STREAM_DATA frame for a stream is</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      lost or when the limit is updated, with care taken to prevent the</td><td> </td><td class="right">      lost or when the limit is updated, with care taken to prevent the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      frame from being sent too often.  An endpoint SHOULD stop sending</td><td> </td><td class="right">      frame from being sent too often.  An endpoint SHOULD stop sending</td><td class="lineno"></td></tr>
      <tr id="diff0137"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">      MAX_STREAM_DATA frames when the <span class="delete">receive</span> stream enters a "Size</td><td> </td><td class="rblock">      MAX_STREAM_DATA frames when the <span class="insert">receiving part of the</span> stream</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">      Known" state.</td><td> </td><td class="rblock">      enters a "Size Known" state.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  The limit on streams of a given type is sent in MAX_STREAMS</td><td> </td><td class="right">   o  The limit on streams of a given type is sent in MAX_STREAMS</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      frames.  Like MAX_DATA, an updated value is sent when a packet</td><td> </td><td class="right">      frames.  Like MAX_DATA, an updated value is sent when a packet</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      containing the most recent MAX_STREAMS for a stream type frame is</td><td> </td><td class="right">      containing the most recent MAX_STREAMS for a stream type frame is</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      declared lost or when the limit is updated, with care taken to</td><td> </td><td class="right">      declared lost or when the limit is updated, with care taken to</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      prevent the frame from being sent too often.</td><td> </td><td class="right">      prevent the frame from being sent too often.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Blocked signals are carried in DATA_BLOCKED, STREAM_DATA_BLOCKED,</td><td> </td><td class="right">   o  Blocked signals are carried in DATA_BLOCKED, STREAM_DATA_BLOCKED,</td><td class="lineno"></td></tr>
      <tr id="diff0138"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">      and STREAMS_BLOCKED frames.  DATA_BLOCKED <span class="delete">stream</span>s have connection</td><td> </td><td class="rblock">      and STREAMS_BLOCKED frames.  DATA_BLOCKED <span class="insert">frame</span>s have connection</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      scope, STREAM_DATA_BLOCKED frames have stream scope, and</td><td> </td><td class="right">      scope, STREAM_DATA_BLOCKED frames have stream scope, and</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      STREAMS_BLOCKED frames are scoped to a specific stream type.  New</td><td> </td><td class="right">      STREAMS_BLOCKED frames are scoped to a specific stream type.  New</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      frames are sent if packets containing the most recent frame for a</td><td> </td><td class="right">      frames are sent if packets containing the most recent frame for a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      scope is lost, but only while the endpoint is blocked on the</td><td> </td><td class="right">      scope is lost, but only while the endpoint is blocked on the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      corresponding limit.  These frames always include the limit that</td><td> </td><td class="right">      corresponding limit.  These frames always include the limit that</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      is causing blocking at the time that they are transmitted.</td><td> </td><td class="right">      is causing blocking at the time that they are transmitted.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  A liveness or path validation check using PATH_CHALLENGE frames is</td><td> </td><td class="right">   o  A liveness or path validation check using PATH_CHALLENGE frames is</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      sent periodically until a matching PATH_RESPONSE frame is received</td><td> </td><td class="right">      sent periodically until a matching PATH_RESPONSE frame is received</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      or until there is no remaining need for liveness or path</td><td> </td><td class="right">      or until there is no remaining need for liveness or path</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-36" class="change"><td></td><th><small>skipping to change at</small><a href="#part-36"><em> page 70, line 29<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-36"><em> page 70, line 41<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">      RETIRE_CONNECTION_ID frames and retransmitted if the packet</td><td> </td><td class="right">      RETIRE_CONNECTION_ID frames and retransmitted if the packet</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      containing them is lost.</td><td> </td><td class="right">      containing them is lost.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  PING and PADDING frames contain no information, so lost PING or</td><td> </td><td class="right">   o  PING and PADDING frames contain no information, so lost PING or</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      PADDING frames do not require repair.</td><td> </td><td class="right">      PADDING frames do not require repair.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Endpoints SHOULD prioritize retransmission of data over sending new</td><td> </td><td class="right">   Endpoints SHOULD prioritize retransmission of data over sending new</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   data, unless priorities specified by the application indicate</td><td> </td><td class="right">   data, unless priorities specified by the application indicate</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   otherwise (see Section 2.3).</td><td> </td><td class="right">   otherwise (see Section 2.3).</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0139"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   <span class="insert">Even though a sender is encouraged to assemble frames containing up-</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   to-date information every time it sends a packet, it is not forbidden</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   to retransmit copies of frames from lost packets.  A receiver MUST</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   accept packets containing an outdated frame, such as a MAX_DATA frame</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   carrying a smaller maximum data than one found in an older packet.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                         </td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Upon detecting losses, a sender MUST take appropriate congestion</td><td> </td><td class="right">   Upon detecting losses, a sender MUST take appropriate congestion</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   control action.  The details of loss detection and congestion control</td><td> </td><td class="right">   control action.  The details of loss detection and congestion control</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   are described in [QUIC-RECOVERY].</td><td> </td><td class="right">   are described in [QUIC-RECOVERY].</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">13.3.  Explicit Congestion Notification</td><td> </td><td class="right">13.3.  Explicit Congestion Notification</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   QUIC endpoints can use Explicit Congestion Notification (ECN)</td><td> </td><td class="right">   QUIC endpoints can use Explicit Congestion Notification (ECN)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   [RFC3168] to detect and respond to network congestion.  ECN allows a</td><td> </td><td class="right">   [RFC3168] to detect and respond to network congestion.  ECN allows a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   network node to indicate congestion in the network by setting a</td><td> </td><td class="right">   network node to indicate congestion in the network by setting a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   codepoint in the IP header of a packet instead of dropping it.</td><td> </td><td class="right">   codepoint in the IP header of a packet instead of dropping it.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-37" class="change"><td></td><th><small>skipping to change at</small><a href="#part-37"><em> page 71, line 21<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-37"><em> page 71, line 37<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   Section 13.1 and Section 19.3).  Note that this requires being able</td><td> </td><td class="right">   Section 13.1 and Section 19.3).  Note that this requires being able</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   to read the ECN codepoints from the enclosing IP packet, which is not</td><td> </td><td class="right">   to read the ECN codepoints from the enclosing IP packet, which is not</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   possible on all platforms.</td><td> </td><td class="right">   possible on all platforms.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A packet detected by a receiver as a duplicate does not affect the</td><td> </td><td class="right">   A packet detected by a receiver as a duplicate does not affect the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   receiver's local ECN codepoint counts; see (Section 21.7) for</td><td> </td><td class="right">   receiver's local ECN codepoint counts; see (Section 21.7) for</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   relevant security concerns.</td><td> </td><td class="right">   relevant security concerns.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   If an endpoint receives a QUIC packet without an ECT or CE codepoint</td><td> </td><td class="right">   If an endpoint receives a QUIC packet without an ECT or CE codepoint</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   in the IP packet header, it responds per Section 13.1 with an ACK</td><td> </td><td class="right">   in the IP packet header, it responds per Section 13.1 with an ACK</td><td class="lineno"></td></tr>
      <tr id="diff0140"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   frame without increasing any ECN counts.  <span class="delete">i</span>f an endpoint does not</td><td> </td><td class="rblock">   frame without increasing any ECN counts.  <span class="insert">I</span>f an endpoint does not</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   implement ECN support or does not have access to received ECN</td><td> </td><td class="right">   implement ECN support or does not have access to received ECN</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   codepoints, it does not increase ECN counts.</td><td> </td><td class="right">   codepoints, it does not increase ECN counts.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Coalesced packets (see Section 12.2) mean that several packets can</td><td> </td><td class="right">   Coalesced packets (see Section 12.2) mean that several packets can</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   share the same IP header.  The ECN counter for the ECN codepoint</td><td> </td><td class="right">   share the same IP header.  The ECN counter for the ECN codepoint</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   received in the associated IP header are incremented once for each</td><td> </td><td class="right">   received in the associated IP header are incremented once for each</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   QUIC packet, not per enclosing IP packet or UDP datagram.</td><td> </td><td class="right">   QUIC packet, not per enclosing IP packet or UDP datagram.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Each packet number space maintains separate acknowledgement state and</td><td> </td><td class="right">   Each packet number space maintains separate acknowledgement state and</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   separate ECN counts.  For example, if one each of an Initial, 0-RTT,</td><td> </td><td class="right">   separate ECN counts.  For example, if one each of an Initial, 0-RTT,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-38" class="change"><td></td><th><small>skipping to change at</small><a href="#part-38"><em> page 72, line 13<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-38"><em> page 72, line 30<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   a network device that is experiencing congestion.</td><td> </td><td class="right">   a network device that is experiencing congestion.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   If a QUIC packet sent with an ECT codepoint is newly acknowledged by</td><td> </td><td class="right">   If a QUIC packet sent with an ECT codepoint is newly acknowledged by</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the peer in an ACK frame without ECN feedback, the endpoint stops</td><td> </td><td class="right">   the peer in an ACK frame without ECN feedback, the endpoint stops</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   setting ECT codepoints in subsequent IP packets, with the expectation</td><td> </td><td class="right">   setting ECT codepoints in subsequent IP packets, with the expectation</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   that either the network path or the peer no longer supports ECN.</td><td> </td><td class="right">   that either the network path or the peer no longer supports ECN.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Network devices that corrupt or apply non-standard ECN markings might</td><td> </td><td class="right">   Network devices that corrupt or apply non-standard ECN markings might</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   result in reduced throughput or other undesirable side-effects.  To</td><td> </td><td class="right">   result in reduced throughput or other undesirable side-effects.  To</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   reduce this risk, an endpoint uses the following steps to verify the</td><td> </td><td class="right">   reduce this risk, an endpoint uses the following steps to verify the</td><td class="lineno"></td></tr>
      <tr id="diff0141"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   counts it receives in an ACK frame.  <span class="delete">Counts MUST NOT be verified if</span></td><td> </td><td class="rblock">   counts it receives in an ACK frame.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   the ACK frame does not increase the largest received packet number at</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   the endpoint.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  The total increase in ECT(0), ECT(1), and CE counts MUST be no</td><td> </td><td class="right">   o  The total increase in ECT(0), ECT(1), and CE counts MUST be no</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      smaller than the total number of QUIC packets sent with an ECT</td><td> </td><td class="right">      smaller than the total number of QUIC packets sent with an ECT</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      codepoint that are newly acknowledged in this ACK frame.  This</td><td> </td><td class="right">      codepoint that are newly acknowledged in this ACK frame.  This</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      step detects any network remarking from ECT(0), ECT(1), or CE</td><td> </td><td class="right">      step detects any network remarking from ECT(0), ECT(1), or CE</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      codepoints to Not-ECT.</td><td> </td><td class="right">      codepoints to Not-ECT.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Any increase in either ECT(0) or ECT(1) counts, plus any increase</td><td> </td><td class="right">   o  Any increase in either ECT(0) or ECT(1) counts, plus any increase</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      in the CE count, MUST be no smaller than the number of packets</td><td> </td><td class="right">      in the CE count, MUST be no smaller than the number of packets</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      sent with the corresponding ECT codepoint that are newly</td><td> </td><td class="right">      sent with the corresponding ECT codepoint that are newly</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      acknowledged in this ACK frame.  This step detects any erroneous</td><td> </td><td class="right">      acknowledged in this ACK frame.  This step detects any erroneous</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      network remarking from ECT(0) to ECT(1) (or vice versa).</td><td> </td><td class="right">      network remarking from ECT(0) to ECT(1) (or vice versa).</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   An endpoint could miss acknowledgements for a packet when ACK frames</td><td> </td><td class="right">   An endpoint could miss acknowledgements for a packet when ACK frames</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   are lost.  It is therefore possible for the total increase in ECT(0),</td><td> </td><td class="right">   are lost.  It is therefore possible for the total increase in ECT(0),</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   ECT(1), and CE counts to be greater than the number of packets</td><td> </td><td class="right">   ECT(1), and CE counts to be greater than the number of packets</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   acknowledged in an ACK frame.  When this happens, and if verification</td><td> </td><td class="right">   acknowledged in an ACK frame.  When this happens, and if verification</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   succeeds, the local reference counts MUST be increased to match the</td><td> </td><td class="right">   succeeds, the local reference counts MUST be increased to match the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   counts in the ACK frame.</td><td> </td><td class="right">   counts in the ACK frame.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0142"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   <span class="insert">Processing counts out of order can result in verification failure.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   An endpoint SHOULD NOT perform this verification if the ACK frame is</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   received in a packet with packet number lower than a previously</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   received ACK frame.  Verifying based on ACK frames that arrive out of</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   order can result in disabling ECN unnecessarily.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                         </td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Upon successful verification, an endpoint continues to set ECT</td><td> </td><td class="right">   Upon successful verification, an endpoint continues to set ECT</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   codepoints in subsequent packets with the expectation that the path</td><td> </td><td class="right">   codepoints in subsequent packets with the expectation that the path</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   is ECN-capable.</td><td> </td><td class="right">   is ECN-capable.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   If verification fails, then the endpoint ceases setting ECT</td><td> </td><td class="right">   If verification fails, then the endpoint ceases setting ECT</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   codepoints in subsequent IP packets with the expectation that either</td><td> </td><td class="right">   codepoints in subsequent IP packets with the expectation that either</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the network path or the peer does not support ECN.</td><td> </td><td class="right">   the network path or the peer does not support ECN.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   If an endpoint sets ECT codepoints on outgoing IP packets and</td><td> </td><td class="right">   If an endpoint sets ECT codepoints on outgoing IP packets and</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   encounters a retransmission timeout due to the absence of</td><td> </td><td class="right">   encounters a retransmission timeout due to the absence of</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-39" class="change"><td></td><th><small>skipping to change at</small><a href="#part-39"><em> page 73, line 10<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-39"><em> page 73, line 31<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   ECT codepoints in subsequent packets.  Doing so allows the connection</td><td> </td><td class="right">   ECT codepoints in subsequent packets.  Doing so allows the connection</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   to be resilient to network elements that corrupt ECN codepoints in</td><td> </td><td class="right">   to be resilient to network elements that corrupt ECN codepoints in</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the IP header or drop packets with ECT or CE codepoints in the IP</td><td> </td><td class="right">   the IP header or drop packets with ECT or CE codepoints in the IP</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   header.</td><td> </td><td class="right">   header.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">14.  Packet Size</td><td> </td><td class="right">14.  Packet Size</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The QUIC packet size includes the QUIC header and protected payload,</td><td> </td><td class="right">   The QUIC packet size includes the QUIC header and protected payload,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   but not the UDP or IP header.</td><td> </td><td class="right">   but not the UDP or IP header.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0143"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Clients MUST ensure they send the first Initial packet in single IP</td><td> </td><td class="rblock">   Clients MUST ensure they send the first Initial packet in <span class="insert">a </span>single IP</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   packet.  Similarly, the first Initial packet sent after receiving a</td><td> </td><td class="right">   packet.  Similarly, the first Initial packet sent after receiving a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Retry packet MUST be sent in a single IP packet.</td><td> </td><td class="right">   Retry packet MUST be sent in a single IP packet.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The payload of a UDP datagram carrying the first Initial packet MUST</td><td> </td><td class="right">   The payload of a UDP datagram carrying the first Initial packet MUST</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   be expanded to at least 1200 bytes, by adding PADDING frames to the</td><td> </td><td class="right">   be expanded to at least 1200 bytes, by adding PADDING frames to the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Initial packet and/or by combining the Initial packet with a 0-RTT</td><td> </td><td class="right">   Initial packet and/or by combining the Initial packet with a 0-RTT</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   packet (see Section 12.2).  Sending a UDP datagram of this size</td><td> </td><td class="right">   packet (see Section 12.2).  Sending a UDP datagram of this size</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   ensures that the network path supports a reasonable Maximum</td><td> </td><td class="right">   ensures that the network path supports a reasonable Maximum</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Transmission Unit (MTU), and helps reduce the amplitude of</td><td> </td><td class="right">   Transmission Unit (MTU), and helps reduce the amplitude of</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   amplification attacks caused by server responses toward an unverified</td><td> </td><td class="right">   amplification attacks caused by server responses toward an unverified</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-40" class="change"><td></td><th><small>skipping to change at</small><a href="#part-40"><em> page 78, line 7<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-40"><em> page 78, line 22<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   integers, but do not use this encoding.</td><td> </td><td class="right">   integers, but do not use this encoding.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">17.  Packet Formats</td><td> </td><td class="right">17.  Packet Formats</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   All numeric values are encoded in network byte order (that is, big-</td><td> </td><td class="right">   All numeric values are encoded in network byte order (that is, big-</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   endian) and all field sizes are in bits.  Hexadecimal notation is</td><td> </td><td class="right">   endian) and all field sizes are in bits.  Hexadecimal notation is</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   used for describing the value of fields.</td><td> </td><td class="right">   used for describing the value of fields.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">17.1.  Packet Number Encoding and Decoding</td><td> </td><td class="right">17.1.  Packet Number Encoding and Decoding</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0144"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Packet numbers in long <span class="delete">and</span> short packet <span class="delete">headers</span> are encoded in 1 to 4</td><td> </td><td class="rblock">   Packet numbers <span class="insert">are integers in the range 0 to 2^62-1 (Section 12.3).</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   bytes.  The number of bits required to represent the packet number is</td><td> </td><td class="rblock"><span class="insert">   When present</span> in long <span class="insert">or</span> short packet <span class="insert">headers, they</span> are encoded in 1</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   reduced by including the least significant bits of the packet number.</td><td> </td><td class="rblock">   to 4 bytes.  The number of bits required to represent the packet</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   number is reduced by including the least significant bits of the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   packet number.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The encoded packet number is protected as described in Section 5.4 of</td><td> </td><td class="right">   The encoded packet number is protected as described in Section 5.4 of</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   [QUIC-TLS].</td><td> </td><td class="right">   [QUIC-TLS].</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The sender MUST use a packet number size able to represent more than</td><td> </td><td class="right">   The sender MUST use a packet number size able to represent more than</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   twice as large a range than the difference between the largest</td><td> </td><td class="right">   twice as large a range than the difference between the largest</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   acknowledged packet and packet number being sent.  A peer receiving</td><td> </td><td class="right">   acknowledged packet and packet number being sent.  A peer receiving</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the packet will then correctly decode the packet number, unless the</td><td> </td><td class="right">   the packet will then correctly decode the packet number, unless the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   packet is delayed in transit such that it arrives after many higher-</td><td> </td><td class="right">   packet is delayed in transit such that it arrives after many higher-</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   numbered packets have been received.  An endpoint SHOULD use a large</td><td> </td><td class="right">   numbered packets have been received.  An endpoint SHOULD use a large</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-41" class="change"><td></td><th><small>skipping to change at</small><a href="#part-41"><em> page 79, line 5<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-41"><em> page 79, line 18<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Once header protection is removed, the packet number is decoded by</td><td> </td><td class="right">   Once header protection is removed, the packet number is decoded by</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   finding the packet number value that is closest to the next expected</td><td> </td><td class="right">   finding the packet number value that is closest to the next expected</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   packet.  The next expected packet is the highest received packet</td><td> </td><td class="right">   packet.  The next expected packet is the highest received packet</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   number plus one.  For example, if the highest successfully</td><td> </td><td class="right">   number plus one.  For example, if the highest successfully</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   authenticated packet had a packet number of 0xa82f30ea, then a packet</td><td> </td><td class="right">   authenticated packet had a packet number of 0xa82f30ea, then a packet</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   containing a 16-bit value of 0x9b32 will be decoded as 0xa82f9b32.</td><td> </td><td class="right">   containing a 16-bit value of 0x9b32 will be decoded as 0xa82f9b32.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Example pseudo-code for packet number decoding can be found in</td><td> </td><td class="right">   Example pseudo-code for packet number decoding can be found in</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Appendix A.</td><td> </td><td class="right">   Appendix A.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0145"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">17.2.  Long Header Packet</td><td> </td><td class="rblock">17.2.  Long Header Packet<span class="insert">s</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">    0                   1                   2                   3</td><td> </td><td class="right">    0                   1                   2                   3</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</td><td> </td><td class="right">    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr id="diff0146"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   |1|1|T T|<span class="delete">R R|P P</span>|</td><td> </td><td class="rblock">   |1|1|T T|<span class="insert">X X X X</span>|</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                         Version (32)                          |</td><td> </td><td class="right">   |                         Version (32)                          |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |DCIL(4)|SCIL(4)|</td><td> </td><td class="right">   |DCIL(4)|SCIL(4)|</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |               Destination Connection ID (0/32..144)         ...</td><td> </td><td class="right">   |               Destination Connection ID (0/32..144)         ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                 Source Connection ID (0/32..144)            ...</td><td> </td><td class="right">   |                 Source Connection ID (0/32..144)            ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr id="diff0147"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">|                           Length (i)                        ...</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   |                    Packet Number (8/16/24/32)               ...</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   |                          Payload (*)                        ...</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">                   Figure 10: Long Header Packet Format</td><td> </td><td class="right">                   Figure 10: Long Header Packet Format</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Long headers are used for packets that are sent prior to the</td><td> </td><td class="right">   Long headers are used for packets that are sent prior to the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   completion of version negotiation and establishment of 1-RTT keys.</td><td> </td><td class="right">   completion of version negotiation and establishment of 1-RTT keys.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Once both conditions are met, a sender switches to sending packets</td><td> </td><td class="right">   Once both conditions are met, a sender switches to sending packets</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   using the short header (Section 17.3).  The long form allows for</td><td> </td><td class="right">   using the short header (Section 17.3).  The long form allows for</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   special packets - such as the Version Negotiation packet - to be</td><td> </td><td class="right">   special packets - such as the Version Negotiation packet - to be</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   represented in this uniform fixed-length packet format.  Packets that</td><td> </td><td class="right">   represented in this uniform fixed-length packet format.  Packets that</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   use the long header contain the following fields:</td><td> </td><td class="right">   use the long header contain the following fields:</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-42" class="change"><td></td><th><small>skipping to change at</small><a href="#part-42"><em> page 79, line 48<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-42"><em> page 80, line 9<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">      byte) is set to 1 for long headers.</td><td> </td><td class="right">      byte) is set to 1 for long headers.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Fixed Bit:  The next bit (0x40) of byte 0 is set to 1.  Packets</td><td> </td><td class="right">   Fixed Bit:  The next bit (0x40) of byte 0 is set to 1.  Packets</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      containing a zero value for this bit are not valid packets in this</td><td> </td><td class="right">      containing a zero value for this bit are not valid packets in this</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      version and MUST be discarded.</td><td> </td><td class="right">      version and MUST be discarded.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Long Packet Type (T):  The next two bits (those with a mask of 0x30)</td><td> </td><td class="right">   Long Packet Type (T):  The next two bits (those with a mask of 0x30)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      of byte 0 contain a packet type.  Packet types are listed in</td><td> </td><td class="right">      of byte 0 contain a packet type.  Packet types are listed in</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      Table 5.</td><td> </td><td class="right">      Table 5.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0148"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">Reserved</span> Bits <span class="delete">(R):</span>  The <span class="delete">next two</span> bits (those with a mask of <span class="delete">0x0c)</span> of</td><td> </td><td class="rblock">   <span class="insert">Type-Specific</span> Bits <span class="insert">(X):</span>  The <span class="insert">lower four</span> bits (those with a mask of</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">      byte 0 are <span class="delete">reserved.  These bits are protected using header</span></td><td> </td><td class="rblock">      <span class="insert">0x0f)</span> of byte 0 are <span class="insert">type-specific.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">      protection (see Section 5.4 of [QUIC-TLS]).  The value included</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">      prior to protection MUST be set to 0.  An endpoint MUST treat</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">      receipt of a packet that has a non-zero value for these bits after</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">      removing protection as a connection error of type</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">      PROTOCOL_VIOLATION.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   Packet Number Length (P):  The least significant two bits (those with</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">      a mask of 0x03) of byte 0 contain the length of the packet number,</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">      encoded as an unsigned, two-bit integer that is one less than the</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">      length of the packet number field in bytes.  That is, the length</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">      of the packet number field is the value of this field, plus one.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">      These bits are protected using header protection (see Section 5.4</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">      of [QUIC-TLS]).</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Version:  The QUIC Version is a 32-bit field that follows the first</td><td> </td><td class="right">   Version:  The QUIC Version is a 32-bit field that follows the first</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      byte.  This field indicates which version of QUIC is in use and</td><td> </td><td class="right">      byte.  This field indicates which version of QUIC is in use and</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      determines how the rest of the protocol fields are interpreted.</td><td> </td><td class="right">      determines how the rest of the protocol fields are interpreted.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   DCIL and SCIL:  The byte following the version contains the lengths</td><td> </td><td class="right">   DCIL and SCIL:  The byte following the version contains the lengths</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      of the two connection ID fields that follow it.  These lengths are</td><td> </td><td class="right">      of the two connection ID fields that follow it.  These lengths are</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      encoded as two 4-bit unsigned integers.  The Destination</td><td> </td><td class="right">      encoded as two 4-bit unsigned integers.  The Destination</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      Connection ID Length (DCIL) field occupies the 4 high bits of the</td><td> </td><td class="right">      Connection ID Length (DCIL) field occupies the 4 high bits of the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      byte and the Source Connection ID Length (SCIL) field occupies the</td><td> </td><td class="right">      byte and the Source Connection ID Length (SCIL) field occupies the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-43" class="change"><td></td><th><small>skipping to change at</small><a href="#part-43"><em> page 80, line 41<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-43"><em> page 80, line 38<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   Destination Connection ID:  The Destination Connection ID field</td><td> </td><td class="right">   Destination Connection ID:  The Destination Connection ID field</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      follows the connection ID lengths and is either 0 bytes in length</td><td> </td><td class="right">      follows the connection ID lengths and is either 0 bytes in length</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      or between 4 and 18 bytes.  Section 7.2 describes the use of this</td><td> </td><td class="right">      or between 4 and 18 bytes.  Section 7.2 describes the use of this</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      field in more detail.</td><td> </td><td class="right">      field in more detail.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Source Connection ID:  The Source Connection ID field follows the</td><td> </td><td class="right">   Source Connection ID:  The Source Connection ID field follows the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      Destination Connection ID and is either 0 bytes in length or</td><td> </td><td class="right">      Destination Connection ID and is either 0 bytes in length or</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      between 4 and 18 bytes.  Section 7.2 describes the use of this</td><td> </td><td class="right">      between 4 and 18 bytes.  Section 7.2 describes the use of this</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      field in more detail.</td><td> </td><td class="right">      field in more detail.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0149"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">Length:  The length</span> of the <span class="delete">remainder of the packet (that is, the</span></td><td> </td><td class="rblock">   <span class="insert">In this version</span> of <span class="insert">QUIC,</span> the following packet types <span class="insert">with the long</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">      Packet Number and Payload fields) in bytes, encoded as a variable-</span></td><td> </td><td class="rblock"><span class="insert">   header</span> are defined:</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">      length integer (Section 16).</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   Packet Number:  The packet number field is 1 to 4 bytes long.  The</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">      packet number has confidentiality protection separate from packet</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">      protection, as described in Section 5.4 of [QUIC-TLS].  The length</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">      of the packet number field is encoded in the plaintext packet</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">      number.  See Section 17.1 for details.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   Payload:  The payload of the packet.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   The</span> following packet types are defined:</td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0150"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">                 <span class="delete">+------+-----------------+--------------+</span></td><td> </td><td class="rblock">                   <span class="insert">+------+-----------+----------------+</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">                 | Type | Name            | Section      |</td><td> </td><td class="rblock">                   | Type | Name      | Section        |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">                 <span class="delete">+------+-----------------+--------------+</span></td><td> </td><td class="rblock">                   <span class="insert">+------+-----------+----------------+</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">                 |  0x0 | Initial         | Section <span class="delete">17.5</span> |</td><td> </td><td class="rblock">                   |  0x0 | Initial   | Section <span class="insert">17.2.2</span> |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">                 |      |                 |              |</td><td> </td><td class="rblock">                   |      |           |                |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">                 |  0x1 | 0-RTT <span class="delete">Protected</span> | Section <span class="delete">12.1</span> |</td><td> </td><td class="rblock">                   |  0x1 | 0-RTT     | Section <span class="insert">17.2.3</span> |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">                 |      |                 |              |</td><td> </td><td class="rblock">                   |      |           |                |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">                 |  0x2 | Handshake       | Section <span class="delete">17.6</span> |</td><td> </td><td class="rblock">                   |  0x2 | Handshake | Section <span class="insert">17.2.4</span> |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">                 |      |                 |              |</td><td> </td><td class="rblock">                   |      |           |                |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">                 |  0x3 | Retry           | Section <span class="delete">17.7</span> |</td><td> </td><td class="rblock">                   |  0x3 | Retry     | Section <span class="insert">17.2.5</span> |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">                 <span class="delete">+------+-----------------+--------------+</span></td><td> </td><td class="rblock">                   <span class="insert">+------+-----------+----------------+</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">                     Table 5: Long Header Packet Types</td><td> </td><td class="right">                     Table 5: Long Header Packet Types</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The header form bit, connection ID lengths byte, Destination and</td><td> </td><td class="right">   The header form bit, connection ID lengths byte, Destination and</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Source Connection ID fields, and Version fields of a long header</td><td> </td><td class="right">   Source Connection ID fields, and Version fields of a long header</td><td class="lineno"></td></tr>
      <tr id="diff0151"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   packet are version-independent.  The other fields in the first <span class="delete">byte,</span></td><td> </td><td class="rblock">   packet are version-independent.  The other fields in the first <span class="insert">byte</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   plus the Length and Packet Number fields</span> are version-specific.  See</td><td> </td><td class="rblock">   are version-specific.  See [QUIC-INVARIANTS] for details on how</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   [QUIC-INVARIANTS] for details on how packets from different versions</td><td> </td><td class="rblock">   packets from different versions of QUIC are interpreted.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   of QUIC are interpreted.</td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The interpretation of the fields and the payload are specific to a</td><td> </td><td class="right">   The interpretation of the fields and the payload are specific to a</td><td class="lineno"></td></tr>
      <tr id="diff0152"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   version and packet type.  <span class="delete">Type-specific</span> semantics for this version</td><td> </td><td class="rblock">   version and packet type.  <span class="insert">While type-specific</span> semantics for this</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   are described in the following <span class="delete">sections.</span></td><td> </td><td class="rblock">   version are described in the following <span class="insert">sections, several long-header</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock">   packets in this version of <span class="insert">QUIC contain</span> these <span class="insert">additional fields:</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   The end of the packet is determined by the Length field.  The Length</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   field covers both the Packet Number and Payload fields, both of which</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   are confidentiality protected and initially of unknown length.  The</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   length of the Payload field is learned once header protection is</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   removed.  The Length field enables packet coalescing (Section 12.2).</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">17.3.  Short Header Packet</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">    0                   1                   2                   3</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   +-+-+-+-+-+-+-+-+</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   |0|1|S|R|R|K|P P|</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   |                Destination Connection ID (0..144)           ...</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   |                     Packet Number (8/16/24/32)              ...</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   |                     Protected Payload (*)                   ...</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">                   Figure 11: Short Header Packet Format</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   The short header can be used after the version and 1-RTT keys are</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   negotiated.  Packets that use the short header contain the following</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   fields:</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   Header Form:  The most significant bit (0x80) of byte 0 is set to 0</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">      for the short header.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   Fixed Bit:  The next bit (0x40) of byte 0 is set to 1.  Packets</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">      containing a zero value for this bit are not valid</span> packets in this</td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">      version <span class="delete">and MUST be discarded.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   Spin Bit (S):  The sixth bit (0x20) of byte 0 is the Latency Spin</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">      Bit, set as described in [SPIN].</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   Reserved Bits (R):  The next two bits (those with a mask</span> of <span class="delete">0x18) of</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">      byte 0 are reserved.  These bits are protected using header</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">      protection (see Section 5.4 of [QUIC-TLS]).  The value included</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">      prior to protection MUST be set to 0.  An endpoint MUST treat</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">      receipt of a packet that has a non-zero value for</span> these <span class="delete">bits after</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">      removing protection as a connection error of type</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">      PROTOCOL_VIOLATION.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0153"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">Key Phase (K):  The next bit (0x04)</span> of byte 0 <span class="delete">indicates the key</span></td><td> </td><td class="rblock">   <span class="insert">Reserved Bits (R):  Two bits (those with a mask of 0x0c)</span> of byte 0</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">      phase, which allows a recipient of a packet to identify the</span> packet</td><td> </td><td class="rblock">      <span class="insert">are reserved across multiple</span> packet <span class="insert">types.  These bits</span> are</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">      <span class="delete">protection keys that</span> are <span class="delete">used to protect the packet.  See</span></td><td> </td><td class="rblock">      protected using header protection (see Section 5.4 of [QUIC-TLS]).</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">      [QUIC-TLS] for details.  This bit is</span> protected using header</td><td> </td><td class="rblock">      <span class="insert">The value included prior to protection MUST be set to 0.  An</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">      protection (see Section 5.4 of [QUIC-TLS]).</td><td> </td><td class="rblock"><span class="insert">      endpoint MUST treat receipt of a packet that has a non-zero value</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      for these bits after removing protection as a connection error of</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      type PROTOCOL_VIOLATION.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0154"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Packet Number Length (P):  <span class="delete">The</span> least significant two bits (those with</td><td> </td><td class="rblock">   Packet Number Length (P):  <span class="insert">In packet types which contain a Packet</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">      a mask of 0x03) of byte 0 contain the length of the packet number,</td><td> </td><td class="rblock"><span class="insert">      Number field, the</span> least significant two bits (those with a mask of</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">      encoded as an unsigned, two-bit integer that is one less than the</td><td> </td><td class="rblock">      0x03) of byte 0 contain the length of the packet number, encoded</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">      length of the packet number field in bytes.  That is, the length</td><td> </td><td class="rblock">      as an unsigned, two-bit integer that is one less than the length</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">      of the packet number field is the value of this field, plus one.</td><td> </td><td class="rblock">      of the packet number field in bytes.  That is, the length of the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">      These bits are protected using header protection (see Section 5.4</td><td> </td><td class="rblock">      packet number field is the value of this field, plus one.  These</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">      of [QUIC-TLS]).</td><td> </td><td class="rblock">      bits are protected using header protection (see Section 5.4 of</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">      [QUIC-TLS]).</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0155"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">Destination Connection ID:</span>  The <span class="delete">Destination Connection ID is a</span></td><td> </td><td class="rblock">   <span class="insert">Length:</span>  The <span class="insert">length of</span> the <span class="insert">remainder</span> of the <span class="insert">packet (that is, the</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">      connection ID that is chosen by</span> the <span class="delete">intended recipient</span> of the</td><td> </td><td class="rblock"><span class="insert">      Packet Number and Payload fields) in bytes, encoded as a variable-</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">      <span class="delete">packet.  See Section 5.1 for more details.</span></td><td> </td><td class="rblock"><span class="insert">      length integer (Section 16).</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Packet Number:  The packet number field is 1 to 4 bytes long.  The</td><td> </td><td class="right">   Packet Number:  The packet number field is 1 to 4 bytes long.  The</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      packet number has confidentiality protection separate from packet</td><td> </td><td class="right">      packet number has confidentiality protection separate from packet</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      protection, as described in Section 5.4 of [QUIC-TLS].  The length</td><td> </td><td class="right">      protection, as described in Section 5.4 of [QUIC-TLS].  The length</td><td class="lineno"></td></tr>
      <tr id="diff0156"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">      of the packet number field is encoded in Packet Number Length</td><td> </td><td class="rblock">      of the packet number field is encoded in <span class="insert">the</span> Packet Number Length</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">      <span class="delete">field.  See Section 17.1 for details.</span></td><td> </td><td class="rblock">      <span class="insert">bits</span> of <span class="insert">byte 0 (see above).</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   Protected Payload:  Packets with a short header always include a</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">      1-RTT protected payload.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   The header form bit and the connection ID field of a short header</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   packet are version-independent.  The remaining fields are specific to</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   the selected QUIC version.  See [QUIC-INVARIANTS] for details on how</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   packets from different versions</span> of <span class="delete">QUIC are interpreted.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0157"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">17.<span class="delete">4</span>.  Version Negotiation Packet</td><td> </td><td class="rblock">17.<span class="insert">2.1</span>.  Version Negotiation Packet</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0158"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   A Version Negotiation packet is inherently not <span class="delete">version-specific, and</span></td><td> </td><td class="rblock">   A Version Negotiation packet is inherently not <span class="insert">version-specific.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   does not use the long packet header (see Section 17.2).</span>  Upon receipt</td><td> </td><td class="rblock">   Upon receipt by a client, it will be identified as a Version</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   by a client, it <span class="delete">will appear to be a packet using the long header, but</span></td><td> </td><td class="rblock">   Negotiation packet based on the Version field having a value of 0.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   will be identified as a Version Negotiation packet based on the</td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Version field having a value of 0.</td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The Version Negotiation packet is a response to a client packet that</td><td> </td><td class="right">   The Version Negotiation packet is a response to a client packet that</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   contains a version that is not supported by the server, and is only</td><td> </td><td class="right">   contains a version that is not supported by the server, and is only</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   sent by servers.</td><td> </td><td class="right">   sent by servers.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The layout of a Version Negotiation packet is:</td><td> </td><td class="right">   The layout of a Version Negotiation packet is:</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">    0                   1                   2                   3</td><td> </td><td class="right">    0                   1                   2                   3</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</td><td> </td><td class="right">    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-44" class="change"><td></td><th><small>skipping to change at</small><a href="#part-44"><em> page 83, line 46<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-44"><em> page 82, line 42<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                    Supported Version 1 (32)                 ...</td><td> </td><td class="right">   |                    Supported Version 1 (32)                 ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                   [Supported Version 2 (32)]                ...</td><td> </td><td class="right">   |                   [Supported Version 2 (32)]                ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">                                  ...</td><td> </td><td class="right">                                  ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                   [Supported Version N (32)]                ...</td><td> </td><td class="right">   |                   [Supported Version N (32)]                ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0159"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">                   Figure 1<span class="delete">2</span>: Version Negotiation Packet</td><td> </td><td class="rblock">                   Figure 1<span class="insert">1</span>: Version Negotiation Packet</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The value in the Unused field is selected randomly by the server.</td><td> </td><td class="right">   The value in the Unused field is selected randomly by the server.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The Version field of a Version Negotiation packet MUST be set to</td><td> </td><td class="right">   The Version field of a Version Negotiation packet MUST be set to</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   0x00000000.</td><td> </td><td class="right">   0x00000000.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The server MUST include the value from the Source Connection ID field</td><td> </td><td class="right">   The server MUST include the value from the Source Connection ID field</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   of the packet it receives in the Destination Connection ID field.</td><td> </td><td class="right">   of the packet it receives in the Destination Connection ID field.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The value for Source Connection ID MUST be copied from the</td><td> </td><td class="right">   The value for Source Connection ID MUST be copied from the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Destination Connection ID of the received packet, which is initially</td><td> </td><td class="right">   Destination Connection ID of the received packet, which is initially</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-45" class="change"><td></td><th><small>skipping to change at</small><a href="#part-45"><em> page 84, line 26<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-45"><em> page 83, line 22<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A Version Negotiation packet cannot be explicitly acknowledged in an</td><td> </td><td class="right">   A Version Negotiation packet cannot be explicitly acknowledged in an</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   ACK frame by a client.  Receiving another Initial packet implicitly</td><td> </td><td class="right">   ACK frame by a client.  Receiving another Initial packet implicitly</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   acknowledges a Version Negotiation packet.</td><td> </td><td class="right">   acknowledges a Version Negotiation packet.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The Version Negotiation packet does not include the Packet Number and</td><td> </td><td class="right">   The Version Negotiation packet does not include the Packet Number and</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Length fields present in other packets that use the long header form.</td><td> </td><td class="right">   Length fields present in other packets that use the long header form.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Consequently, a Version Negotiation packet consumes an entire UDP</td><td> </td><td class="right">   Consequently, a Version Negotiation packet consumes an entire UDP</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   datagram.</td><td> </td><td class="right">   datagram.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0160"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   <span class="insert">A server MUST NOT send more than one Version Negotiation packet in</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   response to a single UDP datagram.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                         </td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   See Section 6 for a description of the version negotiation process.</td><td> </td><td class="right">   See Section 6 for a description of the version negotiation process.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0161"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">17.<span class="delete">5</span>.  Initial Packet</td><td> </td><td class="rblock">17.<span class="insert">2.2</span>.  Initial Packet</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   An Initial packet uses long headers with a type value of 0x0.  It</td><td> </td><td class="right">   An Initial packet uses long headers with a type value of 0x0.  It</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   carries the first CRYPTO frames sent by the client and server to</td><td> </td><td class="right">   carries the first CRYPTO frames sent by the client and server to</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   perform key exchange, and carries ACKs in either direction.</td><td> </td><td class="right">   perform key exchange, and carries ACKs in either direction.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0162"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">In order to prevent tampering by version-unaware middleboxes, Initial</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   packets are protected with connection- and version-specific keys</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   (Initial keys) as described in [QUIC-TLS].  This protection does not</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   provide confidentiality or integrity against on-path attackers, but</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   provides some level of protection against off-path attackers.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   An Initial packet (shown in Figure 13) has two additional header</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   fields that are added to the Long Header before the Length field.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">                                                                         </td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |1|1| 0 |R R|P P|</td><td> </td><td class="right">   |1|1| 0 |R R|P P|</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                         Version (32)                          |</td><td> </td><td class="right">   |                         Version (32)                          |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |DCIL(4)|SCIL(4)|</td><td> </td><td class="right">   |DCIL(4)|SCIL(4)|</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |               Destination Connection ID (0/32..144)         ...</td><td> </td><td class="right">   |               Destination Connection ID (0/32..144)         ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                 Source Connection ID (0/32..144)            ...</td><td> </td><td class="right">   |                 Source Connection ID (0/32..144)            ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-46" class="change"><td></td><th><small>skipping to change at</small><a href="#part-46"><em> page 85, line 27<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-46"><em> page 84, line 27<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                            Token (*)                        ...</td><td> </td><td class="right">   |                            Token (*)                        ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                           Length (i)                        ...</td><td> </td><td class="right">   |                           Length (i)                        ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                    Packet Number (8/16/24/32)               ...</td><td> </td><td class="right">   |                    Packet Number (8/16/24/32)               ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                          Payload (*)                        ...</td><td> </td><td class="right">   |                          Payload (*)                        ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0163"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">                         Figure 1<span class="delete">3</span>: Initial Packet</td><td> </td><td class="rblock">                         Figure 1<span class="insert">2</span>: Initial Packet</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0164"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">These fields include the token that was previously provided in a</span></td><td> </td><td class="rblock">   <span class="insert">The Initial</span> packet <span class="insert">contains a long header as well as the Length and</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   Retry</span> packet <span class="delete">or NEW_TOKEN frame:</span></td><td> </td><td class="rblock"><span class="insert">   Packet Number fields.  The first byte contains the Reserved and</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Packet Number Length bits.  Between the SCID and Length fields, there</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   are two additional field specific to the Initial packet.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Token Length:  A variable-length integer specifying the length of the</td><td> </td><td class="right">   Token Length:  A variable-length integer specifying the length of the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      Token field, in bytes.  This value is zero if no token is present.</td><td> </td><td class="right">      Token field, in bytes.  This value is zero if no token is present.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      Initial packets sent by the server MUST set the Token Length field</td><td> </td><td class="right">      Initial packets sent by the server MUST set the Token Length field</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      to zero; clients that receive an Initial packet with a non-zero</td><td> </td><td class="right">      to zero; clients that receive an Initial packet with a non-zero</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      Token Length field MUST either discard the packet or generate a</td><td> </td><td class="right">      Token Length field MUST either discard the packet or generate a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      connection error of type PROTOCOL_VIOLATION.</td><td> </td><td class="right">      connection error of type PROTOCOL_VIOLATION.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0165"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Token:  The value of the <span class="delete">token.</span></td><td> </td><td class="rblock">   Token:  The value of the <span class="insert">token that was previously provided in a</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      Retry packet or NEW_TOKEN frame.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Payload:  The payload of the packet.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   In order to prevent tampering by version-unaware middleboxes, Initial</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   packets are protected with connection- and version-specific keys</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   (Initial keys) as described in [QUIC-TLS].  This protection does not</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   provide confidentiality or integrity against on-path attackers, but</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   provides some level of protection against off-path attackers.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The client and server use the Initial packet type for any packet that</td><td> </td><td class="right">   The client and server use the Initial packet type for any packet that</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   contains an initial cryptographic handshake message.  This includes</td><td> </td><td class="right">   contains an initial cryptographic handshake message.  This includes</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   all cases where a new packet containing the initial cryptographic</td><td> </td><td class="right">   all cases where a new packet containing the initial cryptographic</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   message needs to be created, such as the packets sent after receiving</td><td> </td><td class="right">   message needs to be created, such as the packets sent after receiving</td><td class="lineno"></td></tr>
      <tr id="diff0166"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   a Version Negotiation (Section <span class="delete">17.4)</span> or Retry packet (Section <span class="delete">17.7).</span></td><td> </td><td class="rblock">   a Version Negotiation (Section <span class="insert">17.2.1)</span> or Retry packet</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   (Section <span class="insert">17.2.5).</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A server sends its first Initial packet in response to a client</td><td> </td><td class="right">   A server sends its first Initial packet in response to a client</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Initial.  A server may send multiple Initial packets.  The</td><td> </td><td class="right">   Initial.  A server may send multiple Initial packets.  The</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   cryptographic key exchange could require multiple round trips or</td><td> </td><td class="right">   cryptographic key exchange could require multiple round trips or</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   retransmissions of this data.</td><td> </td><td class="right">   retransmissions of this data.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The payload of an Initial packet includes a CRYPTO frame (or frames)</td><td> </td><td class="right">   The payload of an Initial packet includes a CRYPTO frame (or frames)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   containing a cryptographic handshake message, ACK frames, or both.</td><td> </td><td class="right">   containing a cryptographic handshake message, ACK frames, or both.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   PADDING and CONNECTION_CLOSE frames are also permitted.  An endpoint</td><td> </td><td class="right">   PADDING and CONNECTION_CLOSE frames are also permitted.  An endpoint</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   that receives an Initial packet containing other frames can either</td><td> </td><td class="right">   that receives an Initial packet containing other frames can either</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-47" class="change"><td></td><th><small>skipping to change at</small><a href="#part-47"><em> page 86, line 24<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-47"><em> page 85, line 36<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   single UDP datagram (see Section 7).  The first CRYPTO frame sent</td><td> </td><td class="right">   single UDP datagram (see Section 7).  The first CRYPTO frame sent</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   always begins at an offset of 0 (see Section 7).</td><td> </td><td class="right">   always begins at an offset of 0 (see Section 7).</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Note that if the server sends a HelloRetryRequest, the client will</td><td> </td><td class="right">   Note that if the server sends a HelloRetryRequest, the client will</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   send a second Initial packet.  This Initial packet will continue the</td><td> </td><td class="right">   send a second Initial packet.  This Initial packet will continue the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   cryptographic handshake and will contain a CRYPTO frame with an</td><td> </td><td class="right">   cryptographic handshake and will contain a CRYPTO frame with an</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   offset matching the size of the CRYPTO frame sent in the first</td><td> </td><td class="right">   offset matching the size of the CRYPTO frame sent in the first</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Initial packet.  Cryptographic handshake messages subsequent to the</td><td> </td><td class="right">   Initial packet.  Cryptographic handshake messages subsequent to the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   first do not need to fit within a single UDP datagram.</td><td> </td><td class="right">   first do not need to fit within a single UDP datagram.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0167"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">17.<span class="delete">5</span>.1.  Abandoning Initial Packets</td><td> </td><td class="rblock">17.<span class="insert">2.2</span>.1.  Abandoning Initial Packets</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A client stops both sending and processing Initial packets when it</td><td> </td><td class="right">   A client stops both sending and processing Initial packets when it</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   sends its first Handshake packet.  A server stops sending and</td><td> </td><td class="right">   sends its first Handshake packet.  A server stops sending and</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   processing Initial packets when it receives its first Handshake</td><td> </td><td class="right">   processing Initial packets when it receives its first Handshake</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   packet.  Though packets might still be in flight or awaiting</td><td> </td><td class="right">   packet.  Though packets might still be in flight or awaiting</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   acknowledgment, no further Initial packets need to be exchanged</td><td> </td><td class="right">   acknowledgment, no further Initial packets need to be exchanged</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   beyond this point.  Initial packet protection keys are discarded (see</td><td> </td><td class="right">   beyond this point.  Initial packet protection keys are discarded (see</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Section 4.10 of [QUIC-TLS]) along with any loss recovery and</td><td> </td><td class="right">   Section 4.10 of [QUIC-TLS]) along with any loss recovery and</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   congestion control state (see Sections 5.3.1.2 and 6.9 of</td><td> </td><td class="right">   congestion control state (see Sections 5.3.1.2 and 6.9 of</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   [QUIC-RECOVERY]).</td><td> </td><td class="right">   [QUIC-RECOVERY]).</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Any data in CRYPTO frames is discarded - and no longer retransmitted</td><td> </td><td class="right">   Any data in CRYPTO frames is discarded - and no longer retransmitted</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   - when Initial keys are discarded.</td><td> </td><td class="right">   - when Initial keys are discarded.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0168"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">17.<span class="delete">5.2.  Starting Packet Numbers</span></td><td> </td><td class="rblock">17.<span class="insert">2.3.  0-RTT</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0169"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">The first Initial</span> packet <span class="delete">sent by either endpoint contains</span> a <span class="delete">packet</span></td><td> </td><td class="rblock">   <span class="insert">A 0-RTT</span> packet <span class="insert">uses long headers with</span> a <span class="insert">type value</span> of <span class="insert">0x1, followed</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   number</span> of <span class="delete">0.</span>  The <span class="delete">packet number MUST increase monotonically</span></td><td> </td><td class="rblock"><span class="insert">   by the Length and Packet Number fields.</span>  The <span class="insert">first byte contains the</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   thereafter.  Initial packets are in a different packet number space</span></td><td> </td><td class="rblock"><span class="insert">   Reserved and Packet Number Length bits.  It is used to carry "early"</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   to <span class="delete">other packets (see Section 12.3).</span></td><td> </td><td class="rblock"><span class="insert">   data from the client</span> to <span class="insert">the server as part of the first flight, prior</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   to handshake completion.  As part of the TLS handshake, the server</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   can accept or reject this early data.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0170"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">17.5.3.</span>  0-RTT Packet <span class="delete">Numbers</span></td><td> </td><td class="rblock">   <span class="insert">See Section 2.3 of [TLS13] for a discussion of 0-RTT data and its</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   limitations.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   +-+-+-+-+-+-+-+-+</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |1|1| 1 |R R|P P|</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |                         Version (32)                          |</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |DCIL(4)|SCIL(4)|</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |               Destination Connection ID (0/32..144)         ...</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |                 Source Connection ID (0/32..144)            ...</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |                           Length (i)                        ...</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |                    Packet Number (8/16/24/32)               ...</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |                          Payload (*)                        ...</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                         </td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">                               0-RTT Packet</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Packet numbers for 0-RTT protected packets use the same space as</td><td> </td><td class="right">   Packet numbers for 0-RTT protected packets use the same space as</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   1-RTT protected packets.</td><td> </td><td class="right">   1-RTT protected packets.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   After a client receives a Retry or Version Negotiation packet, 0-RTT</td><td> </td><td class="right">   After a client receives a Retry or Version Negotiation packet, 0-RTT</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   packets are likely to have been lost or discarded by the server.  A</td><td> </td><td class="right">   packets are likely to have been lost or discarded by the server.  A</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   client MAY attempt to resend data in 0-RTT packets after it sends a</td><td> </td><td class="right">   client MAY attempt to resend data in 0-RTT packets after it sends a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   new Initial packet.</td><td> </td><td class="right">   new Initial packet.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A client MUST NOT reset the packet number it uses for 0-RTT packets.</td><td> </td><td class="right">   A client MUST NOT reset the packet number it uses for 0-RTT packets.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-48" class="change"><td></td><th><small>skipping to change at</small><a href="#part-48"><em> page 87, line 32<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-48"><em> page 87, line 22<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   that all packets up to the current packet number are in flight,</td><td> </td><td class="right">   that all packets up to the current packet number are in flight,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   starting from a packet number of 0.  Thus, 0-RTT packets could need</td><td> </td><td class="right">   starting from a packet number of 0.  Thus, 0-RTT packets could need</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   to use a longer packet number encoding.</td><td> </td><td class="right">   to use a longer packet number encoding.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A client SHOULD instead generate a fresh cryptographic handshake</td><td> </td><td class="right">   A client SHOULD instead generate a fresh cryptographic handshake</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   message and start packet numbers from 0.  This ensures that new 0-RTT</td><td> </td><td class="right">   message and start packet numbers from 0.  This ensures that new 0-RTT</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   packets will not use the same keys, avoiding any risk of key and</td><td> </td><td class="right">   packets will not use the same keys, avoiding any risk of key and</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   nonce reuse; this also prevents 0-RTT packets from previous handshake</td><td> </td><td class="right">   nonce reuse; this also prevents 0-RTT packets from previous handshake</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   attempts from being accepted as part of the connection.</td><td> </td><td class="right">   attempts from being accepted as part of the connection.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0171"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">17.<span class="delete">6</span>.  Handshake Packet</td><td> </td><td class="rblock">17.<span class="insert">2.4</span>.  Handshake Packet</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0172"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   A Handshake packet uses long headers with a type value of <span class="delete">0x2.</span>  It is</td><td> </td><td class="rblock">   A Handshake packet uses long headers with a type value of <span class="insert">0x2,</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   used to carry acknowledgments and cryptographic handshake messages</td><td> </td><td class="rblock"><span class="insert">   followed by the Length and Packet Number fields.  The first byte</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   from the server and client.</td><td> </td><td class="rblock"><span class="insert">   contains the Reserved and Packet Number Length bits.</span>  It is used to</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   carry acknowledgments and cryptographic handshake messages from the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   server and client.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                         </td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   <span class="insert">+-+-+-+-+-+-+-+-+</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |1|1| 2 |R R|P P|</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |                         Version (32)                          |</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |DCIL(4)|SCIL(4)|</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |               Destination Connection ID (0/32..144)         ...</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |                 Source Connection ID (0/32..144)            ...</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |                           Length (i)                        ...</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |                    Packet Number (8/16/24/32)               ...</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |                          Payload (*)                        ...</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                   Figure 13: Handshake Protected Packet</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Once a client has received a Handshake packet from a server, it uses</td><td> </td><td class="right">   Once a client has received a Handshake packet from a server, it uses</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Handshake packets to send subsequent cryptographic handshake messages</td><td> </td><td class="right">   Handshake packets to send subsequent cryptographic handshake messages</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   and acknowledgments to the server.</td><td> </td><td class="right">   and acknowledgments to the server.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The Destination Connection ID field in a Handshake packet contains a</td><td> </td><td class="right">   The Destination Connection ID field in a Handshake packet contains a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   connection ID that is chosen by the recipient of the packet; the</td><td> </td><td class="right">   connection ID that is chosen by the recipient of the packet; the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Source Connection ID includes the connection ID that the sender of</td><td> </td><td class="right">   Source Connection ID includes the connection ID that the sender of</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the packet wishes to use (see Section 7.2).</td><td> </td><td class="right">   the packet wishes to use (see Section 7.2).</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0173"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">The</span> first Handshake packet sent by a server contains a packet number</td><td> </td><td class="rblock">   <span class="insert">Handshake packets are their own packet number space, and thus the</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   of 0.  <span class="delete">Handshake packets are their own packet number space.  Packet</span></td><td> </td><td class="rblock">   first Handshake packet sent by a server contains a packet number of</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   numbers are incremented normally for other Handshake packets.</span></td><td> </td><td class="rblock">   0.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The payload of this packet contains CRYPTO frames and could contain</td><td> </td><td class="right">   The payload of this packet contains CRYPTO frames and could contain</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   PADDING, or ACK frames.  Handshake packets MAY contain</td><td> </td><td class="right">   PADDING, or ACK frames.  Handshake packets MAY contain</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   CONNECTION_CLOSE frames.  Endpoints MUST treat receipt of Handshake</td><td> </td><td class="right">   CONNECTION_CLOSE frames.  Endpoints MUST treat receipt of Handshake</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   packets with other frames as a connection error.</td><td> </td><td class="right">   packets with other frames as a connection error.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0174"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Like Initial packets (see Section 17.<span class="delete">5</span>.1), data in CRYPTO frames at</td><td> </td><td class="rblock">   Like Initial packets (see Section 17.<span class="insert">2.2</span>.1), data in CRYPTO frames at</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the Handshake encryption level is discarded - and no longer</td><td> </td><td class="right">   the Handshake encryption level is discarded - and no longer</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   retransmitted - when Handshake protection keys are discarded.</td><td> </td><td class="right">   retransmitted - when Handshake protection keys are discarded.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0175"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">17.<span class="delete">7</span>.  Retry Packet</td><td> </td><td class="rblock">17.<span class="insert">2.5</span>.  Retry Packet</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A Retry packet uses a long packet header with a type value of 0x3.</td><td> </td><td class="right">   A Retry packet uses a long packet header with a type value of 0x3.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   It carries an address validation token created by the server.  It is</td><td> </td><td class="right">   It carries an address validation token created by the server.  It is</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   used by a server that wishes to perform a stateless retry (see</td><td> </td><td class="right">   used by a server that wishes to perform a stateless retry (see</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Section 8.1).</td><td> </td><td class="right">   Section 8.1).</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">    0                   1                   2                   3</td><td> </td><td class="right">    0                   1                   2                   3</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</td><td> </td><td class="right">    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr id="diff0176"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   |1|1| 3 |<span class="delete">ODCIL(4</span>|</td><td> </td><td class="rblock">   |1|1| 3 |<span class="insert"> ODCIL </span>|</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                         Version (32)                          |</td><td> </td><td class="right">   |                         Version (32)                          |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |DCIL(4)|SCIL(4)|</td><td> </td><td class="right">   |DCIL(4)|SCIL(4)|</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |               Destination Connection ID (0/32..144)         ...</td><td> </td><td class="right">   |               Destination Connection ID (0/32..144)         ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                 Source Connection ID (0/32..144)            ...</td><td> </td><td class="right">   |                 Source Connection ID (0/32..144)            ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |          Original Destination Connection ID (0/32..144)     ...</td><td> </td><td class="right">   |          Original Destination Connection ID (0/32..144)     ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                        Retry Token (*)                      ...</td><td> </td><td class="right">   |                        Retry Token (*)                      ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">                          Figure 14: Retry Packet</td><td> </td><td class="right">                          Figure 14: Retry Packet</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0177"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   A Retry packet (shown in Figure 14) <span class="delete">only uses the invariant portion</span></td><td> </td><td class="rblock">   A Retry packet (shown in Figure 14) does not contain any protected</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   of the long packet header [QUIC-INVARIANTS]; that is, the fields up</span></td><td> </td><td class="rblock">   fields.  <span class="insert">In addition to</span> the long <span class="insert">header, it contains these additional</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   to and including the Destination and Source Connection ID fields.  A</span></td><td> </td><td class="rblock"><span class="insert">   fields:</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   Retry packet</span> does not contain any protected fields.  <span class="delete">Like Version</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   Negotiation, a Retry packet contains</span> the long <span class="delete">header including the</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   connection IDs, but omits the Length, Packet Number, and Payload</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   fields.  These are replaced with:</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   ODCIL:  The four least-significant bits of the first byte of a Retry</td><td> </td><td class="right">   ODCIL:  The four least-significant bits of the first byte of a Retry</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      packet are not protected as they are for other packets with the</td><td> </td><td class="right">      packet are not protected as they are for other packets with the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      long header, because Retry packets don't contain a protected</td><td> </td><td class="right">      long header, because Retry packets don't contain a protected</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      payload.  These bits instead encode the length of the Original</td><td> </td><td class="right">      payload.  These bits instead encode the length of the Original</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      Destination Connection ID field.  The length uses the same</td><td> </td><td class="right">      Destination Connection ID field.  The length uses the same</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      encoding as the DCIL and SCIL fields.</td><td> </td><td class="right">      encoding as the DCIL and SCIL fields.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Original Destination Connection ID:  The Original Destination</td><td> </td><td class="right">   Original Destination Connection ID:  The Original Destination</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      Connection ID contains the value of the Destination Connection ID</td><td> </td><td class="right">      Connection ID contains the value of the Destination Connection ID</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-49" class="change"><td></td><th><small>skipping to change at</small><a href="#part-49"><em> page 89, line 28<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-49"><em> page 89, line 33<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The server includes a connection ID of its choice in the Source</td><td> </td><td class="right">   The server includes a connection ID of its choice in the Source</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Connection ID field.  This value MUST not be equal to the Destination</td><td> </td><td class="right">   Connection ID field.  This value MUST not be equal to the Destination</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Connection ID field of the packet sent by the client.  The client</td><td> </td><td class="right">   Connection ID field of the packet sent by the client.  The client</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   MUST use this connection ID in the Destination Connection ID of</td><td> </td><td class="right">   MUST use this connection ID in the Destination Connection ID of</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   subsequent packets that it sends.</td><td> </td><td class="right">   subsequent packets that it sends.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A server MAY send Retry packets in response to Initial and 0-RTT</td><td> </td><td class="right">   A server MAY send Retry packets in response to Initial and 0-RTT</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   packets.  A server can either discard or buffer 0-RTT packets that it</td><td> </td><td class="right">   packets.  A server can either discard or buffer 0-RTT packets that it</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   receives.  A server can send multiple Retry packets as it receives</td><td> </td><td class="right">   receives.  A server can send multiple Retry packets as it receives</td><td class="lineno"></td></tr>
      <tr id="diff0178"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Initial or 0-RTT packets.</td><td> </td><td class="rblock">   Initial or 0-RTT packets.  <span class="insert">A server MUST NOT send more than one Retry</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   packet in response to a single UDP datagram.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A client MUST accept and process at most one Retry packet for each</td><td> </td><td class="right">   A client MUST accept and process at most one Retry packet for each</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   connection attempt.  After the client has received and processed an</td><td> </td><td class="right">   connection attempt.  After the client has received and processed an</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Initial or Retry packet from the server, it MUST discard any</td><td> </td><td class="right">   Initial or Retry packet from the server, it MUST discard any</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   subsequent Retry packets that it receives.</td><td> </td><td class="right">   subsequent Retry packets that it receives.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Clients MUST discard Retry packets that contain an Original</td><td> </td><td class="right">   Clients MUST discard Retry packets that contain an Original</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Destination Connection ID field that does not match the Destination</td><td> </td><td class="right">   Destination Connection ID field that does not match the Destination</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Connection ID from its Initial packet.  This prevents an off-path</td><td> </td><td class="right">   Connection ID from its Initial packet.  This prevents an off-path</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   attacker from injecting a Retry packet.</td><td> </td><td class="right">   attacker from injecting a Retry packet.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-50" class="change"><td></td><th><small>skipping to change at</small><a href="#part-50"><em> page 90, line 16<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-50"><em> page 90, line 21<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   token values from the Retry packet (see Section 7.2).  Aside from</td><td> </td><td class="right">   token values from the Retry packet (see Section 7.2).  Aside from</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   this, the Initial packet sent by the client is subject to the same</td><td> </td><td class="right">   this, the Initial packet sent by the client is subject to the same</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   restrictions as the first Initial packet.  A client can either reuse</td><td> </td><td class="right">   restrictions as the first Initial packet.  A client can either reuse</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the cryptographic handshake message or construct a new one at its</td><td> </td><td class="right">   the cryptographic handshake message or construct a new one at its</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   discretion.</td><td> </td><td class="right">   discretion.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A client MAY attempt 0-RTT after receiving a Retry packet by sending</td><td> </td><td class="right">   A client MAY attempt 0-RTT after receiving a Retry packet by sending</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   0-RTT packets to the connection ID provided by the server.  A client</td><td> </td><td class="right">   0-RTT packets to the connection ID provided by the server.  A client</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   that sends additional 0-RTT packets without constructing a new</td><td> </td><td class="right">   that sends additional 0-RTT packets without constructing a new</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   cryptographic handshake message MUST NOT reset the packet number to 0</td><td> </td><td class="right">   cryptographic handshake message MUST NOT reset the packet number to 0</td><td class="lineno"></td></tr>
      <tr id="diff0179"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   after a Retry packet, see Section 17.<span class="delete">5</span>.3.</td><td> </td><td class="rblock">   after a Retry packet, see Section 17.<span class="insert">2</span>.3.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A server acknowledges the use of a Retry packet for a connection</td><td> </td><td class="right">   A server acknowledges the use of a Retry packet for a connection</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   using the original_connection_id transport parameter (see</td><td> </td><td class="right">   using the original_connection_id transport parameter (see</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Section 18.1).  If the server sends a Retry packet, it MUST include</td><td> </td><td class="right">   Section 18.1).  If the server sends a Retry packet, it MUST include</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the value of the Original Destination Connection ID field of the</td><td> </td><td class="right">   the value of the Original Destination Connection ID field of the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Retry packet (that is, the Destination Connection ID field from the</td><td> </td><td class="right">   Retry packet (that is, the Destination Connection ID field from the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   client's first Initial packet) in the transport parameter.</td><td> </td><td class="right">   client's first Initial packet) in the transport parameter.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0180"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   If the client received and processed a Retry packet, it <span class="delete">validates</span></td><td> </td><td class="rblock">   If the client received and processed a Retry packet, it <span class="insert">MUST validate</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   that the original_connection_id transport parameter is present and</td><td> </td><td class="right">   that the original_connection_id transport parameter is present and</td><td class="lineno"></td></tr>
      <tr id="diff0181"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   correct; otherwise, it <span class="delete">validates</span> that the transport parameter is</td><td> </td><td class="rblock">   correct; otherwise, it <span class="insert">MUST validate</span> that the transport parameter is</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   absent.  A client MUST treat a failed validation as a connection</td><td> </td><td class="right">   absent.  A client MUST treat a failed validation as a connection</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   error of type TRANSPORT_PARAMETER_ERROR.</td><td> </td><td class="right">   error of type TRANSPORT_PARAMETER_ERROR.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A Retry packet does not include a packet number and cannot be</td><td> </td><td class="right">   A Retry packet does not include a packet number and cannot be</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   explicitly acknowledged by a client.</td><td> </td><td class="right">   explicitly acknowledged by a client.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0182"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">17.3.  Short Header Packets</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   This version of QUIC defines a single packet type which uses the</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   short packet header.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">    0                   1                   2                   3</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   +-+-+-+-+-+-+-+-+</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |0|1|S|R|R|K|P P|</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |                Destination Connection ID (0..144)           ...</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |                     Packet Number (8/16/24/32)              ...</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |                     Protected Payload (*)                   ...</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                   Figure 15: Short Header Packet Format</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   The short header can be used after the version and 1-RTT keys are</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   negotiated.  Packets that use the short header contain the following</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   fields:</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Header Form:  The most significant bit (0x80) of byte 0 is set to 0</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      for the short header.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Fixed Bit:  The next bit (0x40) of byte 0 is set to 1.  Packets</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      containing a zero value for this bit are not valid packets in this</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      version and MUST be discarded.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Spin Bit (S):  The sixth bit (0x20) of byte 0 is the Latency Spin</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      Bit, set as described in [SPIN].</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Reserved Bits (R):  The next two bits (those with a mask of 0x18) of</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      byte 0 are reserved.  These bits are protected using header</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      protection (see Section 5.4 of [QUIC-TLS]).  The value included</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      prior to protection MUST be set to 0.  An endpoint MUST treat</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      receipt of a packet that has a non-zero value for these bits after</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      removing protection as a connection error of type</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      PROTOCOL_VIOLATION.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Key Phase (K):  The next bit (0x04) of byte 0 indicates the key</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      phase, which allows a recipient of a packet to identify the packet</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      protection keys that are used to protect the packet.  See</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      [QUIC-TLS] for details.  This bit is protected using header</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      protection (see Section 5.4 of [QUIC-TLS]).</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Packet Number Length (P):  The least significant two bits (those with</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      a mask of 0x03) of byte 0 contain the length of the packet number,</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      encoded as an unsigned, two-bit integer that is one less than the</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      length of the packet number field in bytes.  That is, the length</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      of the packet number field is the value of this field, plus one.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      These bits are protected using header protection (see Section 5.4</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      of [QUIC-TLS]).</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Destination Connection ID:  The Destination Connection ID is a</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      connection ID that is chosen by the intended recipient of the</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      packet.  See Section 5.1 for more details.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Packet Number:  The packet number field is 1 to 4 bytes long.  The</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      packet number has confidentiality protection separate from packet</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      protection, as described in Section 5.4 of [QUIC-TLS].  The length</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      of the packet number field is encoded in Packet Number Length</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      field.  See Section 17.1 for details.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Protected Payload:  Packets with a short header always include a</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      1-RTT protected payload.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   The header form bit and the connection ID field of a short header</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   packet are version-independent.  The remaining fields are specific to</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   the selected QUIC version.  See [QUIC-INVARIANTS] for details on how</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   packets from different versions of QUIC are interpreted.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                         </td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">18.  Transport Parameter Encoding</td><td> </td><td class="right">18.  Transport Parameter Encoding</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The format of the transport parameters is the TransportParameters</td><td> </td><td class="right">   The format of the transport parameters is the TransportParameters</td><td class="lineno"></td></tr>
      <tr id="diff0183"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   struct from Figure 1<span class="delete">5</span>.  This is described using the presentation</td><td> </td><td class="rblock">   struct from Figure 1<span class="insert">6</span>.  This is described using the presentation</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   language from Section 3 of [TLS13].</td><td> </td><td class="right">   language from Section 3 of [TLS13].</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      uint32 QuicVersion;</td><td> </td><td class="right">      uint32 QuicVersion;</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      enum {</td><td> </td><td class="right">      enum {</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">         original_connection_id(0),</td><td> </td><td class="right">         original_connection_id(0),</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">         idle_timeout(1),</td><td> </td><td class="right">         idle_timeout(1),</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">         stateless_reset_token(2),</td><td> </td><td class="right">         stateless_reset_token(2),</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">         max_packet_size(3),</td><td> </td><td class="right">         max_packet_size(3),</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">         initial_max_data(4),</td><td> </td><td class="right">         initial_max_data(4),</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-51" class="change"><td></td><th><small>skipping to change at</small><a href="#part-51"><em> page 91, line 42<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-51"><em> page 93, line 42<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">            case client_hello:</td><td> </td><td class="right">            case client_hello:</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">               QuicVersion initial_version;</td><td> </td><td class="right">               QuicVersion initial_version;</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">            case encrypted_extensions:</td><td> </td><td class="right">            case encrypted_extensions:</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">               QuicVersion negotiated_version;</td><td> </td><td class="right">               QuicVersion negotiated_version;</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">               QuicVersion supported_versions&lt;4..2^8-4&gt;;</td><td> </td><td class="right">               QuicVersion supported_versions&lt;4..2^8-4&gt;;</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">         };</td><td> </td><td class="right">         };</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">         TransportParameter parameters&lt;0..2^16-1&gt;;</td><td> </td><td class="right">         TransportParameter parameters&lt;0..2^16-1&gt;;</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      } TransportParameters;</td><td> </td><td class="right">      } TransportParameters;</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0184"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">               Figure 1<span class="delete">5</span>: Definition of TransportParameters</td><td> </td><td class="rblock">               Figure 1<span class="insert">6</span>: Definition of TransportParameters</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The "extension_data" field of the quic_transport_parameters extension</td><td> </td><td class="right">   The "extension_data" field of the quic_transport_parameters extension</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   defined in [QUIC-TLS] contains a TransportParameters value.  TLS</td><td> </td><td class="right">   defined in [QUIC-TLS] contains a TransportParameters value.  TLS</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   encoding rules are therefore used to describe the encoding of</td><td> </td><td class="right">   encoding rules are therefore used to describe the encoding of</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   transport parameters.</td><td> </td><td class="right">   transport parameters.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   QUIC encodes transport parameters into a sequence of bytes, which are</td><td> </td><td class="right">   QUIC encodes transport parameters into a sequence of bytes, which are</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   then included in the cryptographic handshake.</td><td> </td><td class="right">   then included in the cryptographic handshake.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">18.1.  Transport Parameter Definitions</td><td> </td><td class="right">18.1.  Transport Parameter Definitions</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-52" class="change"><td></td><th><small>skipping to change at</small><a href="#part-52"><em> page 92, line 24<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-52"><em> page 94, line 24<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The following transport parameters are defined:</td><td> </td><td class="right">   The following transport parameters are defined:</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   original_connection_id (0x0000):  The value of the Destination</td><td> </td><td class="right">   original_connection_id (0x0000):  The value of the Destination</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      Connection ID field from the first Initial packet sent by the</td><td> </td><td class="right">      Connection ID field from the first Initial packet sent by the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      client.  This transport parameter is only sent by a server.  A</td><td> </td><td class="right">      client.  This transport parameter is only sent by a server.  A</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      server MUST include the original_connection_id transport parameter</td><td> </td><td class="right">      server MUST include the original_connection_id transport parameter</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      if it sent a Retry packet.</td><td> </td><td class="right">      if it sent a Retry packet.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   idle_timeout (0x0001):  The idle timeout is a value in seconds that</td><td> </td><td class="right">   idle_timeout (0x0001):  The idle timeout is a value in seconds that</td><td class="lineno"></td></tr>
      <tr id="diff0185"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">      is encoded as an <span class="delete">integer.</span>  If this parameter is absent or zero</td><td> </td><td class="rblock">      is encoded as an <span class="insert">integer, see (Section 10.2).</span>  If this parameter</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">      then the idle timeout is disabled.</td><td> </td><td class="rblock">      is absent or zero then the idle timeout is disabled.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   stateless_reset_token (0x0002):  A stateless reset token is used in</td><td> </td><td class="right">   stateless_reset_token (0x0002):  A stateless reset token is used in</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      verifying a stateless reset, see Section 10.4.  This parameter is</td><td> </td><td class="right">      verifying a stateless reset, see Section 10.4.  This parameter is</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      a sequence of 16 bytes.  This transport parameter is only sent by</td><td> </td><td class="right">      a sequence of 16 bytes.  This transport parameter is only sent by</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      a server.</td><td> </td><td class="right">      a server.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   max_packet_size (0x0003):  The maximum packet size parameter is an</td><td> </td><td class="right">   max_packet_size (0x0003):  The maximum packet size parameter is an</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      integer value that limits the size of packets that the endpoint is</td><td> </td><td class="right">      integer value that limits the size of packets that the endpoint is</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      willing to receive.  This indicates that packets larger than this</td><td> </td><td class="right">      willing to receive.  This indicates that packets larger than this</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      limit will be dropped.  The default for this parameter is the</td><td> </td><td class="right">      limit will be dropped.  The default for this parameter is the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-53" class="change"><td></td><th><small>skipping to change at</small><a href="#part-53"><em> page 93, line 18<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-53"><em> page 95, line 18<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">      integer value specifying the initial flow control limit for peer-</td><td> </td><td class="right">      integer value specifying the initial flow control limit for peer-</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      initiated bidirectional streams.  This limit applies to newly</td><td> </td><td class="right">      initiated bidirectional streams.  This limit applies to newly</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      created bidirectional streams opened by the endpoint that receives</td><td> </td><td class="right">      created bidirectional streams opened by the endpoint that receives</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      the transport parameter.  In client transport parameters, this</td><td> </td><td class="right">      the transport parameter.  In client transport parameters, this</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      applies to streams with an identifier with the least significant</td><td> </td><td class="right">      applies to streams with an identifier with the least significant</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      two bits set to 0x1; in server transport parameters, this applies</td><td> </td><td class="right">      two bits set to 0x1; in server transport parameters, this applies</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      to streams with the least significant two bits set to 0x0.</td><td> </td><td class="right">      to streams with the least significant two bits set to 0x0.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   initial_max_stream_data_uni (0x0007):  This parameter is an integer</td><td> </td><td class="right">   initial_max_stream_data_uni (0x0007):  This parameter is an integer</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      value specifying the initial flow control limit for unidirectional</td><td> </td><td class="right">      value specifying the initial flow control limit for unidirectional</td><td class="lineno"></td></tr>
      <tr id="diff0186"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">      streams.  This limit applies to newly created <span class="delete">b</span>idirectional</td><td> </td><td class="rblock">      streams.  This limit applies to newly created <span class="insert">un</span>idirectional</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      streams opened by the endpoint that receives the transport</td><td> </td><td class="right">      streams opened by the endpoint that receives the transport</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      parameter.  In client transport parameters, this applies to</td><td> </td><td class="right">      parameter.  In client transport parameters, this applies to</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      streams with an identifier with the least significant two bits set</td><td> </td><td class="right">      streams with an identifier with the least significant two bits set</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      to 0x3; in server transport parameters, this applies to streams</td><td> </td><td class="right">      to 0x3; in server transport parameters, this applies to streams</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      with the least significant two bits set to 0x2.</td><td> </td><td class="right">      with the least significant two bits set to 0x2.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   initial_max_streams_bidi (0x0008):  The initial maximum bidirectional</td><td> </td><td class="right">   initial_max_streams_bidi (0x0008):  The initial maximum bidirectional</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      streams parameter is an integer value that contains the initial</td><td> </td><td class="right">      streams parameter is an integer value that contains the initial</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      maximum number of bidirectional streams the peer may initiate.  If</td><td> </td><td class="right">      maximum number of bidirectional streams the peer may initiate.  If</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      this parameter is absent or zero, the peer cannot open</td><td> </td><td class="right">      this parameter is absent or zero, the peer cannot open</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-54" class="change"><td></td><th><small>skipping to change at</small><a href="#part-54"><em> page 94, line 7<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-54"><em> page 96, line 7<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">      value is also used for ACK frames that are sent in Initial and</td><td> </td><td class="right">      value is also used for ACK frames that are sent in Initial and</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      Handshake packets.  Values above 20 are invalid.</td><td> </td><td class="right">      Handshake packets.  Values above 20 are invalid.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   max_ack_delay (0x000b):  The maximum ACK delay is an integer value</td><td> </td><td class="right">   max_ack_delay (0x000b):  The maximum ACK delay is an integer value</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      indicating the maximum amount of time in milliseconds by which the</td><td> </td><td class="right">      indicating the maximum amount of time in milliseconds by which the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      endpoint will delay sending acknowledgments.  This value SHOULD</td><td> </td><td class="right">      endpoint will delay sending acknowledgments.  This value SHOULD</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      include the receiver's expected delays in alarms firing.  For</td><td> </td><td class="right">      include the receiver's expected delays in alarms firing.  For</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      example, if a receiver sets a timer for 5ms and alarms commonly</td><td> </td><td class="right">      example, if a receiver sets a timer for 5ms and alarms commonly</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      fire up to 1ms late, then it should send a max_ack_delay of 6ms.</td><td> </td><td class="right">      fire up to 1ms late, then it should send a max_ack_delay of 6ms.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      If this value is absent, a default of 25 milliseconds is assumed.</td><td> </td><td class="right">      If this value is absent, a default of 25 milliseconds is assumed.</td><td class="lineno"></td></tr>
      <tr id="diff0187"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      Values of 2^14 or greater are invalid.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   disable_migration (0x000c):  The disable migration transport</td><td> </td><td class="right">   disable_migration (0x000c):  The disable migration transport</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      parameter is included if the endpoint does not support connection</td><td> </td><td class="right">      parameter is included if the endpoint does not support connection</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      migration (Section 9).  Peers of an endpoint that sets this</td><td> </td><td class="right">      migration (Section 9).  Peers of an endpoint that sets this</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      transport parameter MUST NOT send any packets, including probing</td><td> </td><td class="right">      transport parameter MUST NOT send any packets, including probing</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      packets (Section 9.1), from a local address other than that used</td><td> </td><td class="right">      packets (Section 9.1), from a local address other than that used</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      to perform the handshake.  This parameter is a zero-length value.</td><td> </td><td class="right">      to perform the handshake.  This parameter is a zero-length value.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   preferred_address (0x000d):  The server's preferred address is used</td><td> </td><td class="right">   preferred_address (0x000d):  The server's preferred address is used</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      to effect a change in server address at the end of the handshake,</td><td> </td><td class="right">      to effect a change in server address at the end of the handshake,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      as described in Section 9.6.  The format of this transport</td><td> </td><td class="right">      as described in Section 9.6.  The format of this transport</td><td class="lineno"></td></tr>
      <tr id="diff0188"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">      parameter is the PreferredAddress struct shown in Figure <span class="delete">16.</span>  This</td><td> </td><td class="rblock">      parameter is the PreferredAddress struct shown in Figure <span class="insert">17.</span>  This</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">      transport parameter is only sent by a server.</td><td> </td><td class="rblock">      transport parameter is only sent by a server.  <span class="insert">Servers MAY choose</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      to only send a preferred address of one address family by sending</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      an all-zero address and port (0.0.0.0:0 or ::.0) for the other</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      family.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      struct {</td><td> </td><td class="right">      struct {</td><td class="lineno"></td></tr>
      <tr id="diff0189"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">        <span class="delete">enum { IPv4(4), IPv6(6), (15) } ipVersion;</span></td><td> </td><td class="rblock">        opaque <span class="insert">ipv4Address[4];</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">        opaque <span class="delete">ipAddress&lt;4..2^8-1&gt;;</span></td><td> </td><td class="rblock">        uint16 <span class="insert">ipv4Port;</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">        uint16 <span class="delete">port;</span></td><td> </td><td class="rblock"><span class="insert">        opaque ipv6Address[16];</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">        uint16 ipv6Port;</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">        opaque connectionId&lt;0..18&gt;;</td><td> </td><td class="right">        opaque connectionId&lt;0..18&gt;;</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">        opaque statelessResetToken[16];</td><td> </td><td class="right">        opaque statelessResetToken[16];</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      } PreferredAddress;</td><td> </td><td class="right">      } PreferredAddress;</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0190"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">                    Figure 1<span class="delete">6</span>: Preferred Address format</td><td> </td><td class="rblock">                    Figure 1<span class="insert">7</span>: Preferred Address format</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   If present, transport parameters that set initial flow control limits</td><td> </td><td class="right">   If present, transport parameters that set initial flow control limits</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   (initial_max_stream_data_bidi_local,</td><td> </td><td class="right">   (initial_max_stream_data_bidi_local,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   initial_max_stream_data_bidi_remote, and initial_max_stream_data_uni)</td><td> </td><td class="right">   initial_max_stream_data_bidi_remote, and initial_max_stream_data_uni)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   are equivalent to sending a MAX_STREAM_DATA frame (Section 19.10) on</td><td> </td><td class="right">   are equivalent to sending a MAX_STREAM_DATA frame (Section 19.10) on</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   every stream of the corresponding type immediately after opening.  If</td><td> </td><td class="right">   every stream of the corresponding type immediately after opening.  If</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the transport parameter is absent, streams of that type start with a</td><td> </td><td class="right">   the transport parameter is absent, streams of that type start with a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   flow control limit of 0.</td><td> </td><td class="right">   flow control limit of 0.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A client MUST NOT include an original connection ID, a stateless</td><td> </td><td class="right">   A client MUST NOT include an original connection ID, a stateless</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-55" class="change"><td></td><th><small>skipping to change at</small><a href="#part-55"><em> page 95, line 45<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-55"><em> page 97, line 51<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   parameter (see Section 10).  However, state in middleboxes might time</td><td> </td><td class="right">   parameter (see Section 10).  However, state in middleboxes might time</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   out earlier than that.  Though REQ-5 in [RFC4787] recommends a 2</td><td> </td><td class="right">   out earlier than that.  Though REQ-5 in [RFC4787] recommends a 2</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   minute timeout interval, experience shows that sending packets every</td><td> </td><td class="right">   minute timeout interval, experience shows that sending packets every</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   15 to 30 seconds is necessary to prevent the majority of middleboxes</td><td> </td><td class="right">   15 to 30 seconds is necessary to prevent the majority of middleboxes</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   from losing state for UDP flows.</td><td> </td><td class="right">   from losing state for UDP flows.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">19.3.  ACK Frames</td><td> </td><td class="right">19.3.  ACK Frames</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Receivers send ACK frames (types 0x02 and 0x03) to inform senders of</td><td> </td><td class="right">   Receivers send ACK frames (types 0x02 and 0x03) to inform senders of</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   packets they have received and processed.  The ACK frame contains one</td><td> </td><td class="right">   packets they have received and processed.  The ACK frame contains one</td><td class="lineno"></td></tr>
      <tr id="diff0191"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   or more ACK <span class="delete">Blocks.</span>  ACK <span class="delete">Blocks are ranges of</span> acknowledged packets.</td><td> </td><td class="rblock">   or more ACK <span class="insert">Ranges.</span>  ACK <span class="insert">Ranges identify</span> acknowledged packets.  If</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   If the frame type is 0x03, ACK frames also contain the sum of QUIC</td><td> </td><td class="rblock">   the frame type is 0x03, ACK frames also contain the sum of QUIC</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   packets with associated ECN marks received on the connection up until</td><td> </td><td class="right">   packets with associated ECN marks received on the connection up until</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   this point.  QUIC implementations MUST properly handle both types</td><td> </td><td class="right">   this point.  QUIC implementations MUST properly handle both types</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   and, if they have enabled ECN for packets they send, they SHOULD use</td><td> </td><td class="right">   and, if they have enabled ECN for packets they send, they SHOULD use</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the information in the ECN section to manage their congestion state.</td><td> </td><td class="right">   the information in the ECN section to manage their congestion state.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   QUIC acknowledgements are irrevocable.  Once acknowledged, a packet</td><td> </td><td class="right">   QUIC acknowledgements are irrevocable.  Once acknowledged, a packet</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   remains acknowledged, even if it does not appear in a future ACK</td><td> </td><td class="right">   remains acknowledged, even if it does not appear in a future ACK</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   frame.  This is unlike TCP SACKs ([RFC2018]).</td><td> </td><td class="right">   frame.  This is unlike TCP SACKs ([RFC2018]).</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   It is expected that a sender will reuse the same packet number across</td><td> </td><td class="right">   It is expected that a sender will reuse the same packet number across</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-56" class="change"><td></td><th><small>skipping to change at</small><a href="#part-56"><em> page 96, line 28<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-56"><em> page 98, line 32<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   An ACK frame is as follows:</td><td> </td><td class="right">   An ACK frame is as follows:</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">    0                   1                   2                   3</td><td> </td><td class="right">    0                   1                   2                   3</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</td><td> </td><td class="right">    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                     Largest Acknowledged (i)                ...</td><td> </td><td class="right">   |                     Largest Acknowledged (i)                ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                          ACK Delay (i)                      ...</td><td> </td><td class="right">   |                          ACK Delay (i)                      ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr id="diff0192"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   |                       ACK <span class="delete">Block</span> Count (i)                   ...</td><td> </td><td class="rblock">   |                       ACK <span class="insert">Range</span> Count (i)                   ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr id="diff0193"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   |                       <span class="delete">   ACK Blocks (*)  </span>                   ...</td><td> </td><td class="rblock">   |                       <span class="insert">First ACK Range (i)</span>                   ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr id="diff0194"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   |                         [ECN <span class="delete">Section]</span>                       ...</td><td> </td><td class="rblock">   |                          <span class="insert">ACK Ranges (*)                     ...</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |</span>                          [ECN <span class="insert">Counts]</span>                       ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0195"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">                        Figure 1<span class="delete">7</span>: ACK Frame Format</td><td> </td><td class="rblock">                        Figure 1<span class="insert">8</span>: ACK Frame Format</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   ACK frames contain the following fields:</td><td> </td><td class="right">   ACK frames contain the following fields:</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Largest Acknowledged:  A variable-length integer representing the</td><td> </td><td class="right">   Largest Acknowledged:  A variable-length integer representing the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      largest packet number the peer is acknowledging; this is usually</td><td> </td><td class="right">      largest packet number the peer is acknowledging; this is usually</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      the largest packet number that the peer has received prior to</td><td> </td><td class="right">      the largest packet number that the peer has received prior to</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      generating the ACK frame.  Unlike the packet number in the QUIC</td><td> </td><td class="right">      generating the ACK frame.  Unlike the packet number in the QUIC</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      long or short header, the value in an ACK frame is not truncated.</td><td> </td><td class="right">      long or short header, the value in an ACK frame is not truncated.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   ACK Delay:  A variable-length integer including the time in</td><td> </td><td class="right">   ACK Delay:  A variable-length integer including the time in</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      microseconds that the largest acknowledged packet, as indicated in</td><td> </td><td class="right">      microseconds that the largest acknowledged packet, as indicated in</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      the Largest Acknowledged field, was received by this peer to when</td><td> </td><td class="right">      the Largest Acknowledged field, was received by this peer to when</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      this ACK was sent.  The value of the ACK Delay field is scaled by</td><td> </td><td class="right">      this ACK was sent.  The value of the ACK Delay field is scaled by</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      multiplying the encoded value by 2 to the power of the value of</td><td> </td><td class="right">      multiplying the encoded value by 2 to the power of the value of</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      the "ack_delay_exponent" transport parameter set by the sender of</td><td> </td><td class="right">      the "ack_delay_exponent" transport parameter set by the sender of</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      the ACK frame.  The "ack_delay_exponent" defaults to 3, or a</td><td> </td><td class="right">      the ACK frame.  The "ack_delay_exponent" defaults to 3, or a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      multiplier of 8 (see Section 18.1).  Scaling in this fashion</td><td> </td><td class="right">      multiplier of 8 (see Section 18.1).  Scaling in this fashion</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      allows for a larger range of values with a shorter encoding at the</td><td> </td><td class="right">      allows for a larger range of values with a shorter encoding at the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      cost of lower resolution.</td><td> </td><td class="right">      cost of lower resolution.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0196"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   ACK <span class="delete">Block</span> Count:  A variable-length integer specifying the number of</td><td> </td><td class="rblock">   ACK <span class="insert">Range</span> Count:  A variable-length integer specifying the number of</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">      <span class="delete">Additional</span> ACK <span class="delete">Block (and Gap)</span> fields <span class="delete">after</span> the <span class="delete">First ACK Block.</span></td><td> </td><td class="rblock">      <span class="insert">Gap and</span> ACK <span class="insert">Range</span> fields <span class="insert">in</span> the <span class="insert">frame.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0197"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   ACK <span class="delete">Blocks:  Contains one or more blocks</span> of <span class="delete">packet numbers which have</span></td><td> </td><td class="rblock">   <span class="insert">First</span> ACK <span class="insert">Range:  A variable-length integer indicating the number</span> of</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">      been successfully received, see</span> Section <span class="delete">19.3.1.</span></td><td> </td><td class="rblock">      <span class="insert">contiguous packets preceding the Largest Acknowledged that are</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      being acknowledged.  The First ACK Range is encoded as an ACK</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      Range (see</span> Section <span class="insert">19.3.1) starting from the Largest Acknowledged.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      That is, the smallest packet acknowledged in the range is</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      determined by subtracting the First ACK Range value from the</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      Largest Acknowledged.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0198"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">19.3.1.</span>  ACK <span class="delete">Block</span> Section</td><td> </td><td class="rblock">   ACK <span class="insert">Ranges:  Contains additional ranges of packets which are</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      alternately not acknowledged (Gap) and acknowledged (ACK Range),</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      see</span> Section <span class="insert">19.3.1.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0199"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   The <span class="delete">ACK Block</span> Section <span class="delete">consists of alternating Gap and ACK Block</span></td><td> </td><td class="rblock">   <span class="insert">ECN Counts:</span>  The <span class="insert">three ECN Counts, see</span> Section <span class="insert">19.3.2.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   fields in descending packet number order.  A First Ack Block field is</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   followed by a variable number of alternating Gap and Additional ACK</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   Blocks.  The number of Gap and Additional ACK Block fields is</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   determined by the ACK Block Count field.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0200"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">Gap and</span> ACK <span class="delete">Block fields use a relative integer encoding for</span></td><td> </td><td class="rblock"><span class="insert">19.3.1.</span>  ACK <span class="insert">Ranges</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   efficiency.  Though each encoded value is positive, the values are</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   subtracted, so that each ACK Block describes progressively lower-</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   numbered packets.  As long as contiguous ranges of packets are small,</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   the variable-length integer encoding ensures that each range can be</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   expressed in a small number of bytes.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0201"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   The ACK <span class="delete">frame uses the least significant bit (that is, type 0x03) to</span></td><td> </td><td class="rblock">   The ACK <span class="insert">Ranges field consists of alternating Gap</span> and <span class="insert">ACK Range values</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   indicate ECN feedback</span> and <span class="delete">report receipt</span> of <span class="delete">QUIC packets with</span></td><td> </td><td class="rblock"><span class="insert">   in descending packet number order.  The number</span> of <span class="insert">Gap and ACK Range</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   associated ECN codepoints</span> of <span class="delete">ECT(0), ECT(1), or CE</span> in the <span class="delete">packet's IP</span></td><td> </td><td class="rblock"><span class="insert">   values is determined by the ACK Range Count field; one</span> of <span class="insert">each value</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   header.</span></td><td> </td><td class="rblock"><span class="insert">   is present for each value</span> in the <span class="insert">ACK Range Count field.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   ACK Ranges are structured as follows:</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">    0                   1                   2                   3</td><td> </td><td class="right">    0                   1                   2                   3</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</td><td> </td><td class="right">    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr id="diff0202"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   |                      <span class="delete">First ACK Block (i)                    ...</span></td><td> </td><td class="rblock">   |                           <span class="insert">[Gap (i)]</span>                        ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   |                             Gap (i)</span>                         ...</td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr id="diff0203"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   |                    <span class="delete">Additional ACK Block (i)</span>                 ...</td><td> </td><td class="rblock">   |                    <span class="insert">      [ACK Range (i)]   </span>                 ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr id="diff0204"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   |                           <span class="delete">  Gap (i) </span>                        ...</td><td> </td><td class="rblock">   |                           <span class="insert">[Gap (i)]</span>                        ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr id="diff0205"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   |                    <span class="delete">Additional ACK Block (i)</span>                 ...</td><td> </td><td class="rblock">   |                    <span class="insert">      [ACK Range (i)]   </span>                 ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">                                  ...</td><td> </td><td class="right">                                  ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr id="diff0206"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   |                           <span class="delete">  Gap (i) </span>                        ...</td><td> </td><td class="rblock">   |                           <span class="insert">[Gap (i)]</span>                        ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr id="diff0207"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   |                    <span class="delete">Additional ACK Block (i)</span>                 ...</td><td> </td><td class="rblock">   |                    <span class="insert">      [ACK Range (i)]   </span>                 ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0208"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">                       <span class="delete">Figure 18: ACK Block Section</span></td><td> </td><td class="rblock">                       <span class="insert">    Figure 19: ACK Ranges</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0209"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Each ACK <span class="delete">Block</span> acknowledges a contiguous range of packets by</td><td> </td><td class="rblock">   <span class="insert">The fields that form the ACK Ranges are:</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Gap (repeated):  A variable-length integer indicating the number of</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      contiguous unacknowledged packets preceding the packet number one</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      lower than the smallest in the preceding ACK Range.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   ACK Range (repeated):  A variable-length integer indicating the</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      number of contiguous acknowledged packets preceding the largest</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      packet number, as determined by the preceding Gap.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Gap and ACK Range value use a relative integer encoding for</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   efficiency.  Though each encoded value is positive, the values are</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   subtracted, so that each ACK Range describes progressively lower-</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   numbered packets.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                         </td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   Each ACK <span class="insert">Range</span> acknowledges a contiguous range of packets by</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   indicating the number of acknowledged packets that precede the</td><td> </td><td class="right">   indicating the number of acknowledged packets that precede the</td><td class="lineno"></td></tr>
      <tr id="diff0210"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   largest packet number in that <span class="delete">block.</span>  A value of zero indicates that</td><td> </td><td class="rblock">   largest packet number in that <span class="insert">range.</span>  A value of zero indicates that</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   only the largest packet number is acknowledged.  Larger ACK <span class="delete">Block</span></td><td> </td><td class="rblock">   only the largest packet number is acknowledged.  Larger ACK <span class="insert">Range</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   values indicate a larger range, with corresponding lower values for</td><td> </td><td class="right">   values indicate a larger range, with corresponding lower values for</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the smallest packet number in the range.  Thus, given a largest</td><td> </td><td class="right">   the smallest packet number in the range.  Thus, given a largest</td><td class="lineno"></td></tr>
      <tr id="diff0211"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   packet number for the <span class="delete">ACK</span>, the smallest value is determined by the</td><td> </td><td class="rblock">   packet number for the <span class="insert">range</span>, the smallest value is determined by the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   formula:</td><td> </td><td class="right">   formula:</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0212"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">      smallest = largest - ack_<span class="delete">block</span></td><td> </td><td class="rblock">      smallest = largest - ack_<span class="insert">range</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0213"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">The range of packets that are acknowledged by the</span> ACK <span class="delete">Block include</span></td><td> </td><td class="rblock">   <span class="insert">An</span> ACK <span class="insert">Range acknowledges all packets between</span> the smallest packet</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   the range from</span> the smallest packet number <span class="delete">to</span> the largest, inclusive.</td><td> </td><td class="rblock">   number <span class="insert">and</span> the largest, inclusive.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0214"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   The largest value for <span class="delete">the First ACK Block is determined by the</span></td><td> </td><td class="rblock">   The largest value for <span class="insert">an</span> ACK <span class="insert">Range</span> is determined by cumulatively</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   Largest Acknowledged field; the largest for Additional</span> ACK <span class="delete">Blocks</span> is</td><td> </td><td class="rblock">   subtracting the size of all preceding ACK <span class="insert">Ranges</span> and Gaps.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   determined by cumulatively subtracting the size of all preceding ACK</td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">Blocks</span> and Gaps.</td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Each Gap indicates a range of packets that are not being</td><td> </td><td class="right">   Each Gap indicates a range of packets that are not being</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   acknowledged.  The number of packets in the gap is one higher than</td><td> </td><td class="right">   acknowledged.  The number of packets in the gap is one higher than</td><td class="lineno"></td></tr>
      <tr id="diff0215"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   the encoded value of the Gap <span class="delete">F</span>ield.</td><td> </td><td class="rblock">   the encoded value of the Gap <span class="insert">f</span>ield.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The value of the Gap field establishes the largest packet number</td><td> </td><td class="right">   The value of the Gap field establishes the largest packet number</td><td class="lineno"></td></tr>
      <tr id="diff0216"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   value for the ACK <span class="delete">Block that follows the gap</span> using the following</td><td> </td><td class="rblock">   value for the <span class="insert">subsequent</span> ACK <span class="insert">Range</span> using the following formula:</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   formula:</td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">                                                                         </td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     <span class="delete">largest = previous_smallest - gap - 2</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   If the calculated value for largest or smallest packet number for any</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   ACK Block is negative, an endpoint MUST generate a connection error</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   of type FRAME_ENCODING_ERROR indicating an error in an ACK frame.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   The fields in the ACK Block Section are:</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0217"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">First ACK Block:  A variable-length integer indicating the number of</span></td><td> </td><td class="rblock">      <span class="insert">largest = previous_smallest - gap - 2</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">      contiguous packets preceding the Largest Acknowledged that are</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">      being acknowledged.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0218"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">Gap (repeated):  A variable-length integer indicating the number of</span></td><td> </td><td class="rblock">   <span class="insert">If any computed</span> packet number <span class="insert">is negative, an endpoint MUST generate</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">      contiguous unacknowledged packets preceding the</span> packet number <span class="delete">one</span></td><td> </td><td class="rblock"><span class="insert">   a connection error of type FRAME_ENCODING_ERROR indicating an error</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">      lower than the smallest</span> in <span class="delete">the preceding</span> ACK <span class="delete">Block.</span></td><td> </td><td class="rblock">   in <span class="insert">an</span> ACK <span class="insert">frame.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0219"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">Additional ACK Block (repeated):  A variable-length integer</span></td><td> </td><td class="rblock"><span class="insert">19.3.2.  ECN Counts</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">      indicating the number of contiguous acknowledged packets preceding</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">      the largest packet number, as determined by the preceding Gap.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0220"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">19.3.2.</span>  ECN <span class="delete">section</span></td><td> </td><td class="rblock">   <span class="insert">The ACK frame uses the least significant bit (that is, type 0x03) to</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   indicate</span> ECN <span class="insert">feedback and report receipt of QUIC packets with</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   associated ECN codepoints of ECT(0), ECT(1), or CE in the packet's IP</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   header.  ECN Counts are only present when the ACK frame type is 0x03.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0221"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">The</span> ECN <span class="delete">section should</span> only <span class="delete">be</span> parsed when the ACK frame type is</td><td> </td><td class="rblock">   ECN <span class="insert">Counts are</span> only parsed when the ACK frame type is 0x03.  <span class="insert">There</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   0x03.  <span class="delete">The ECN section consists of</span> 3 ECN <span class="delete">counts</span> as <span class="delete">shown below.</span></td><td> </td><td class="rblock"><span class="insert">   are</span> 3 ECN <span class="insert">counts,</span> as <span class="insert">follows:</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">    0                   1                   2                   3</td><td> </td><td class="right">    0                   1                   2                   3</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</td><td> </td><td class="right">    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                        ECT(0) Count (i)                     ...</td><td> </td><td class="right">   |                        ECT(0) Count (i)                     ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                        ECT(1) Count (i)                     ...</td><td> </td><td class="right">   |                        ECT(1) Count (i)                     ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                        ECN-CE Count (i)                     ...</td><td> </td><td class="right">   |                        ECN-CE Count (i)                     ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0222"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   <span class="insert">The three ECN Counts are:</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                         </td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   ECT(0) Count:  A variable-length integer representing the total</td><td> </td><td class="right">   ECT(0) Count:  A variable-length integer representing the total</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      number packets received with the ECT(0) codepoint.</td><td> </td><td class="right">      number packets received with the ECT(0) codepoint.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   ECT(1) Count:  A variable-length integer representing the total</td><td> </td><td class="right">   ECT(1) Count:  A variable-length integer representing the total</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      number packets received with the ECT(1) codepoint.</td><td> </td><td class="right">      number packets received with the ECT(1) codepoint.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   CE Count:  A variable-length integer representing the total number</td><td> </td><td class="right">   CE Count:  A variable-length integer representing the total number</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      packets received with the CE codepoint.</td><td> </td><td class="right">      packets received with the CE codepoint.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   ECN counts are maintained separately for each packet number space.</td><td> </td><td class="right">   ECN counts are maintained separately for each packet number space.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-57" class="change"><td></td><th><small>skipping to change at</small><a href="#part-57"><em> page 100, line 16<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-57"><em> page 102, line 16<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   An endpoint uses a RESET_STREAM frame (type=0x04) to abruptly</td><td> </td><td class="right">   An endpoint uses a RESET_STREAM frame (type=0x04) to abruptly</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   terminate a stream.</td><td> </td><td class="right">   terminate a stream.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   After sending a RESET_STREAM, an endpoint ceases transmission and</td><td> </td><td class="right">   After sending a RESET_STREAM, an endpoint ceases transmission and</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   retransmission of STREAM frames on the identified stream.  A receiver</td><td> </td><td class="right">   retransmission of STREAM frames on the identified stream.  A receiver</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   of RESET_STREAM can discard any data that it already received on that</td><td> </td><td class="right">   of RESET_STREAM can discard any data that it already received on that</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   stream.</td><td> </td><td class="right">   stream.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   An endpoint that receives a RESET_STREAM frame for a send-only stream</td><td> </td><td class="right">   An endpoint that receives a RESET_STREAM frame for a send-only stream</td><td class="lineno"></td></tr>
      <tr id="diff0223"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   MUST terminate the connection with error <span class="delete">PROTOCOL_VIOLATION</span>.</td><td> </td><td class="rblock">   MUST terminate the connection with error <span class="insert">STREAM_STATE_ERROR</span>.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The RESET_STREAM frame is as follows:</td><td> </td><td class="right">   The RESET_STREAM frame is as follows:</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">    0                   1                   2                   3</td><td> </td><td class="right">    0                   1                   2                   3</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</td><td> </td><td class="right">    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                        Stream ID (i)                        ...</td><td> </td><td class="right">   |                        Stream ID (i)                        ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |  Application Error Code (16)  |</td><td> </td><td class="right">   |  Application Error Code (16)  |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr id="diff0224"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   |                       <span class="delete">Final Offset (i)</span>                     ...</td><td> </td><td class="rblock">   |                       <span class="insert"> Final Size (i)  </span>                     ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   RESET_STREAM frames contain the following fields:</td><td> </td><td class="right">   RESET_STREAM frames contain the following fields:</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Stream ID:  A variable-length integer encoding of the Stream ID of</td><td> </td><td class="right">   Stream ID:  A variable-length integer encoding of the Stream ID of</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      the stream being terminated.</td><td> </td><td class="right">      the stream being terminated.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Application Protocol Error Code:  A 16-bit application protocol error</td><td> </td><td class="right">   Application Protocol Error Code:  A 16-bit application protocol error</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      code (see Section 20.1) which indicates why the stream is being</td><td> </td><td class="right">      code (see Section 20.1) which indicates why the stream is being</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      closed.</td><td> </td><td class="right">      closed.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0225"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Final <span class="delete">Offset:</span>  A variable-length integer indicating the <span class="delete">absolute byte</span></td><td> </td><td class="rblock">   Final <span class="insert">Size:</span>  A variable-length integer indicating the <span class="insert">final size</span> of</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">      offset</span> of the <span class="delete">end of data written on this</span> stream by the</td><td> </td><td class="rblock">      the stream by the RESET_STREAM <span class="insert">sender, in unit of bytes.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">      RESET_STREAM <span class="delete">sender.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">19.5.  STOP_SENDING Frame</td><td> </td><td class="right">19.5.  STOP_SENDING Frame</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   An endpoint uses a STOP_SENDING frame (type=0x05) to communicate that</td><td> </td><td class="right">   An endpoint uses a STOP_SENDING frame (type=0x05) to communicate that</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   incoming data is being discarded on receipt at application request.</td><td> </td><td class="right">   incoming data is being discarded on receipt at application request.</td><td class="lineno"></td></tr>
      <tr id="diff0226"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">This signals a peer to abruptly terminat</span>e transmission on a stream.</td><td> </td><td class="rblock">   <span class="insert">STOP_SENDING requests that a peer ceas</span>e transmission on a stream.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0227"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">Receipt of a</span> STOP_SENDING frame <span class="delete">is invalid</span> for <span class="delete">a locally-initiated</span></td><td> </td><td class="rblock">   <span class="insert">A</span> STOP_SENDING frame <span class="insert">can be sent</span> for <span class="insert">streams</span> in the <span class="insert">Recv or Size</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   stream that has not yet been created or is</span> in the <span class="delete">"Ready" state</span> (see</td><td> </td><td class="rblock"><span class="insert">   Known states</span> (see Section 3.1).  Receiving a STOP_SENDING frame for a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Section 3.1).  Receiving a STOP_SENDING frame for a locally-initiated</td><td> </td><td class="rblock">   locally-initiated stream that <span class="insert">has</span> not yet <span class="insert">been</span> created MUST be</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">send</span> stream that <span class="delete">is "Ready" or</span> not yet created MUST be treated as a</td><td> </td><td class="rblock">   treated as a connection error of type <span class="insert">STREAM_STATE_ERROR.</span>  An</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   connection error of type <span class="delete">PROTOCOL_VIOLATION.</span>  An endpoint that</td><td> </td><td class="rblock">   endpoint that receives a STOP_SENDING frame for a receive-only stream</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   receives a STOP_SENDING frame for a receive-only stream MUST</td><td> </td><td class="rblock">   MUST terminate the connection with error <span class="insert">STREAM_STATE_ERROR.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   terminate the connection with error <span class="delete">PROTOCOL_VIOLATION.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The STOP_SENDING frame is as follows:</td><td> </td><td class="right">   The STOP_SENDING frame is as follows:</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">    0                   1                   2                   3</td><td> </td><td class="right">    0                   1                   2                   3</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</td><td> </td><td class="right">    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                        Stream ID (i)                        ...</td><td> </td><td class="right">   |                        Stream ID (i)                        ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |  Application Error Code (16)  |</td><td> </td><td class="right">   |  Application Error Code (16)  |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-58" class="change"><td></td><th><small>skipping to change at</small><a href="#part-58"><em> page 101, line 48<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-58"><em> page 103, line 47<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">    0                   1                   2                   3</td><td> </td><td class="right">    0                   1                   2                   3</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</td><td> </td><td class="right">    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                          Offset (i)                         ...</td><td> </td><td class="right">   |                          Offset (i)                         ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                          Length (i)                         ...</td><td> </td><td class="right">   |                          Length (i)                         ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                        Crypto Data (*)                      ...</td><td> </td><td class="right">   |                        Crypto Data (*)                      ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0228"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">                      Figure <span class="delete">19</span>: CRYPTO Frame Format</td><td> </td><td class="rblock">                      Figure <span class="insert">20</span>: CRYPTO Frame Format</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   CRYPTO frames contain the following fields:</td><td> </td><td class="right">   CRYPTO frames contain the following fields:</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Offset:  A variable-length integer specifying the byte offset in the</td><td> </td><td class="right">   Offset:  A variable-length integer specifying the byte offset in the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      stream for the data in this CRYPTO frame.</td><td> </td><td class="right">      stream for the data in this CRYPTO frame.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Length:  A variable-length integer specifying the length of the</td><td> </td><td class="right">   Length:  A variable-length integer specifying the length of the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      Crypto Data field in this CRYPTO frame.</td><td> </td><td class="right">      Crypto Data field in this CRYPTO frame.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Crypto Data:  The cryptographic message data.</td><td> </td><td class="right">   Crypto Data:  The cryptographic message data.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-59" class="change"><td></td><th><small>skipping to change at</small><a href="#part-59"><em> page 102, line 25<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-59"><em> page 104, line 25<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   implies that each encryption level is treated as a separate CRYPTO</td><td> </td><td class="right">   implies that each encryption level is treated as a separate CRYPTO</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   stream of data.</td><td> </td><td class="right">   stream of data.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Unlike STREAM frames, which include a Stream ID indicating to which</td><td> </td><td class="right">   Unlike STREAM frames, which include a Stream ID indicating to which</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   stream the data belongs, the CRYPTO frame carries data for a single</td><td> </td><td class="right">   stream the data belongs, the CRYPTO frame carries data for a single</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   stream per encryption level.  The stream does not have an explicit</td><td> </td><td class="right">   stream per encryption level.  The stream does not have an explicit</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   end, so CRYPTO frames do not have a FIN bit.</td><td> </td><td class="right">   end, so CRYPTO frames do not have a FIN bit.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">19.7.  NEW_TOKEN Frame</td><td> </td><td class="right">19.7.  NEW_TOKEN Frame</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0229"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   A server sends a NEW_TOKEN frame (type=0x07) to provide the client a</td><td> </td><td class="rblock">   A server sends a NEW_TOKEN frame (type=0x07) to provide the client</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   token to send in the header of an Initial packet for a future</td><td> </td><td class="rblock">   <span class="insert">with</span> a token to send in the header of an Initial packet for a future</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   connection.</td><td> </td><td class="right">   connection.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The NEW_TOKEN frame is as follows:</td><td> </td><td class="right">   The NEW_TOKEN frame is as follows:</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">    0                   1                   2                   3</td><td> </td><td class="right">    0                   1                   2                   3</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</td><td> </td><td class="right">    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                     Token Length (i)  ...</td><td> </td><td class="right">   |                     Token Length (i)  ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                            Token (*)                        ...</td><td> </td><td class="right">   |                            Token (*)                        ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-60" class="change"><td></td><th><small>skipping to change at</small><a href="#part-60"><em> page 103, line 18<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-60"><em> page 105, line 18<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">      Data starts at an offset of 0 (that is, the frame contains the</td><td> </td><td class="right">      Data starts at an offset of 0 (that is, the frame contains the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      first bytes of the stream, or the end of a stream that includes no</td><td> </td><td class="right">      first bytes of the stream, or the end of a stream that includes no</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      data).</td><td> </td><td class="right">      data).</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  The LEN bit (0x02) in the frame type is set to indicate that there</td><td> </td><td class="right">   o  The LEN bit (0x02) in the frame type is set to indicate that there</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      is a Length field present.  If this bit is set to 0, the Length</td><td> </td><td class="right">      is a Length field present.  If this bit is set to 0, the Length</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      field is absent and the Stream Data field extends to the end of</td><td> </td><td class="right">      field is absent and the Stream Data field extends to the end of</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      the packet.  If this bit is set to 1, the Length field is present.</td><td> </td><td class="right">      the packet.  If this bit is set to 1, the Length field is present.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  The FIN bit (0x01) of the frame type is set only on frames that</td><td> </td><td class="right">   o  The FIN bit (0x01) of the frame type is set only on frames that</td><td class="lineno"></td></tr>
      <tr id="diff0230"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">      contain the final <span class="delete">offset</span> of the stream.  Setting this bit</td><td> </td><td class="rblock">      contain the final <span class="insert">size</span> of the stream.  Setting this bit indicates</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">      indicates that the frame marks the end of the stream.</td><td> </td><td class="rblock">      that the frame marks the end of the stream.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   An endpoint that receives a STREAM frame for a send-only stream MUST</td><td> </td><td class="right">   An endpoint that receives a STREAM frame for a send-only stream MUST</td><td class="lineno"></td></tr>
      <tr id="diff0231"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   terminate the connection with error <span class="delete">PROTOCOL_VIOLATION</span>.</td><td> </td><td class="rblock">   terminate the connection with error <span class="insert">STREAM_STATE_ERROR</span>.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The STREAM frames are as follows:</td><td> </td><td class="right">   The STREAM frames are as follows:</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">    0                   1                   2                   3</td><td> </td><td class="right">    0                   1                   2                   3</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</td><td> </td><td class="right">    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                         Stream ID (i)                       ...</td><td> </td><td class="right">   |                         Stream ID (i)                       ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                         [Offset (i)]                        ...</td><td> </td><td class="right">   |                         [Offset (i)]                        ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                         [Length (i)]                        ...</td><td> </td><td class="right">   |                         [Length (i)]                        ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                        Stream Data (*)                      ...</td><td> </td><td class="right">   |                        Stream Data (*)                      ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0232"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">                      Figure 2<span class="delete">0</span>: STREAM Frame Format</td><td> </td><td class="rblock">                      Figure 2<span class="insert">1</span>: STREAM Frame Format</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   STREAM frames contain the following fields:</td><td> </td><td class="right">   STREAM frames contain the following fields:</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Stream ID:  A variable-length integer indicating the stream ID of the</td><td> </td><td class="right">   Stream ID:  A variable-length integer indicating the stream ID of the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      stream (see Section 2.1).</td><td> </td><td class="right">      stream (see Section 2.1).</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Offset:  A variable-length integer specifying the byte offset in the</td><td> </td><td class="right">   Offset:  A variable-length integer specifying the byte offset in the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      stream for the data in this STREAM frame.  This field is present</td><td> </td><td class="right">      stream for the data in this STREAM frame.  This field is present</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      when the OFF bit is set to 1.  When the Offset field is absent,</td><td> </td><td class="right">      when the OFF bit is set to 1.  When the Offset field is absent,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      the offset is 0.</td><td> </td><td class="right">      the offset is 0.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-61" class="change"><td></td><th><small>skipping to change at</small><a href="#part-61"><em> page 104, line 13<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-61"><em> page 106, line 13<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">      Stream Data field in this STREAM frame.  This field is present</td><td> </td><td class="right">      Stream Data field in this STREAM frame.  This field is present</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      when the LEN bit is set to 1.  When the LEN bit is set to 0, the</td><td> </td><td class="right">      when the LEN bit is set to 1.  When the LEN bit is set to 0, the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      Stream Data field consumes all the remaining bytes in the packet.</td><td> </td><td class="right">      Stream Data field consumes all the remaining bytes in the packet.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Stream Data:  The bytes from the designated stream to be delivered.</td><td> </td><td class="right">   Stream Data:  The bytes from the designated stream to be delivered.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   When a Stream Data field has a length of 0, the offset in the STREAM</td><td> </td><td class="right">   When a Stream Data field has a length of 0, the offset in the STREAM</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   frame is the offset of the next byte that would be sent.</td><td> </td><td class="right">   frame is the offset of the next byte that would be sent.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The first byte in the stream has an offset of 0.  The largest offset</td><td> </td><td class="right">   The first byte in the stream has an offset of 0.  The largest offset</td><td class="lineno"></td></tr>
      <tr id="diff0233"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   delivered on a stream - the sum of the <span class="delete">re-constructed</span> offset and data</td><td> </td><td class="rblock">   delivered on a stream - the sum of the offset and data length - MUST</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   length - MUST be less than 2^62.</td><td> </td><td class="rblock">   be less than 2^62.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">19.9.  MAX_DATA Frame</td><td> </td><td class="right">19.9.  MAX_DATA Frame</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The MAX_DATA frame (type=0x10) is used in flow control to inform the</td><td> </td><td class="right">   The MAX_DATA frame (type=0x10) is used in flow control to inform the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   peer of the maximum amount of data that can be sent on the connection</td><td> </td><td class="right">   peer of the maximum amount of data that can be sent on the connection</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   as a whole.</td><td> </td><td class="right">   as a whole.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The MAX_DATA frame is as follows:</td><td> </td><td class="right">   The MAX_DATA frame is as follows:</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">    0                   1                   2                   3</td><td> </td><td class="right">    0                   1                   2                   3</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-62" class="change"><td></td><th><small>skipping to change at</small><a href="#part-62"><em> page 104, line 50<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-62"><em> page 106, line 50<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   error if it receives more data than the maximum data value that it</td><td> </td><td class="right">   error if it receives more data than the maximum data value that it</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   has sent, unless this is a result of a change in the initial limits</td><td> </td><td class="right">   has sent, unless this is a result of a change in the initial limits</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   (see Section 7.3.1).</td><td> </td><td class="right">   (see Section 7.3.1).</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">19.10.  MAX_STREAM_DATA Frame</td><td> </td><td class="right">19.10.  MAX_STREAM_DATA Frame</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The MAX_STREAM_DATA frame (type=0x11) is used in flow control to</td><td> </td><td class="right">   The MAX_STREAM_DATA frame (type=0x11) is used in flow control to</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   inform a peer of the maximum amount of data that can be sent on a</td><td> </td><td class="right">   inform a peer of the maximum amount of data that can be sent on a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   stream.</td><td> </td><td class="right">   stream.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0234"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">An endpoint that receives</span> a MAX_STREAM_DATA frame for a <span class="delete">receive-only</span></td><td> </td><td class="rblock">   <span class="insert">A MAX_STREAM_DATA frame can be sent for streams in the Recv state</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   stream MUST <span class="delete">terminate the</span> connection <span class="delete">with</span> error <span class="delete">PROTOCOL_VIOLATION.</span></td><td> </td><td class="rblock"><span class="insert">   (see Section 3.1).  Receiving</span> a MAX_STREAM_DATA frame for a <span class="insert">locally-</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">                                                                         </td><td> </td><td class="rblock"><span class="insert">   initiated</span> stream <span class="insert">that has not yet been created</span> MUST <span class="insert">be treated as a</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   An endpoint that receives a MAX_STREAM_DATA frame for a <span class="delete">send-only</span></td><td> </td><td class="rblock">   connection error <span class="insert">of type STREAM_STATE_ERROR.</span>  An endpoint that</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   stream <span class="delete">it has not opened</span> MUST terminate the connection with error</td><td> </td><td class="rblock">   receives a MAX_STREAM_DATA frame for a <span class="insert">receive-only</span> stream MUST</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">PROTOCOL_VIOLATION.</span></td><td> </td><td class="rblock">   terminate the connection with error <span class="insert">STREAM_STATE_ERROR.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   Note that an endpoint may legally receive a MAX_STREAM_DATA frame on</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   a bidirectional stream it has not opened.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The MAX_STREAM_DATA frame is as follows:</td><td> </td><td class="right">   The MAX_STREAM_DATA frame is as follows:</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">    0                   1                   2                   3</td><td> </td><td class="right">    0                   1                   2                   3</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</td><td> </td><td class="right">    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                        Stream ID (i)                        ...</td><td> </td><td class="right">   |                        Stream ID (i)                        ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                    Maximum Stream Data (i)                  ...</td><td> </td><td class="right">   |                    Maximum Stream Data (i)                  ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-63" class="change"><td></td><th><small>skipping to change at</small><a href="#part-63"><em> page 107, line 15<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-63"><em> page 109, line 12<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   Data Limit:  A variable-length integer indicating the connection-</td><td> </td><td class="right">   Data Limit:  A variable-length integer indicating the connection-</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      level limit at which blocking occurred.</td><td> </td><td class="right">      level limit at which blocking occurred.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">19.13.  STREAM_DATA_BLOCKED Frame</td><td> </td><td class="right">19.13.  STREAM_DATA_BLOCKED Frame</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A sender SHOULD send a STREAM_DATA_BLOCKED frame (type=0x15) when it</td><td> </td><td class="right">   A sender SHOULD send a STREAM_DATA_BLOCKED frame (type=0x15) when it</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   wishes to send data, but is unable to due to stream-level flow</td><td> </td><td class="right">   wishes to send data, but is unable to due to stream-level flow</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   control.  This frame is analogous to DATA_BLOCKED (Section 19.12).</td><td> </td><td class="right">   control.  This frame is analogous to DATA_BLOCKED (Section 19.12).</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   An endpoint that receives a STREAM_DATA_BLOCKED frame for a send-only</td><td> </td><td class="right">   An endpoint that receives a STREAM_DATA_BLOCKED frame for a send-only</td><td class="lineno"></td></tr>
      <tr id="diff0235"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   stream MUST terminate the connection with error <span class="delete">PROTOCOL_VIOLATION</span>.</td><td> </td><td class="rblock">   stream MUST terminate the connection with error <span class="insert">STREAM_STATE_ERROR</span>.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The STREAM_DATA_BLOCKED frame is as follows:</td><td> </td><td class="right">   The STREAM_DATA_BLOCKED frame is as follows:</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">    0                   1                   2                   3</td><td> </td><td class="right">    0                   1                   2                   3</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</td><td> </td><td class="right">    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                        Stream ID (i)                        ...</td><td> </td><td class="right">   |                        Stream ID (i)                        ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                    Stream Data Limit (i)                    ...</td><td> </td><td class="right">   |                    Stream Data Limit (i)                    ...</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-64" class="change"><td></td><th><small>skipping to change at</small><a href="#part-64"><em> page 110, line 29<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-64"><em> page 112, line 26<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   Endpoints can use PATH_CHALLENGE frames (type=0x1a) to check</td><td> </td><td class="right">   Endpoints can use PATH_CHALLENGE frames (type=0x1a) to check</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   reachability to the peer and for path validation during connection</td><td> </td><td class="right">   reachability to the peer and for path validation during connection</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   migration.</td><td> </td><td class="right">   migration.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The PATH_CHALLENGE frames are as follows:</td><td> </td><td class="right">   The PATH_CHALLENGE frames are as follows:</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">    0                   1                   2                   3</td><td> </td><td class="right">    0                   1                   2                   3</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</td><td> </td><td class="right">    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                                                               |</td><td> </td><td class="right">   |                                                               |</td><td class="lineno"></td></tr>
      <tr id="diff0236"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   +                           <span class="delete"> Data (8</span>)                           +</td><td> </td><td class="rblock">   +                           <span class="insert">Data (64</span>)                           +</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |                                                               |</td><td> </td><td class="right">   |                                                               |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td> </td><td class="right">   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   PATH_CHALLENGE frames contain the following fields:</td><td> </td><td class="right">   PATH_CHALLENGE frames contain the following fields:</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Data:  This 8-byte field contains arbitrary data.</td><td> </td><td class="right">   Data:  This 8-byte field contains arbitrary data.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A PATH_CHALLENGE frame containing 8 bytes that are hard to guess is</td><td> </td><td class="right">   A PATH_CHALLENGE frame containing 8 bytes that are hard to guess is</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   sufficient to ensure that it is easier to receive the packet than it</td><td> </td><td class="right">   sufficient to ensure that it is easier to receive the packet than it</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   is to guess the value correctly.</td><td> </td><td class="right">   is to guess the value correctly.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-65" class="change"><td></td><th><small>skipping to change at</small><a href="#part-65"><em> page 111, line 44<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-65"><em> page 113, line 44<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">      CONNECTION_CLOSE frame of type 0x1d uses codes from the</td><td> </td><td class="right">      CONNECTION_CLOSE frame of type 0x1d uses codes from the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      application protocol error code space, see Section 20.1</td><td> </td><td class="right">      application protocol error code space, see Section 20.1</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Frame Type:  A variable-length integer encoding the type of frame</td><td> </td><td class="right">   Frame Type:  A variable-length integer encoding the type of frame</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      that triggered the error.  A value of 0 (equivalent to the mention</td><td> </td><td class="right">      that triggered the error.  A value of 0 (equivalent to the mention</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      of the PADDING frame) is used when the frame type is unknown.  The</td><td> </td><td class="right">      of the PADDING frame) is used when the frame type is unknown.  The</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      application-specific variant of CONNECTION_CLOSE (type 0x1d) does</td><td> </td><td class="right">      application-specific variant of CONNECTION_CLOSE (type 0x1d) does</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      not include this field.</td><td> </td><td class="right">      not include this field.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Reason Phrase Length:  A variable-length integer specifying the</td><td> </td><td class="right">   Reason Phrase Length:  A variable-length integer specifying the</td><td class="lineno"></td></tr>
      <tr id="diff0237"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">      length of the reason phrase in bytes.  <span class="delete">Note that</span> a</td><td> </td><td class="rblock">      length of the reason phrase in bytes.  <span class="insert">Because</span> a CONNECTION_CLOSE</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">      CONNECTION_CLOSE frame cannot be split between packets, <span class="delete">so in</span></td><td> </td><td class="rblock">      frame cannot be split between packets, any limits on packet size</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">      practice</span> any limits on packet size will also limit the space</td><td> </td><td class="rblock">      will also limit the space available for a reason phrase.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">      available for a reason phrase.</td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Reason Phrase:  A human-readable explanation for why the connection</td><td> </td><td class="right">   Reason Phrase:  A human-readable explanation for why the connection</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      was closed.  This can be zero length if the sender chooses to not</td><td> </td><td class="right">      was closed.  This can be zero length if the sender chooses to not</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      give details beyond the Error Code.  This SHOULD be a UTF-8</td><td> </td><td class="right">      give details beyond the Error Code.  This SHOULD be a UTF-8</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      encoded string [RFC3629].</td><td> </td><td class="right">      encoded string [RFC3629].</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">19.20.  Extension Frames</td><td> </td><td class="right">19.20.  Extension Frames</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   QUIC frames do not use a self-describing encoding.  An endpoint</td><td> </td><td class="right">   QUIC frames do not use a self-describing encoding.  An endpoint</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   therefore needs to understand the syntax of all frames before it can</td><td> </td><td class="right">   therefore needs to understand the syntax of all frames before it can</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-66" class="change"><td></td><th><small>skipping to change at</small><a href="#part-66"><em> page 113, line 8<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-66"><em> page 115, line 8<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   FLOW_CONTROL_ERROR (0x3):  An endpoint received more data than it</td><td> </td><td class="right">   FLOW_CONTROL_ERROR (0x3):  An endpoint received more data than it</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      permitted in its advertised data limits (see Section 4).</td><td> </td><td class="right">      permitted in its advertised data limits (see Section 4).</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   STREAM_LIMIT_ERROR (0x4):  An endpoint received a frame for a stream</td><td> </td><td class="right">   STREAM_LIMIT_ERROR (0x4):  An endpoint received a frame for a stream</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      identifier that exceeded its advertised stream limit for the</td><td> </td><td class="right">      identifier that exceeded its advertised stream limit for the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      corresponding stream type.</td><td> </td><td class="right">      corresponding stream type.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   STREAM_STATE_ERROR (0x5):  An endpoint received a frame for a stream</td><td> </td><td class="right">   STREAM_STATE_ERROR (0x5):  An endpoint received a frame for a stream</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      that was not in a state that permitted that frame (see Section 3).</td><td> </td><td class="right">      that was not in a state that permitted that frame (see Section 3).</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0238"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   FINAL_<span class="delete">OFFSET</span>_ERROR (0x6):  An endpoint received a STREAM frame</td><td> </td><td class="rblock">   FINAL_<span class="insert">SIZE</span>_ERROR (0x6):  An endpoint received a STREAM frame</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      containing data that exceeded the previously established final</td><td> </td><td class="right">      containing data that exceeded the previously established final</td><td class="lineno"></td></tr>
      <tr id="diff0239"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">      <span class="delete">offset.</span>  Or an endpoint received a RESET_STREAM frame containing a</td><td> </td><td class="rblock">      <span class="insert">size.</span>  Or an endpoint received a <span class="insert">STREAM frame or a</span> RESET_STREAM</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">      final <span class="delete">offset</span> that was lower than the <span class="delete">maximum offset</span> of data that</td><td> </td><td class="rblock">      frame containing a final <span class="insert">size</span> that was lower than the <span class="insert">size</span> of</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">      was already received.  Or an endpoint received a RESET_STREAM</td><td> </td><td class="rblock">      <span class="insert">stream</span> data that was already received.  Or an endpoint received a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">      frame containing a different final <span class="delete">offset</span> to the one already</td><td> </td><td class="rblock">      <span class="insert">STREAM frame or a</span> RESET_STREAM frame containing a different final</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">      established.</td><td> </td><td class="rblock">      <span class="insert">size</span> to the one already established.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   FRAME_ENCODING_ERROR (0x7):  An endpoint received a frame that was</td><td> </td><td class="right">   FRAME_ENCODING_ERROR (0x7):  An endpoint received a frame that was</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      badly formatted.  For instance, a frame of an unknown type, or an</td><td> </td><td class="right">      badly formatted.  For instance, a frame of an unknown type, or an</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      ACK frame that has more acknowledgment ranges than the remainder</td><td> </td><td class="right">      ACK frame that has more acknowledgment ranges than the remainder</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      of the packet could carry.</td><td> </td><td class="right">      of the packet could carry.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   TRANSPORT_PARAMETER_ERROR (0x8):  An endpoint received transport</td><td> </td><td class="right">   TRANSPORT_PARAMETER_ERROR (0x8):  An endpoint received transport</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      parameters that were badly formatted, included an invalid value,</td><td> </td><td class="right">      parameters that were badly formatted, included an invalid value,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      was absent even though it is mandatory, was present though it is</td><td> </td><td class="right">      was absent even though it is mandatory, was present though it is</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      forbidden, or is otherwise in error.</td><td> </td><td class="right">      forbidden, or is otherwise in error.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-67" class="change"><td></td><th><small>skipping to change at</small><a href="#part-67"><em> page 122, line 27<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-67"><em> page 124, line 27<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   | 0x3  | FLOW_CONTROL_ERROR        | Flow control   | Section 20    |</td><td> </td><td class="right">   | 0x3  | FLOW_CONTROL_ERROR        | Flow control   | Section 20    |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |      |                           | error          |               |</td><td> </td><td class="right">   |      |                           | error          |               |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |      |                           |                |               |</td><td> </td><td class="right">   |      |                           |                |               |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   | 0x4  | STREAM_LIMIT_ERROR        | Too many       | Section 20    |</td><td> </td><td class="right">   | 0x4  | STREAM_LIMIT_ERROR        | Too many       | Section 20    |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |      |                           | streams opened |               |</td><td> </td><td class="right">   |      |                           | streams opened |               |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |      |                           |                |               |</td><td> </td><td class="right">   |      |                           |                |               |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   | 0x5  | STREAM_STATE_ERROR        | Frame received | Section 20    |</td><td> </td><td class="right">   | 0x5  | STREAM_STATE_ERROR        | Frame received | Section 20    |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |      |                           | in invalid     |               |</td><td> </td><td class="right">   |      |                           | in invalid     |               |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |      |                           | stream state   |               |</td><td> </td><td class="right">   |      |                           | stream state   |               |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |      |                           |                |               |</td><td> </td><td class="right">   |      |                           |                |               |</td><td class="lineno"></td></tr>
      <tr id="diff0240"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   | 0x6  | <span class="delete">FINAL_OFFSET_ERROR</span>        | Change to      | Section 20    |</td><td> </td><td class="rblock">   | 0x6  | <span class="insert">FINAL_SIZE_ERROR</span>          | Change to      | Section 20    |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   |      |                           | final <span class="delete">stream   |               |</span></td><td> </td><td class="rblock">   |      |                           | final <span class="insert">size</span>     |               |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   |      |                           | offset</span>         |               |</td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |      |                           |                |               |</td><td> </td><td class="right">   |      |                           |                |               |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   | 0x7  | FRAME_ENCODING_ERROR      | Frame encoding | Section 20    |</td><td> </td><td class="right">   | 0x7  | FRAME_ENCODING_ERROR      | Frame encoding | Section 20    |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |      |                           | error          |               |</td><td> </td><td class="right">   |      |                           | error          |               |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |      |                           |                |               |</td><td> </td><td class="right">   |      |                           |                |               |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   | 0x8  | TRANSPORT_PARAMETER_ERROR | Error in       | Section 20    |</td><td> </td><td class="right">   | 0x8  | TRANSPORT_PARAMETER_ERROR | Error in       | Section 20    |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |      |                           | transport      |               |</td><td> </td><td class="right">   |      |                           | transport      |               |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |      |                           | parameters     |               |</td><td> </td><td class="right">   |      |                           | parameters     |               |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |      |                           |                |               |</td><td> </td><td class="right">   |      |                           |                |               |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   | 0x9  | VERSION_NEGOTIATION_ERROR | Version        | Section 20    |</td><td> </td><td class="right">   | 0x9  | VERSION_NEGOTIATION_ERROR | Version        | Section 20    |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   |      |                           | negotiation    |               |</td><td> </td><td class="right">   |      |                           | negotiation    |               |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-68" class="change"><td></td><th><small>skipping to change at</small><a href="#part-68"><em> page 123, line 17<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-68"><em> page 125, line 17<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">23.1.  Normative References</td><td> </td><td class="right">23.1.  Normative References</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   [DPLPMTUD]</td><td> </td><td class="right">   [DPLPMTUD]</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              Fairhurst, G., Jones, T., Tuexen, M., and I. Ruengeler,</td><td> </td><td class="right">              Fairhurst, G., Jones, T., Tuexen, M., and I. Ruengeler,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              "Packetization Layer Path MTU Discovery for Datagram</td><td> </td><td class="right">              "Packetization Layer Path MTU Discovery for Datagram</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              Transports", draft-ietf-tsvwg-datagram-plpmtud-06 (work in</td><td> </td><td class="right">              Transports", draft-ietf-tsvwg-datagram-plpmtud-06 (work in</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              progress), November 2018.</td><td> </td><td class="right">              progress), November 2018.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   [QUIC-RECOVERY]</td><td> </td><td class="right">   [QUIC-RECOVERY]</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              Iyengar, J., Ed. and I. Swett, Ed., "QUIC Loss Detection</td><td> </td><td class="right">              Iyengar, J., Ed. and I. Swett, Ed., "QUIC Loss Detection</td><td class="lineno"></td></tr>
      <tr id="diff0241"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">              and Congestion Control", <span class="delete">draft-ietf-quic-recovery-17</span> (work</td><td> </td><td class="rblock">              and Congestion Control", <span class="insert">draft-ietf-quic-recovery-18</span> (work</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">              in progress), <span class="delete">December 2018.</span></td><td> </td><td class="rblock">              in progress), <span class="insert">January 2019.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   [QUIC-TLS]</td><td> </td><td class="right">   [QUIC-TLS]</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              Thomson, M., Ed. and S. Turner, Ed., "Using Transport</td><td> </td><td class="right">              Thomson, M., Ed. and S. Turner, Ed., "Using Transport</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              Layer Security (TLS) to Secure QUIC", draft-ietf-quic-</td><td> </td><td class="right">              Layer Security (TLS) to Secure QUIC", draft-ietf-quic-</td><td class="lineno"></td></tr>
      <tr id="diff0242"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">              tls-1<span class="delete">7 (work in progress), December 2018</span>.</td><td> </td><td class="rblock">              tls-1<span class="insert">8 (work in progress), January 2019</span>.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   [RFC1191]  Mogul, J. and S. Deering, "Path MTU discovery", RFC 1191,</td><td> </td><td class="right">   [RFC1191]  Mogul, J. and S. Deering, "Path MTU discovery", RFC 1191,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              DOI 10.17487/RFC1191, November 1990,</td><td> </td><td class="right">              DOI 10.17487/RFC1191, November 1990,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              &lt;https://www.rfc-editor.org/info/rfc1191&gt;.</td><td> </td><td class="right">              &lt;https://www.rfc-editor.org/info/rfc1191&gt;.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate</td><td> </td><td class="right">   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              Requirement Levels", BCP 14, RFC 2119,</td><td> </td><td class="right">              Requirement Levels", BCP 14, RFC 2119,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              DOI 10.17487/RFC2119, March 1997,</td><td> </td><td class="right">              DOI 10.17487/RFC2119, March 1997,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              &lt;https://www.rfc-editor.org/info/rfc2119&gt;.</td><td> </td><td class="right">              &lt;https://www.rfc-editor.org/info/rfc2119&gt;.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-69" class="change"><td></td><th><small>skipping to change at</small><a href="#part-69"><em> page 123, line 48<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-69"><em> page 125, line 48<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   [RFC3629]  Yergeau, F., "UTF-8, a transformation format of ISO</td><td> </td><td class="right">   [RFC3629]  Yergeau, F., "UTF-8, a transformation format of ISO</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              10646", STD 63, RFC 3629, DOI 10.17487/RFC3629, November</td><td> </td><td class="right">              10646", STD 63, RFC 3629, DOI 10.17487/RFC3629, November</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              2003, &lt;https://www.rfc-editor.org/info/rfc3629&gt;.</td><td> </td><td class="right">              2003, &lt;https://www.rfc-editor.org/info/rfc3629&gt;.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   [RFC4086]  Eastlake 3rd, D., Schiller, J., and S. Crocker,</td><td> </td><td class="right">   [RFC4086]  Eastlake 3rd, D., Schiller, J., and S. Crocker,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              "Randomness Requirements for Security", BCP 106, RFC 4086,</td><td> </td><td class="right">              "Randomness Requirements for Security", BCP 106, RFC 4086,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              DOI 10.17487/RFC4086, June 2005,</td><td> </td><td class="right">              DOI 10.17487/RFC4086, June 2005,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              &lt;https://www.rfc-editor.org/info/rfc4086&gt;.</td><td> </td><td class="right">              &lt;https://www.rfc-editor.org/info/rfc4086&gt;.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0243"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">[RFC5119]  Edwards, T., "A Uniform Resource Name (URN) Namespace for</span></td><td> </td><td class="rblock">   <span class="insert">[RFC5116]  McGrew, D., "An Interface</span> and <span class="insert">Algorithms for Authenticated</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">              the Society of Motion Picture</span> and <span class="delete">Television Engineers</span></td><td> </td><td class="rblock"><span class="insert">              Encryption",</span> RFC <span class="insert">5116,</span> DOI <span class="insert">10.17487/RFC5116, January</span> 2008,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">              (SMPTE)",</span> RFC <span class="delete">5119,</span> DOI <span class="delete">10.17487/RFC5119, February</span> 2008,</td><td> </td><td class="rblock">              <span class="insert">&lt;https://www.rfc-editor.org/info/rfc5116&gt;.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">              <span class="delete">&lt;https://www.rfc-editor.org/info/rfc5119&gt;.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   [RFC8085]  Eggert, L., Fairhurst, G., and G. Shepherd, "UDP Usage</td><td> </td><td class="right">   [RFC8085]  Eggert, L., Fairhurst, G., and G. Shepherd, "UDP Usage</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              Guidelines", BCP 145, RFC 8085, DOI 10.17487/RFC8085,</td><td> </td><td class="right">              Guidelines", BCP 145, RFC 8085, DOI 10.17487/RFC8085,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              March 2017, &lt;https://www.rfc-editor.org/info/rfc8085&gt;.</td><td> </td><td class="right">              March 2017, &lt;https://www.rfc-editor.org/info/rfc8085&gt;.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   [RFC8126]  Cotton, M., Leiba, B., and T. Narten, "Guidelines for</td><td> </td><td class="right">   [RFC8126]  Cotton, M., Leiba, B., and T. Narten, "Guidelines for</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              Writing an IANA Considerations Section in RFCs", BCP 26,</td><td> </td><td class="right">              Writing an IANA Considerations Section in RFCs", BCP 26,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              RFC 8126, DOI 10.17487/RFC8126, June 2017,</td><td> </td><td class="right">              RFC 8126, DOI 10.17487/RFC8126, June 2017,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              &lt;https://www.rfc-editor.org/info/rfc8126&gt;.</td><td> </td><td class="right">              &lt;https://www.rfc-editor.org/info/rfc8126&gt;.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-70" class="change"><td></td><th><small>skipping to change at</small><a href="#part-70"><em> page 124, line 49<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-70"><em> page 126, line 49<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">              Roskind, J., "QUIC: Multiplexed Transport Over UDP",</td><td> </td><td class="right">              Roskind, J., "QUIC: Multiplexed Transport Over UDP",</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              December 2013, &lt;https://goo.gl/dMVtFi&gt;.</td><td> </td><td class="right">              December 2013, &lt;https://goo.gl/dMVtFi&gt;.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   [HTTP2]    Belshe, M., Peon, R., and M. Thomson, Ed., "Hypertext</td><td> </td><td class="right">   [HTTP2]    Belshe, M., Peon, R., and M. Thomson, Ed., "Hypertext</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              Transfer Protocol Version 2 (HTTP/2)", RFC 7540,</td><td> </td><td class="right">              Transfer Protocol Version 2 (HTTP/2)", RFC 7540,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              DOI 10.17487/RFC7540, May 2015,</td><td> </td><td class="right">              DOI 10.17487/RFC7540, May 2015,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              &lt;https://www.rfc-editor.org/info/rfc7540&gt;.</td><td> </td><td class="right">              &lt;https://www.rfc-editor.org/info/rfc7540&gt;.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   [QUIC-INVARIANTS]</td><td> </td><td class="right">   [QUIC-INVARIANTS]</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              Thomson, M., "Version-Independent Properties of QUIC",</td><td> </td><td class="right">              Thomson, M., "Version-Independent Properties of QUIC",</td><td class="lineno"></td></tr>
      <tr id="diff0244"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">              draft-ietf-quic-invariants-03 (work in progress), <span class="delete">December</span></td><td> </td><td class="rblock">              draft-ietf-quic-invariants-03 (work in progress), <span class="insert">January</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">              2018.</span></td><td> </td><td class="rblock"><span class="insert">              2019.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   [RFC1812]  Baker, F., Ed., "Requirements for IP Version 4 Routers",</td><td> </td><td class="right">   [RFC1812]  Baker, F., Ed., "Requirements for IP Version 4 Routers",</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              RFC 1812, DOI 10.17487/RFC1812, June 1995,</td><td> </td><td class="right">              RFC 1812, DOI 10.17487/RFC1812, June 1995,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              &lt;https://www.rfc-editor.org/info/rfc1812&gt;.</td><td> </td><td class="right">              &lt;https://www.rfc-editor.org/info/rfc1812&gt;.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   [RFC2018]  Mathis, M., Mahdavi, J., Floyd, S., and A. Romanow, "TCP</td><td> </td><td class="right">   [RFC2018]  Mathis, M., Mahdavi, J., Floyd, S., and A. Romanow, "TCP</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              Selective Acknowledgment Options", RFC 2018,</td><td> </td><td class="right">              Selective Acknowledgment Options", RFC 2018,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              DOI 10.17487/RFC2018, October 1996,</td><td> </td><td class="right">              DOI 10.17487/RFC2018, October 1996,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              &lt;https://www.rfc-editor.org/info/rfc2018&gt;.</td><td> </td><td class="right">              &lt;https://www.rfc-editor.org/info/rfc2018&gt;.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-71" class="change"><td></td><th><small>skipping to change at</small><a href="#part-71"><em> page 126, line 47<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-71"><em> page 128, line 47<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">         return candidate_pn - pn_win</td><td> </td><td class="right">         return candidate_pn - pn_win</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      return candidate_pn</td><td> </td><td class="right">      return candidate_pn</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">Appendix B.  Change Log</td><td> </td><td class="right">Appendix B.  Change Log</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      *RFC Editor's Note:* Please remove this section prior to</td><td> </td><td class="right">      *RFC Editor's Note:* Please remove this section prior to</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      publication of a final version of this document.</td><td> </td><td class="right">      publication of a final version of this document.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Issue and pull request numbers are listed with a leading octothorp.</td><td> </td><td class="right">   Issue and pull request numbers are listed with a leading octothorp.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0245"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">B.1.  Since draft-ietf-quic-transport-16</td><td> </td><td class="rblock">B.1.  Since <span class="insert">draft-ietf-quic-transport-17</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   o  Stream-related errors now use STREAM_STATE_ERROR (#2305)</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   o  Endpoints discard initial keys as soon as handshake keys are</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      available (#1951, #2045)</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   o  Expanded conditions for ignoring ICMP packet too big messages</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      (#2108, #2161)</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   o  Remove rate control from PATH_CHALLENGE/PATH_RESPONSE (#2129,</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      #2241)</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   o  Endpoints are permitted to discard malformed initial packets</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      (#2141)</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   o  Clarified ECN implementation and usage requirements (#2156, #2201)</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   o  Disable ECN count verification for packets that arrive out of</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      order (#2198, #2215)</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   o  Use Probe Timeout (PTO) instead of RTO (#2206, #2238)</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   o  Loosen constraints on retransmission of ACK ranges (#2199, #2245)</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   o  Limit Retry and Version Negotiation to once per datagram (#2259,</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      #2303)</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   o  Set a maximum value for max_ack_delay transport parameter (#2282,</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      #2301)</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   o  Allow server preferred address for both IPv4 and IPv6 (#2122,</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      #2296)</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   o  Corrected requirements for migration to a preferred address</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      (#2146, #2349)</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">B.2.  Since</span> draft-ietf-quic-transport-16</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Stream limits are defined as counts, not maximums (#1850, #1906)</td><td> </td><td class="right">   o  Stream limits are defined as counts, not maximums (#1850, #1906)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Require amplification attack defense after closing (#1905, #1911)</td><td> </td><td class="right">   o  Require amplification attack defense after closing (#1905, #1911)</td><td class="lineno"></td></tr>
      <tr id="diff0246"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                                                         </span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Remove reservation of application error code 0 for STOPPING</td><td> </td><td class="right">   o  Remove reservation of application error code 0 for STOPPING</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      (#1804, #1922)</td><td> </td><td class="right">      (#1804, #1922)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Renumbered frames (#1945)</td><td> </td><td class="right">   o  Renumbered frames (#1945)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Renumbered transport parameters (#1946)</td><td> </td><td class="right">   o  Renumbered transport parameters (#1946)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Numeric transport parameters are expressed as varints (#1608,</td><td> </td><td class="right">   o  Numeric transport parameters are expressed as varints (#1608,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      #1947, #1955)</td><td> </td><td class="right">      #1947, #1955)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-72" class="change"><td></td><th><small>skipping to change at</small><a href="#part-72"><em> page 127, line 28<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-72"><em> page 130, line 16<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">      *  Fix the 0x40 bit</td><td> </td><td class="right">      *  Fix the 0x40 bit</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      *  Change type values for long header</td><td> </td><td class="right">      *  Change type values for long header</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      *  Add spin bit to short header (#631, #1988)</td><td> </td><td class="right">      *  Add spin bit to short header (#631, #1988)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      *  Encrypt the remainder of the first byte (#1322)</td><td> </td><td class="right">      *  Encrypt the remainder of the first byte (#1322)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      *  Move packet number length to first byte</td><td> </td><td class="right">      *  Move packet number length to first byte</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0247"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">      <span class="insert">*  Move ODCIL to first byte of retry packets</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                         </td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      *  Simplify packet number protection (#1575)</td><td> </td><td class="right">      *  Simplify packet number protection (#1575)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Allow STOP_SENDING to open a remote bidirectional stream (#1797,</td><td> </td><td class="right">   o  Allow STOP_SENDING to open a remote bidirectional stream (#1797,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      #2013)</td><td> </td><td class="right">      #2013)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Added mitigation for off-path migration attacks (#1278, #1749,</td><td> </td><td class="right">   o  Added mitigation for off-path migration attacks (#1278, #1749,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      #2033)</td><td> </td><td class="right">      #2033)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Don't let the PMTU to drop below 1280 (#2063, #2069)</td><td> </td><td class="right">   o  Don't let the PMTU to drop below 1280 (#2063, #2069)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Require peers to replace retired connection IDs (#2085)</td><td> </td><td class="right">   o  Require peers to replace retired connection IDs (#2085)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Servers are required to ignore Version Negotiation packets (#2088)</td><td> </td><td class="right">   o  Servers are required to ignore Version Negotiation packets (#2088)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Tokens are repeated in all Initial packets (#2089)</td><td> </td><td class="right">   o  Tokens are repeated in all Initial packets (#2089)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Clarified how PING frames are sent after loss (#2094)</td><td> </td><td class="right">   o  Clarified how PING frames are sent after loss (#2094)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0248"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   o  Initial keys are discarded once Handshake are avai<span class="delete">al</span>ble (#1951,</td><td> </td><td class="rblock">   o  Initial keys are discarded once Handshake are avai<span class="insert">la</span>ble (#1951,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      #2045)</td><td> </td><td class="right">      #2045)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  ICMP PTB validation clarifications (#2161, #2109, #2108)</td><td> </td><td class="right">   o  ICMP PTB validation clarifications (#2161, #2109, #2108)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0249"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">B.<span class="delete">2</span>.  Since draft-ietf-quic-transport-15</td><td> </td><td class="rblock">B.<span class="insert">3</span>.  Since draft-ietf-quic-transport-15</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Substantial editorial reorganization; no technical changes.</td><td> </td><td class="right">   Substantial editorial reorganization; no technical changes.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0250"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">B.<span class="delete">3</span>.  Since draft-ietf-quic-transport-14</td><td> </td><td class="rblock">B.<span class="insert">4</span>.  Since draft-ietf-quic-transport-14</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Merge ACK and ACK_ECN (#1778, #1801)</td><td> </td><td class="right">   o  Merge ACK and ACK_ECN (#1778, #1801)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Explicitly communicate max_ack_delay (#981, #1781)</td><td> </td><td class="right">   o  Explicitly communicate max_ack_delay (#981, #1781)</td><td class="lineno"></td></tr>
      <tr id="diff0251"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">                                                                         </span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Validate original connection ID after Retry packets (#1710, #1486,</td><td> </td><td class="right">   o  Validate original connection ID after Retry packets (#1710, #1486,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      #1793)</td><td> </td><td class="right">      #1793)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Idle timeout is optional and has no specified maximum (#1765)</td><td> </td><td class="right">   o  Idle timeout is optional and has no specified maximum (#1765)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Update connection ID handling; add RETIRE_CONNECTION_ID type</td><td> </td><td class="right">   o  Update connection ID handling; add RETIRE_CONNECTION_ID type</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      (#1464, #1468, #1483, #1484, #1486, #1495, #1729, #1742, #1799,</td><td> </td><td class="right">      (#1464, #1468, #1483, #1484, #1486, #1495, #1729, #1742, #1799,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      #1821)</td><td> </td><td class="right">      #1821)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Include a Token in all Initial packets (#1649, #1794)</td><td> </td><td class="right">   o  Include a Token in all Initial packets (#1649, #1794)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-73" class="change"><td></td><th><small>skipping to change at</small><a href="#part-73"><em> page 128, line 28<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-73"><em> page 131, line 17<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Idle timeout is optional and has no specified maximum (#1765)</td><td> </td><td class="right">   o  Idle timeout is optional and has no specified maximum (#1765)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Update connection ID handling; add RETIRE_CONNECTION_ID type</td><td> </td><td class="right">   o  Update connection ID handling; add RETIRE_CONNECTION_ID type</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      (#1464, #1468, #1483, #1484, #1486, #1495, #1729, #1742, #1799,</td><td> </td><td class="right">      (#1464, #1468, #1483, #1484, #1486, #1495, #1729, #1742, #1799,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      #1821)</td><td> </td><td class="right">      #1821)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Include a Token in all Initial packets (#1649, #1794)</td><td> </td><td class="right">   o  Include a Token in all Initial packets (#1649, #1794)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Prevent handshake deadlock (#1764, #1824)</td><td> </td><td class="right">   o  Prevent handshake deadlock (#1764, #1824)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0252"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">B.<span class="delete">4</span>.  Since draft-ietf-quic-transport-13</td><td> </td><td class="rblock">B.<span class="insert">5</span>.  Since draft-ietf-quic-transport-13</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Streams open when higher-numbered streams of the same type open</td><td> </td><td class="right">   o  Streams open when higher-numbered streams of the same type open</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      (#1342, #1549)</td><td> </td><td class="right">      (#1342, #1549)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Split initial stream flow control limit into 3 transport</td><td> </td><td class="right">   o  Split initial stream flow control limit into 3 transport</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      parameters (#1016, #1542)</td><td> </td><td class="right">      parameters (#1016, #1542)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  All flow control transport parameters are optional (#1610)</td><td> </td><td class="right">   o  All flow control transport parameters are optional (#1610)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Removed UNSOLICITED_PATH_RESPONSE error code (#1265, #1539)</td><td> </td><td class="right">   o  Removed UNSOLICITED_PATH_RESPONSE error code (#1265, #1539)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-74" class="change"><td></td><th><small>skipping to change at</small><a href="#part-74"><em> page 129, line 17<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-74"><em> page 132, line 7<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Permit 0-RTT after receiving Version Negotiation or Retry (#1507,</td><td> </td><td class="right">   o  Permit 0-RTT after receiving Version Negotiation or Retry (#1507,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      #1514, #1621)</td><td> </td><td class="right">      #1514, #1621)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Permit Retry in response to 0-RTT (#1547, #1552)</td><td> </td><td class="right">   o  Permit Retry in response to 0-RTT (#1547, #1552)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Looser verification of ECN counters to account for ACK loss</td><td> </td><td class="right">   o  Looser verification of ECN counters to account for ACK loss</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      (#1555, #1481, #1565)</td><td> </td><td class="right">      (#1555, #1481, #1565)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Remove frame type field from APPLICATION_CLOSE (#1508, #1528)</td><td> </td><td class="right">   o  Remove frame type field from APPLICATION_CLOSE (#1508, #1528)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0253"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">B.<span class="delete">5</span>.  Since draft-ietf-quic-transport-12</td><td> </td><td class="rblock">B.<span class="insert">6</span>.  Since draft-ietf-quic-transport-12</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Changes to integration of the TLS handshake (#829, #1018, #1094,</td><td> </td><td class="right">   o  Changes to integration of the TLS handshake (#829, #1018, #1094,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      #1165, #1190, #1233, #1242, #1252, #1450, #1458)</td><td> </td><td class="right">      #1165, #1190, #1233, #1242, #1252, #1450, #1458)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      *  The cryptographic handshake uses CRYPTO frames, not stream 0</td><td> </td><td class="right">      *  The cryptographic handshake uses CRYPTO frames, not stream 0</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      *  QUIC packet protection is used in place of TLS record</td><td> </td><td class="right">      *  QUIC packet protection is used in place of TLS record</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">         protection</td><td> </td><td class="right">         protection</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      *  Separate QUIC packet number spaces are used for the handshake</td><td> </td><td class="right">      *  Separate QUIC packet number spaces are used for the handshake</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-75" class="change"><td></td><th><small>skipping to change at</small><a href="#part-75"><em> page 130, line 14<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-75"><em> page 133, line 5<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Fixed sampling method for packet number encryption; the length</td><td> </td><td class="right">   o  Fixed sampling method for packet number encryption; the length</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      field in long headers includes the packet number field in addition</td><td> </td><td class="right">      field in long headers includes the packet number field in addition</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      to the packet payload (#1387, #1389)</td><td> </td><td class="right">      to the packet payload (#1387, #1389)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Stateless Reset is now symmetric and subject to size constraints</td><td> </td><td class="right">   o  Stateless Reset is now symmetric and subject to size constraints</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      (#466, #1346)</td><td> </td><td class="right">      (#466, #1346)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Added frame type extension mechanism (#58, #1473)</td><td> </td><td class="right">   o  Added frame type extension mechanism (#58, #1473)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0254"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">B.<span class="delete">6</span>.  Since draft-ietf-quic-transport-11</td><td> </td><td class="rblock">B.<span class="insert">7</span>.  Since draft-ietf-quic-transport-11</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Enable server to transition connections to a preferred address</td><td> </td><td class="right">   o  Enable server to transition connections to a preferred address</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      (#560, #1251)</td><td> </td><td class="right">      (#560, #1251)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Packet numbers are encrypted (#1174, #1043, #1048, #1034, #850,</td><td> </td><td class="right">   o  Packet numbers are encrypted (#1174, #1043, #1048, #1034, #850,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      #990, #734, #1317, #1267, #1079)</td><td> </td><td class="right">      #990, #734, #1317, #1267, #1079)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Packet numbers use a variable-length encoding (#989, #1334)</td><td> </td><td class="right">   o  Packet numbers use a variable-length encoding (#989, #1334)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  STREAM frames can now be empty (#1350)</td><td> </td><td class="right">   o  STREAM frames can now be empty (#1350)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0255"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">B.<span class="delete">7</span>.  Since draft-ietf-quic-transport-10</td><td> </td><td class="rblock">B.<span class="insert">8</span>.  Since draft-ietf-quic-transport-10</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Swap payload length and packed number fields in long header</td><td> </td><td class="right">   o  Swap payload length and packed number fields in long header</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      (#1294)</td><td> </td><td class="right">      (#1294)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Clarified that CONNECTION_CLOSE is allowed in Handshake packet</td><td> </td><td class="right">   o  Clarified that CONNECTION_CLOSE is allowed in Handshake packet</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      (#1274)</td><td> </td><td class="right">      (#1274)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Spin bit reserved (#1283)</td><td> </td><td class="right">   o  Spin bit reserved (#1283)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Coalescing multiple QUIC packets in a UDP datagram (#1262, #1285)</td><td> </td><td class="right">   o  Coalescing multiple QUIC packets in a UDP datagram (#1262, #1285)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-76" class="change"><td></td><th><small>skipping to change at</small><a href="#part-76"><em> page 131, line 4<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-76"><em> page 133, line 44<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Removed implicit stream opening (#896, #1193)</td><td> </td><td class="right">   o  Removed implicit stream opening (#896, #1193)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  An empty STREAM frame can be used to open a stream without sending</td><td> </td><td class="right">   o  An empty STREAM frame can be used to open a stream without sending</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      data (#901, #1194)</td><td> </td><td class="right">      data (#901, #1194)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Define stream counts in transport parameters rather than a maximum</td><td> </td><td class="right">   o  Define stream counts in transport parameters rather than a maximum</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      stream ID (#1023, #1065)</td><td> </td><td class="right">      stream ID (#1023, #1065)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  STOP_SENDING is now prohibited before streams are used (#1050)</td><td> </td><td class="right">   o  STOP_SENDING is now prohibited before streams are used (#1050)</td><td class="lineno"></td></tr>
      <tr id="diff0256"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                                                         </span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Recommend including ACK in Retry packets and allow PADDING (#1067,</td><td> </td><td class="right">   o  Recommend including ACK in Retry packets and allow PADDING (#1067,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      #882)</td><td> </td><td class="right">      #882)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Endpoints now become closing after an idle timeout (#1178, #1179)</td><td> </td><td class="right">   o  Endpoints now become closing after an idle timeout (#1178, #1179)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Remove implication that Version Negotiation is sent when a packet</td><td> </td><td class="right">   o  Remove implication that Version Negotiation is sent when a packet</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      of the wrong version is received (#1197)</td><td> </td><td class="right">      of the wrong version is received (#1197)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0257"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">B.<span class="delete">8</span>.  Since draft-ietf-quic-transport-09</td><td> </td><td class="rblock">B.<span class="insert">9</span>.  Since draft-ietf-quic-transport-09</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Added PATH_CHALLENGE and PATH_RESPONSE frames to replace PING with</td><td> </td><td class="right">   o  Added PATH_CHALLENGE and PATH_RESPONSE frames to replace PING with</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      Data and PONG frame.  Changed ACK frame type from 0x0e to 0x0d.</td><td> </td><td class="right">      Data and PONG frame.  Changed ACK frame type from 0x0e to 0x0d.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      (#1091, #725, #1086)</td><td> </td><td class="right">      (#1091, #725, #1086)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  A server can now only send 3 packets without validating the client</td><td> </td><td class="right">   o  A server can now only send 3 packets without validating the client</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      address (#38, #1090)</td><td> </td><td class="right">      address (#38, #1090)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Delivery order of stream data is no longer strongly specified</td><td> </td><td class="right">   o  Delivery order of stream data is no longer strongly specified</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      (#252, #1070)</td><td> </td><td class="right">      (#252, #1070)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-77" class="change"><td></td><th><small>skipping to change at</small><a href="#part-77"><em> page 131, line 39<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-77"><em> page 134, line 32<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Improved retransmission rules for all frame types: information is</td><td> </td><td class="right">   o  Improved retransmission rules for all frame types: information is</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      retransmitted, not packets or frames (#463, #765, #1095, #1053)</td><td> </td><td class="right">      retransmitted, not packets or frames (#463, #765, #1095, #1053)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Added an error code for server busy signals (#1137)</td><td> </td><td class="right">   o  Added an error code for server busy signals (#1137)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Endpoints now set the connection ID that their peer uses.</td><td> </td><td class="right">   o  Endpoints now set the connection ID that their peer uses.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      Connection IDs are variable length.  Removed the</td><td> </td><td class="right">      Connection IDs are variable length.  Removed the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      omit_connection_id transport parameter and the corresponding short</td><td> </td><td class="right">      omit_connection_id transport parameter and the corresponding short</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      header flag. (#1089, #1052, #1146, #821, #745, #821, #1166, #1151)</td><td> </td><td class="right">      header flag. (#1089, #1052, #1146, #821, #745, #821, #1166, #1151)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0258"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">B.<span class="delete">9</span>.  Since draft-ietf-quic-transport-08</td><td> </td><td class="rblock">B.<span class="insert">10</span>.  Since draft-ietf-quic-transport-08</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Clarified requirements for BLOCKED usage (#65, #924)</td><td> </td><td class="right">   o  Clarified requirements for BLOCKED usage (#65, #924)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  BLOCKED frame now includes reason for blocking (#452, #924, #927,</td><td> </td><td class="right">   o  BLOCKED frame now includes reason for blocking (#452, #924, #927,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      #928)</td><td> </td><td class="right">      #928)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  GAP limitation in ACK Frame (#613)</td><td> </td><td class="right">   o  GAP limitation in ACK Frame (#613)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Improved PMTUD description (#614, #1036)</td><td> </td><td class="right">   o  Improved PMTUD description (#614, #1036)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-78" class="change"><td></td><th><small>skipping to change at</small><a href="#part-78"><em> page 132, line 4<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-78"><em> page 134, line 44<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Clarified requirements for BLOCKED usage (#65, #924)</td><td> </td><td class="right">   o  Clarified requirements for BLOCKED usage (#65, #924)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  BLOCKED frame now includes reason for blocking (#452, #924, #927,</td><td> </td><td class="right">   o  BLOCKED frame now includes reason for blocking (#452, #924, #927,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      #928)</td><td> </td><td class="right">      #928)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  GAP limitation in ACK Frame (#613)</td><td> </td><td class="right">   o  GAP limitation in ACK Frame (#613)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Improved PMTUD description (#614, #1036)</td><td> </td><td class="right">   o  Improved PMTUD description (#614, #1036)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Clarified stream state machine (#634, #662, #743, #894)</td><td> </td><td class="right">   o  Clarified stream state machine (#634, #662, #743, #894)</td><td class="lineno"></td></tr>
      <tr id="diff0259"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                                                         </span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Reserved versions don't need to be generated deterministically</td><td> </td><td class="right">   o  Reserved versions don't need to be generated deterministically</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      (#831, #931)</td><td> </td><td class="right">      (#831, #931)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  You don't always need the draining period (#871)</td><td> </td><td class="right">   o  You don't always need the draining period (#871)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Stateless reset clarified as version-specific (#930, #986)</td><td> </td><td class="right">   o  Stateless reset clarified as version-specific (#930, #986)</td><td class="lineno"></td></tr>
      <tr id="diff0260"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">                                                                         </span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  initial_max_stream_id_x transport parameters are optional (#970,</td><td> </td><td class="right">   o  initial_max_stream_id_x transport parameters are optional (#970,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      #971)</td><td> </td><td class="right">      #971)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Ack Delay assumes a default value during the handshake (#1007,</td><td> </td><td class="right">   o  Ack Delay assumes a default value during the handshake (#1007,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      #1009)</td><td> </td><td class="right">      #1009)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Removed transport parameters from NewSessionTicket (#1015)</td><td> </td><td class="right">   o  Removed transport parameters from NewSessionTicket (#1015)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0261"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">B.1<span class="delete">0</span>.  Since draft-ietf-quic-transport-07</td><td> </td><td class="rblock">B.1<span class="insert">1</span>.  Since draft-ietf-quic-transport-07</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  The long header now has version before packet number (#926, #939)</td><td> </td><td class="right">   o  The long header now has version before packet number (#926, #939)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Rename and consolidate packet types (#846, #822, #847)</td><td> </td><td class="right">   o  Rename and consolidate packet types (#846, #822, #847)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Packet types are assigned new codepoints and the Connection ID</td><td> </td><td class="right">   o  Packet types are assigned new codepoints and the Connection ID</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      Flag is inverted (#426, #956)</td><td> </td><td class="right">      Flag is inverted (#426, #956)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Removed type for Version Negotiation and use Version 0 (#963,</td><td> </td><td class="right">   o  Removed type for Version Negotiation and use Version 0 (#963,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      #968)</td><td> </td><td class="right">      #968)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-79" class="change"><td></td><th><small>skipping to change at</small><a href="#part-79"><em> page 133, line 15<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-79"><em> page 136, line 8<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Address validation for connection migration (#161, #732, #878)</td><td> </td><td class="right">   o  Address validation for connection migration (#161, #732, #878)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Clearly defined retransmission rules for BLOCKED (#452, #65, #924)</td><td> </td><td class="right">   o  Clearly defined retransmission rules for BLOCKED (#452, #65, #924)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  negotiated_version is sent in server transport parameters (#710,</td><td> </td><td class="right">   o  negotiated_version is sent in server transport parameters (#710,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      #959)</td><td> </td><td class="right">      #959)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Increased the range over which packet numbers are randomized</td><td> </td><td class="right">   o  Increased the range over which packet numbers are randomized</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      (#864, #850, #964)</td><td> </td><td class="right">      (#864, #850, #964)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0262"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">B.1<span class="delete">1</span>.  Since draft-ietf-quic-transport-06</td><td> </td><td class="rblock">B.1<span class="insert">2</span>.  Since draft-ietf-quic-transport-06</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Replaced FNV-1a with AES-GCM for all "Cleartext" packets (#554)</td><td> </td><td class="right">   o  Replaced FNV-1a with AES-GCM for all "Cleartext" packets (#554)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Split error code space between application and transport (#485)</td><td> </td><td class="right">   o  Split error code space between application and transport (#485)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Stateless reset token moved to end (#820)</td><td> </td><td class="right">   o  Stateless reset token moved to end (#820)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  1-RTT-protected long header types removed (#848)</td><td> </td><td class="right">   o  1-RTT-protected long header types removed (#848)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  No acknowledgments during draining period (#852)</td><td> </td><td class="right">   o  No acknowledgments during draining period (#852)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Remove "application close" as a separate close type (#854)</td><td> </td><td class="right">   o  Remove "application close" as a separate close type (#854)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Remove timestamps from the ACK frame (#841)</td><td> </td><td class="right">   o  Remove timestamps from the ACK frame (#841)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Require transport parameters to only appear once (#792)</td><td> </td><td class="right">   o  Require transport parameters to only appear once (#792)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0263"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">B.1<span class="delete">2</span>.  Since draft-ietf-quic-transport-05</td><td> </td><td class="rblock">B.1<span class="insert">3</span>.  Since draft-ietf-quic-transport-05</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Stateless token is server-only (#726)</td><td> </td><td class="right">   o  Stateless token is server-only (#726)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Refactor section on connection termination (#733, #748, #328,</td><td> </td><td class="right">   o  Refactor section on connection termination (#733, #748, #328,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      #177)</td><td> </td><td class="right">      #177)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Limit size of Version Negotiation packet (#585)</td><td> </td><td class="right">   o  Limit size of Version Negotiation packet (#585)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Clarify when and what to ack (#736)</td><td> </td><td class="right">   o  Clarify when and what to ack (#736)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Renamed STREAM_ID_NEEDED to STREAM_ID_BLOCKED</td><td> </td><td class="right">   o  Renamed STREAM_ID_NEEDED to STREAM_ID_BLOCKED</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Clarify Keep-alive requirements (#729)</td><td> </td><td class="right">   o  Clarify Keep-alive requirements (#729)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0264"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">B.1<span class="delete">3</span>.  Since draft-ietf-quic-transport-04</td><td> </td><td class="rblock">B.1<span class="insert">4</span>.  Since draft-ietf-quic-transport-04</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Introduce STOP_SENDING frame, RESET_STREAM only resets in one</td><td> </td><td class="right">   o  Introduce STOP_SENDING frame, RESET_STREAM only resets in one</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      direction (#165)</td><td> </td><td class="right">      direction (#165)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Removed GOAWAY; application protocols are responsible for graceful</td><td> </td><td class="right">   o  Removed GOAWAY; application protocols are responsible for graceful</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      shutdown (#696)</td><td> </td><td class="right">      shutdown (#696)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Reduced the number of error codes (#96, #177, #184, #211)</td><td> </td><td class="right">   o  Reduced the number of error codes (#96, #177, #184, #211)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Version validation fields can't move or change (#121)</td><td> </td><td class="right">   o  Version validation fields can't move or change (#121)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-80" class="change"><td></td><th><small>skipping to change at</small><a href="#part-80"><em> page 134, line 34<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-80"><em> page 137, line 26<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Increased the maximum length of the Largest Acknowledged field in</td><td> </td><td class="right">   o  Increased the maximum length of the Largest Acknowledged field in</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      ACK frames to 64 bits (#629)</td><td> </td><td class="right">      ACK frames to 64 bits (#629)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  truncate_connection_id is renamed to omit_connection_id (#659)</td><td> </td><td class="right">   o  truncate_connection_id is renamed to omit_connection_id (#659)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  CONNECTION_CLOSE terminates the connection like TCP RST (#330,</td><td> </td><td class="right">   o  CONNECTION_CLOSE terminates the connection like TCP RST (#330,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      #328)</td><td> </td><td class="right">      #328)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Update labels used in HKDF-Expand-Label to match TLS 1.3 (#642)</td><td> </td><td class="right">   o  Update labels used in HKDF-Expand-Label to match TLS 1.3 (#642)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0265"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">B.1<span class="delete">4</span>.  Since draft-ietf-quic-transport-03</td><td> </td><td class="rblock">B.1<span class="insert">5</span>.  Since draft-ietf-quic-transport-03</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Change STREAM and RESET_STREAM layout</td><td> </td><td class="right">   o  Change STREAM and RESET_STREAM layout</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Add MAX_STREAM_ID settings</td><td> </td><td class="right">   o  Add MAX_STREAM_ID settings</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0266"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">B.1<span class="delete">5</span>.  Since draft-ietf-quic-transport-02</td><td> </td><td class="rblock">B.1<span class="insert">6</span>.  Since draft-ietf-quic-transport-02</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  The size of the initial packet payload has a fixed minimum (#267,</td><td> </td><td class="right">   o  The size of the initial packet payload has a fixed minimum (#267,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      #472)</td><td> </td><td class="right">      #472)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Define when Version Negotiation packets are ignored (#284, #294,</td><td> </td><td class="right">   o  Define when Version Negotiation packets are ignored (#284, #294,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      #241, #143, #474)</td><td> </td><td class="right">      #241, #143, #474)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  The 64-bit FNV-1a algorithm is used for integrity protection of</td><td> </td><td class="right">   o  The 64-bit FNV-1a algorithm is used for integrity protection of</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      unprotected packets (#167, #480, #481, #517)</td><td> </td><td class="right">      unprotected packets (#167, #480, #481, #517)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-81" class="change"><td></td><th><small>skipping to change at</small><a href="#part-81"><em> page 135, line 37<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-81"><em> page 138, line 30<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">      linkability (#232, #491, #496)</td><td> </td><td class="right">      linkability (#232, #491, #496)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Transport parameters for 0-RTT are retained from a previous</td><td> </td><td class="right">   o  Transport parameters for 0-RTT are retained from a previous</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      connection (#405, #513, #512)</td><td> </td><td class="right">      connection (#405, #513, #512)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      *  A client in 0-RTT no longer required to reset excess streams</td><td> </td><td class="right">      *  A client in 0-RTT no longer required to reset excess streams</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">         (#425, #479)</td><td> </td><td class="right">         (#425, #479)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Expanded security considerations (#440, #444, #445, #448)</td><td> </td><td class="right">   o  Expanded security considerations (#440, #444, #445, #448)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0267"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">B.1<span class="delete">6</span>.  Since draft-ietf-quic-transport-01</td><td> </td><td class="rblock">B.1<span class="insert">7</span>.  Since draft-ietf-quic-transport-01</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Defined short and long packet headers (#40, #148, #361)</td><td> </td><td class="right">   o  Defined short and long packet headers (#40, #148, #361)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Defined a versioning scheme and stable fields (#51, #361)</td><td> </td><td class="right">   o  Defined a versioning scheme and stable fields (#51, #361)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Define reserved version values for "greasing" negotiation (#112,</td><td> </td><td class="right">   o  Define reserved version values for "greasing" negotiation (#112,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      #278)</td><td> </td><td class="right">      #278)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  The initial packet number is randomized (#35, #283)</td><td> </td><td class="right">   o  The initial packet number is randomized (#35, #283)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-82" class="change"><td></td><th><small>skipping to change at</small><a href="#part-82"><em> page 137, line 36<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-82"><em> page 140, line 28<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Remove error code and reason phrase from GOAWAY (#352, #355)</td><td> </td><td class="right">   o  Remove error code and reason phrase from GOAWAY (#352, #355)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  GOAWAY includes a final stream number for both directions (#347)</td><td> </td><td class="right">   o  GOAWAY includes a final stream number for both directions (#347)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Error codes for RESET_STREAM and CONNECTION_CLOSE are now at a</td><td> </td><td class="right">   o  Error codes for RESET_STREAM and CONNECTION_CLOSE are now at a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      consistent offset (#249)</td><td> </td><td class="right">      consistent offset (#249)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Defined priority as the responsibility of the application protocol</td><td> </td><td class="right">   o  Defined priority as the responsibility of the application protocol</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      (#104, #303)</td><td> </td><td class="right">      (#104, #303)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0268"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">B.1<span class="delete">7</span>.  Since draft-ietf-quic-transport-00</td><td> </td><td class="rblock">B.1<span class="insert">8</span>.  Since draft-ietf-quic-transport-00</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Replaced DIVERSIFICATION_NONCE flag with KEY_PHASE flag</td><td> </td><td class="right">   o  Replaced DIVERSIFICATION_NONCE flag with KEY_PHASE flag</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Defined versioning</td><td> </td><td class="right">   o  Defined versioning</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Reworked description of packet and frame layout</td><td> </td><td class="right">   o  Reworked description of packet and frame layout</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Error code space is divided into regions for each component</td><td> </td><td class="right">   o  Error code space is divided into regions for each component</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Use big endian for all numeric values</td><td> </td><td class="right">   o  Use big endian for all numeric values</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0269"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">B.1<span class="delete">8</span>.  Since draft-hamilton-quic-transport-protocol-01</td><td> </td><td class="rblock">B.1<span class="insert">9</span>.  Since draft-hamilton-quic-transport-protocol-01</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Adopted as base for draft-ietf-quic-tls</td><td> </td><td class="right">   o  Adopted as base for draft-ietf-quic-tls</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Updated authors/editors list</td><td> </td><td class="right">   o  Updated authors/editors list</td><td class="lineno"></td></tr>
      <tr id="diff0270"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                                                         </span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Added IANA Considerations section</td><td> </td><td class="right">   o  Added IANA Considerations section</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   o  Moved Contributors and Acknowledgments to appendices</td><td> </td><td class="right">   o  Moved Contributors and Acknowledgments to appendices</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">Acknowledgments</td><td> </td><td class="right">Acknowledgments</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Special thanks are due to the following for helping shape pre-IETF</td><td> </td><td class="right">   Special thanks are due to the following for helping shape pre-IETF</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   QUIC and its deployment: Chris Bentzel, Misha Efimov, Roberto Peon,</td><td> </td><td class="right">   QUIC and its deployment: Chris Bentzel, Misha Efimov, Roberto Peon,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Alistair Riddoch, Siddharth Vijayakrishnan, and Assar Westerlund.</td><td> </td><td class="right">   Alistair Riddoch, Siddharth Vijayakrishnan, and Assar Westerlund.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-83" class="change"><td></td><th><small>skipping to change at</small><a href="#part-83"><em> page 138, line 42<span class="hide"> ¶</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-83"><em> page 141, line 39<span class="hide"> ¶</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">Authors' Addresses</td><td> </td><td class="right">Authors' Addresses</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Jana Iyengar (editor)</td><td> </td><td class="right">   Jana Iyengar (editor)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Fastly</td><td> </td><td class="right">   Fastly</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Email: jri.ietf@gmail.com</td><td> </td><td class="right">   Email: jri.ietf@gmail.com</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Martin Thomson (editor)</td><td> </td><td class="right">   Martin Thomson (editor)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Mozilla</td><td> </td><td class="right">   Mozilla</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0271"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Email: m<span class="delete">artin.thomson@gmail.com</span></td><td> </td><td class="rblock">   Email: m<span class="insert">t@lowentropy.net</span></td><td class="lineno"></td></tr>

     <tr><td></td><td class="left"></td><td> </td><td class="right"></td><td></td></tr>
     <tr id="end" bgcolor="gray"><th colspan="5" align="center">&nbsp;End of changes. 271 change blocks.&nbsp;</th></tr>
     <tr class="stats"><td></td><th><i>747 lines changed or deleted</i></th><th><i> </i></th><th><i>894 lines changed or added</i></th><td></td></tr>
     <tr><td colspan="5" class="small" align="center"><br>This html diff was produced by rfcdiff 1.48. The latest version is available from <a href="http://www.tools.ietf.org/tools/rfcdiff/">http://tools.ietf.org/tools/rfcdiff/</a> </td></tr>
   </tbody></table>
   
   
</body></html>